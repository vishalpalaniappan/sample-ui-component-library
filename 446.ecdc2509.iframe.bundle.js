/*! For license information please see 446.ecdc2509.iframe.bundle.js.LICENSE.txt */
(self.webpackChunksample_ui_component_library=self.webpackChunksample_ui_component_library||[]).push([[446],{"./node_modules/@dagrejs/dagre/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports={graphlib:__webpack_require__("./node_modules/@dagrejs/graphlib/index.js"),layout:__webpack_require__("./node_modules/@dagrejs/dagre/lib/layout.js"),debug:__webpack_require__("./node_modules/@dagrejs/dagre/lib/debug.js"),util:{time:__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js").time,notime:__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js").notime},version:__webpack_require__("./node_modules/@dagrejs/dagre/lib/version.js")}},"./node_modules/@dagrejs/dagre/lib/acyclic.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let greedyFAS=__webpack_require__("./node_modules/@dagrejs/dagre/lib/greedy-fas.js"),uniqueId=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js").uniqueId;module.exports={run:function run(g){("greedy"===g.graph().acyclicer?greedyFAS(g,function weightFn(g){return e=>g.edge(e).weight}(g)):function dfsFAS(g){let fas=[],stack={},visited={};function dfs(v){Object.hasOwn(visited,v)||(visited[v]=!0,stack[v]=!0,g.outEdges(v).forEach(e=>{Object.hasOwn(stack,e.w)?fas.push(e):dfs(e.w)}),delete stack[v])}return g.nodes().forEach(dfs),fas}(g)).forEach(e=>{let label=g.edge(e);g.removeEdge(e),label.forwardName=e.name,label.reversed=!0,g.setEdge(e.w,e.v,label,uniqueId("rev"))})},undo:function undo(g){g.edges().forEach(e=>{let label=g.edge(e);if(label.reversed){g.removeEdge(e);let forwardName=label.forwardName;delete label.reversed,delete label.forwardName,g.setEdge(e.w,e.v,label,forwardName)}})}}},"./node_modules/@dagrejs/dagre/lib/add-border-segments.js":(module,__unused_webpack_exports,__webpack_require__)=>{let util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");function addBorderNode(g,prop,prefix,sg,sgNode,rank){let label={width:0,height:0,rank,borderType:prop},prev=sgNode[prop][rank-1],curr=util.addDummyNode(g,"border",label,prefix);sgNode[prop][rank]=curr,g.setParent(curr,sg),prev&&g.setEdge(prev,curr,{weight:1})}module.exports=function addBorderSegments(g){g.children().forEach(function dfs(v){let children=g.children(v),node=g.node(v);if(children.length&&children.forEach(dfs),Object.hasOwn(node,"minRank")){node.borderLeft=[],node.borderRight=[];for(let rank=node.minRank,maxRank=node.maxRank+1;rank<maxRank;++rank)addBorderNode(g,"borderLeft","_bl",v,node,rank),addBorderNode(g,"borderRight","_br",v,node,rank)}})}},"./node_modules/@dagrejs/dagre/lib/coordinate-system.js":module=>{"use strict";function swapWidthHeight(g){g.nodes().forEach(v=>swapWidthHeightOne(g.node(v))),g.edges().forEach(e=>swapWidthHeightOne(g.edge(e)))}function swapWidthHeightOne(attrs){let w=attrs.width;attrs.width=attrs.height,attrs.height=w}function reverseYOne(attrs){attrs.y=-attrs.y}function swapXYOne(attrs){let x=attrs.x;attrs.x=attrs.y,attrs.y=x}module.exports={adjust:function adjust(g){let rankDir=g.graph().rankdir.toLowerCase();"lr"!==rankDir&&"rl"!==rankDir||swapWidthHeight(g)},undo:function undo(g){let rankDir=g.graph().rankdir.toLowerCase();"bt"!==rankDir&&"rl"!==rankDir||function reverseY(g){g.nodes().forEach(v=>reverseYOne(g.node(v))),g.edges().forEach(e=>{let edge=g.edge(e);edge.points.forEach(reverseYOne),Object.hasOwn(edge,"y")&&reverseYOne(edge)})}(g);"lr"!==rankDir&&"rl"!==rankDir||(!function swapXY(g){g.nodes().forEach(v=>swapXYOne(g.node(v))),g.edges().forEach(e=>{let edge=g.edge(e);edge.points.forEach(swapXYOne),Object.hasOwn(edge,"x")&&swapXYOne(edge)})}(g),swapWidthHeight(g))}}},"./node_modules/@dagrejs/dagre/lib/data/list.js":module=>{function unlink(entry){entry._prev._next=entry._next,entry._next._prev=entry._prev,delete entry._next,delete entry._prev}function filterOutLinks(k,v){if("_next"!==k&&"_prev"!==k)return v}module.exports=class List{constructor(){let sentinel={};sentinel._next=sentinel._prev=sentinel,this._sentinel=sentinel}dequeue(){let sentinel=this._sentinel,entry=sentinel._prev;if(entry!==sentinel)return unlink(entry),entry}enqueue(entry){let sentinel=this._sentinel;entry._prev&&entry._next&&unlink(entry),entry._next=sentinel._next,sentinel._next._prev=entry,sentinel._next=entry,entry._prev=sentinel}toString(){let strs=[],sentinel=this._sentinel,curr=sentinel._prev;for(;curr!==sentinel;)strs.push(JSON.stringify(curr,filterOutLinks)),curr=curr._prev;return"["+strs.join(", ")+"]"}}},"./node_modules/@dagrejs/dagre/lib/debug.js":(module,__unused_webpack_exports,__webpack_require__)=>{let util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js"),Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").Graph;module.exports={debugOrdering:function debugOrdering(g){let layerMatrix=util.buildLayerMatrix(g),h=new Graph({compound:!0,multigraph:!0}).setGraph({});return g.nodes().forEach(v=>{h.setNode(v,{label:v}),h.setParent(v,"layer"+g.node(v).rank)}),g.edges().forEach(e=>h.setEdge(e.v,e.w,{},e.name)),layerMatrix.forEach((layer,i)=>{let layerV="layer"+i;h.setNode(layerV,{rank:"same"}),layer.reduce((u,v)=>(h.setEdge(u,v,{style:"invis"}),v))}),h}}},"./node_modules/@dagrejs/dagre/lib/greedy-fas.js":(module,__unused_webpack_exports,__webpack_require__)=>{let Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").Graph,List=__webpack_require__("./node_modules/@dagrejs/dagre/lib/data/list.js");module.exports=function greedyFAS(g,weightFn){if(g.nodeCount()<=1)return[];let state=function buildState(g,weightFn){let fasGraph=new Graph,maxIn=0,maxOut=0;g.nodes().forEach(v=>{fasGraph.setNode(v,{v,in:0,out:0})}),g.edges().forEach(e=>{let prevWeight=fasGraph.edge(e.v,e.w)||0,weight=weightFn(e),edgeWeight=prevWeight+weight;fasGraph.setEdge(e.v,e.w,edgeWeight),maxOut=Math.max(maxOut,fasGraph.node(e.v).out+=weight),maxIn=Math.max(maxIn,fasGraph.node(e.w).in+=weight)});let buckets=function range(limit){const range=[];for(let i=0;i<limit;i++)range.push(i);return range}(maxOut+maxIn+3).map(()=>new List),zeroIdx=maxIn+1;return fasGraph.nodes().forEach(v=>{assignBucket(buckets,zeroIdx,fasGraph.node(v))}),{graph:fasGraph,buckets,zeroIdx}}(g,weightFn||DEFAULT_WEIGHT_FN);return function doGreedyFAS(g,buckets,zeroIdx){let entry,results=[],sources=buckets[buckets.length-1],sinks=buckets[0];for(;g.nodeCount();){for(;entry=sinks.dequeue();)removeNode(g,buckets,zeroIdx,entry);for(;entry=sources.dequeue();)removeNode(g,buckets,zeroIdx,entry);if(g.nodeCount())for(let i=buckets.length-2;i>0;--i)if(entry=buckets[i].dequeue(),entry){results=results.concat(removeNode(g,buckets,zeroIdx,entry,!0));break}}return results}(state.graph,state.buckets,state.zeroIdx).flatMap(e=>g.outEdges(e.v,e.w))};let DEFAULT_WEIGHT_FN=()=>1;function removeNode(g,buckets,zeroIdx,entry,collectPredecessors){let results=collectPredecessors?[]:void 0;return g.inEdges(entry.v).forEach(edge=>{let weight=g.edge(edge),uEntry=g.node(edge.v);collectPredecessors&&results.push({v:edge.v,w:edge.w}),uEntry.out-=weight,assignBucket(buckets,zeroIdx,uEntry)}),g.outEdges(entry.v).forEach(edge=>{let weight=g.edge(edge),w=edge.w,wEntry=g.node(w);wEntry.in-=weight,assignBucket(buckets,zeroIdx,wEntry)}),g.removeNode(entry.v),results}function assignBucket(buckets,zeroIdx,entry){entry.out?entry.in?buckets[entry.out-entry.in+zeroIdx].enqueue(entry):buckets[buckets.length-1].enqueue(entry):buckets[0].enqueue(entry)}},"./node_modules/@dagrejs/dagre/lib/layout.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let acyclic=__webpack_require__("./node_modules/@dagrejs/dagre/lib/acyclic.js"),normalize=__webpack_require__("./node_modules/@dagrejs/dagre/lib/normalize.js"),rank=__webpack_require__("./node_modules/@dagrejs/dagre/lib/rank/index.js"),normalizeRanks=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js").normalizeRanks,parentDummyChains=__webpack_require__("./node_modules/@dagrejs/dagre/lib/parent-dummy-chains.js"),removeEmptyRanks=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js").removeEmptyRanks,nestingGraph=__webpack_require__("./node_modules/@dagrejs/dagre/lib/nesting-graph.js"),addBorderSegments=__webpack_require__("./node_modules/@dagrejs/dagre/lib/add-border-segments.js"),coordinateSystem=__webpack_require__("./node_modules/@dagrejs/dagre/lib/coordinate-system.js"),order=__webpack_require__("./node_modules/@dagrejs/dagre/lib/order/index.js"),position=__webpack_require__("./node_modules/@dagrejs/dagre/lib/position/index.js"),util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js"),Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").Graph;module.exports=function layout(g,opts){let time=opts&&opts.debugTiming?util.time:util.notime;time("layout",()=>{let layoutGraph=time("  buildLayoutGraph",()=>function buildLayoutGraph(inputGraph){let g=new Graph({multigraph:!0,compound:!0}),graph=canonicalize(inputGraph.graph());return g.setGraph(Object.assign({},graphDefaults,selectNumberAttrs(graph,graphNumAttrs),util.pick(graph,graphAttrs))),inputGraph.nodes().forEach(v=>{const newNode=selectNumberAttrs(canonicalize(inputGraph.node(v)),nodeNumAttrs);Object.keys(nodeDefaults).forEach(k=>{void 0===newNode[k]&&(newNode[k]=nodeDefaults[k])}),g.setNode(v,newNode),g.setParent(v,inputGraph.parent(v))}),inputGraph.edges().forEach(e=>{let edge=canonicalize(inputGraph.edge(e));g.setEdge(e,Object.assign({},edgeDefaults,selectNumberAttrs(edge,edgeNumAttrs),util.pick(edge,edgeAttrs)))}),g}(g));time("  runLayout",()=>function runLayout(g,time,opts){time("    makeSpaceForEdgeLabels",()=>function makeSpaceForEdgeLabels(g){let graph=g.graph();graph.ranksep/=2,g.edges().forEach(e=>{let edge=g.edge(e);edge.minlen*=2,"c"!==edge.labelpos.toLowerCase()&&("TB"===graph.rankdir||"BT"===graph.rankdir?edge.width+=edge.labeloffset:edge.height+=edge.labeloffset)})}(g)),time("    removeSelfEdges",()=>function removeSelfEdges(g){g.edges().forEach(e=>{if(e.v===e.w){var node=g.node(e.v);node.selfEdges||(node.selfEdges=[]),node.selfEdges.push({e,label:g.edge(e)}),g.removeEdge(e)}})}(g)),time("    acyclic",()=>acyclic.run(g)),time("    nestingGraph.run",()=>nestingGraph.run(g)),time("    rank",()=>rank(util.asNonCompoundGraph(g))),time("    injectEdgeLabelProxies",()=>function injectEdgeLabelProxies(g){g.edges().forEach(e=>{let edge=g.edge(e);if(edge.width&&edge.height){let v=g.node(e.v),label={rank:(g.node(e.w).rank-v.rank)/2+v.rank,e};util.addDummyNode(g,"edge-proxy",label,"_ep")}})}(g)),time("    removeEmptyRanks",()=>removeEmptyRanks(g)),time("    nestingGraph.cleanup",()=>nestingGraph.cleanup(g)),time("    normalizeRanks",()=>normalizeRanks(g)),time("    assignRankMinMax",()=>function assignRankMinMax(g){let maxRank=0;g.nodes().forEach(v=>{let node=g.node(v);node.borderTop&&(node.minRank=g.node(node.borderTop).rank,node.maxRank=g.node(node.borderBottom).rank,maxRank=Math.max(maxRank,node.maxRank))}),g.graph().maxRank=maxRank}(g)),time("    removeEdgeLabelProxies",()=>function removeEdgeLabelProxies(g){g.nodes().forEach(v=>{let node=g.node(v);"edge-proxy"===node.dummy&&(g.edge(node.e).labelRank=node.rank,g.removeNode(v))})}(g)),time("    normalize.run",()=>normalize.run(g)),time("    parentDummyChains",()=>parentDummyChains(g)),time("    addBorderSegments",()=>addBorderSegments(g)),time("    order",()=>order(g,opts)),time("    insertSelfEdges",()=>function insertSelfEdges(g){var layers=util.buildLayerMatrix(g);layers.forEach(layer=>{var orderShift=0;layer.forEach((v,i)=>{var node=g.node(v);node.order=i+orderShift,(node.selfEdges||[]).forEach(selfEdge=>{util.addDummyNode(g,"selfedge",{width:selfEdge.label.width,height:selfEdge.label.height,rank:node.rank,order:i+ ++orderShift,e:selfEdge.e,label:selfEdge.label},"_se")}),delete node.selfEdges})})}(g)),time("    adjustCoordinateSystem",()=>coordinateSystem.adjust(g)),time("    position",()=>position(g)),time("    positionSelfEdges",()=>function positionSelfEdges(g){g.nodes().forEach(v=>{var node=g.node(v);if("selfedge"===node.dummy){var selfNode=g.node(node.e.v),x=selfNode.x+selfNode.width/2,y=selfNode.y,dx=node.x-x,dy=selfNode.height/2;g.setEdge(node.e,node.label),g.removeNode(v),node.label.points=[{x:x+2*dx/3,y:y-dy},{x:x+5*dx/6,y:y-dy},{x:x+dx,y},{x:x+5*dx/6,y:y+dy},{x:x+2*dx/3,y:y+dy}],node.label.x=node.x,node.label.y=node.y}})}(g)),time("    removeBorderNodes",()=>function removeBorderNodes(g){g.nodes().forEach(v=>{if(g.children(v).length){let node=g.node(v),t=g.node(node.borderTop),b=g.node(node.borderBottom),l=g.node(node.borderLeft[node.borderLeft.length-1]),r=g.node(node.borderRight[node.borderRight.length-1]);node.width=Math.abs(r.x-l.x),node.height=Math.abs(b.y-t.y),node.x=l.x+node.width/2,node.y=t.y+node.height/2}}),g.nodes().forEach(v=>{"border"===g.node(v).dummy&&g.removeNode(v)})}(g)),time("    normalize.undo",()=>normalize.undo(g)),time("    fixupEdgeLabelCoords",()=>function fixupEdgeLabelCoords(g){g.edges().forEach(e=>{let edge=g.edge(e);if(Object.hasOwn(edge,"x"))switch("l"!==edge.labelpos&&"r"!==edge.labelpos||(edge.width-=edge.labeloffset),edge.labelpos){case"l":edge.x-=edge.width/2+edge.labeloffset;break;case"r":edge.x+=edge.width/2+edge.labeloffset}})}(g)),time("    undoCoordinateSystem",()=>coordinateSystem.undo(g)),time("    translateGraph",()=>function translateGraph(g){let minX=Number.POSITIVE_INFINITY,maxX=0,minY=Number.POSITIVE_INFINITY,maxY=0,graphLabel=g.graph(),marginX=graphLabel.marginx||0,marginY=graphLabel.marginy||0;function getExtremes(attrs){let x=attrs.x,y=attrs.y,w=attrs.width,h=attrs.height;minX=Math.min(minX,x-w/2),maxX=Math.max(maxX,x+w/2),minY=Math.min(minY,y-h/2),maxY=Math.max(maxY,y+h/2)}g.nodes().forEach(v=>getExtremes(g.node(v))),g.edges().forEach(e=>{let edge=g.edge(e);Object.hasOwn(edge,"x")&&getExtremes(edge)}),minX-=marginX,minY-=marginY,g.nodes().forEach(v=>{let node=g.node(v);node.x-=minX,node.y-=minY}),g.edges().forEach(e=>{let edge=g.edge(e);edge.points.forEach(p=>{p.x-=minX,p.y-=minY}),Object.hasOwn(edge,"x")&&(edge.x-=minX),Object.hasOwn(edge,"y")&&(edge.y-=minY)}),graphLabel.width=maxX-minX+marginX,graphLabel.height=maxY-minY+marginY}(g)),time("    assignNodeIntersects",()=>function assignNodeIntersects(g){g.edges().forEach(e=>{let p1,p2,edge=g.edge(e),nodeV=g.node(e.v),nodeW=g.node(e.w);edge.points?(p1=edge.points[0],p2=edge.points[edge.points.length-1]):(edge.points=[],p1=nodeW,p2=nodeV),edge.points.unshift(util.intersectRect(nodeV,p1)),edge.points.push(util.intersectRect(nodeW,p2))})}(g)),time("    reversePoints",()=>function reversePointsForReversedEdges(g){g.edges().forEach(e=>{let edge=g.edge(e);edge.reversed&&edge.points.reverse()})}(g)),time("    acyclic.undo",()=>acyclic.undo(g))}(layoutGraph,time,opts)),time("  updateInputGraph",()=>function updateInputGraph(inputGraph,layoutGraph){inputGraph.nodes().forEach(v=>{let inputLabel=inputGraph.node(v),layoutLabel=layoutGraph.node(v);inputLabel&&(inputLabel.x=layoutLabel.x,inputLabel.y=layoutLabel.y,inputLabel.rank=layoutLabel.rank,layoutGraph.children(v).length&&(inputLabel.width=layoutLabel.width,inputLabel.height=layoutLabel.height))}),inputGraph.edges().forEach(e=>{let inputLabel=inputGraph.edge(e),layoutLabel=layoutGraph.edge(e);inputLabel.points=layoutLabel.points,Object.hasOwn(layoutLabel,"x")&&(inputLabel.x=layoutLabel.x,inputLabel.y=layoutLabel.y)}),inputGraph.graph().width=layoutGraph.graph().width,inputGraph.graph().height=layoutGraph.graph().height}(g,layoutGraph))})};let graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height","rank"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"];function selectNumberAttrs(obj,attrs){return util.mapValues(util.pick(obj,attrs),Number)}function canonicalize(attrs){var newAttrs={};return attrs&&Object.entries(attrs).forEach(([k,v])=>{"string"==typeof k&&(k=k.toLowerCase()),newAttrs[k]=v}),newAttrs}},"./node_modules/@dagrejs/dagre/lib/nesting-graph.js":(module,__unused_webpack_exports,__webpack_require__)=>{let util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");function dfs(g,root,nodeSep,weight,height,depths,v){let children=g.children(v);if(!children.length)return void(v!==root&&g.setEdge(root,v,{weight:0,minlen:nodeSep}));let top=util.addBorderNode(g,"_bt"),bottom=util.addBorderNode(g,"_bb"),label=g.node(v);g.setParent(top,v),label.borderTop=top,g.setParent(bottom,v),label.borderBottom=bottom,children.forEach(child=>{dfs(g,root,nodeSep,weight,height,depths,child);let childNode=g.node(child),childTop=childNode.borderTop?childNode.borderTop:child,childBottom=childNode.borderBottom?childNode.borderBottom:child,thisWeight=childNode.borderTop?weight:2*weight,minlen=childTop!==childBottom?1:height-depths[v]+1;g.setEdge(top,childTop,{weight:thisWeight,minlen,nestingEdge:!0}),g.setEdge(childBottom,bottom,{weight:thisWeight,minlen,nestingEdge:!0})}),g.parent(v)||g.setEdge(root,top,{weight:0,minlen:height+depths[v]})}module.exports={run:function run(g){let root=util.addDummyNode(g,"root",{},"_root"),depths=function treeDepths(g){var depths={};function dfs(v,depth){var children=g.children(v);children&&children.length&&children.forEach(child=>dfs(child,depth+1)),depths[v]=depth}return g.children().forEach(v=>dfs(v,1)),depths}(g),depthsArr=Object.values(depths),height=util.applyWithChunking(Math.max,depthsArr)-1,nodeSep=2*height+1;g.graph().nestingRoot=root,g.edges().forEach(e=>g.edge(e).minlen*=nodeSep);let weight=function sumWeights(g){return g.edges().reduce((acc,e)=>acc+g.edge(e).weight,0)}(g)+1;g.children().forEach(child=>dfs(g,root,nodeSep,weight,height,depths,child)),g.graph().nodeRankFactor=nodeSep},cleanup:function cleanup(g){var graphLabel=g.graph();g.removeNode(graphLabel.nestingRoot),delete graphLabel.nestingRoot,g.edges().forEach(e=>{g.edge(e).nestingEdge&&g.removeEdge(e)})}}},"./node_modules/@dagrejs/dagre/lib/normalize.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");module.exports={run:function run(g){g.graph().dummyChains=[],g.edges().forEach(edge=>function normalizeEdge(g,e){let dummy,attrs,i,v=e.v,vRank=g.node(v).rank,w=e.w,wRank=g.node(w).rank,name=e.name,edgeLabel=g.edge(e),labelRank=edgeLabel.labelRank;if(wRank===vRank+1)return;for(g.removeEdge(e),i=0,++vRank;vRank<wRank;++i,++vRank)edgeLabel.points=[],attrs={width:0,height:0,edgeLabel,edgeObj:e,rank:vRank},dummy=util.addDummyNode(g,"edge",attrs,"_d"),vRank===labelRank&&(attrs.width=edgeLabel.width,attrs.height=edgeLabel.height,attrs.dummy="edge-label",attrs.labelpos=edgeLabel.labelpos),g.setEdge(v,dummy,{weight:edgeLabel.weight},name),0===i&&g.graph().dummyChains.push(dummy),v=dummy;g.setEdge(v,w,{weight:edgeLabel.weight},name)}(g,edge))},undo:function undo(g){g.graph().dummyChains.forEach(v=>{let w,node=g.node(v),origLabel=node.edgeLabel;for(g.setEdge(node.edgeObj,origLabel);node.dummy;)w=g.successors(v)[0],g.removeNode(v),origLabel.points.push({x:node.x,y:node.y}),"edge-label"===node.dummy&&(origLabel.x=node.x,origLabel.y=node.y,origLabel.width=node.width,origLabel.height=node.height),v=w,node=g.node(v)})}}},"./node_modules/@dagrejs/dagre/lib/order/add-subgraph-constraints.js":module=>{module.exports=function addSubgraphConstraints(g,cg,vs){let rootPrev,prev={};vs.forEach(v=>{let parent,prevChild,child=g.parent(v);for(;child;){if(parent=g.parent(child),parent?(prevChild=prev[parent],prev[parent]=child):(prevChild=rootPrev,rootPrev=child),prevChild&&prevChild!==child)return void cg.setEdge(prevChild,child);child=parent}})}},"./node_modules/@dagrejs/dagre/lib/order/barycenter.js":module=>{module.exports=function barycenter(g,movable=[]){return movable.map(v=>{let inV=g.inEdges(v);if(inV.length){let result=inV.reduce((acc,e)=>{let edge=g.edge(e),nodeU=g.node(e.v);return{sum:acc.sum+edge.weight*nodeU.order,weight:acc.weight+edge.weight}},{sum:0,weight:0});return{v,barycenter:result.sum/result.weight,weight:result.weight}}return{v}})}},"./node_modules/@dagrejs/dagre/lib/order/build-layer-graph.js":(module,__unused_webpack_exports,__webpack_require__)=>{let Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").Graph,util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");module.exports=function buildLayerGraph(g,rank,relationship){let root=function createRootNode(g){var v;for(;g.hasNode(v=util.uniqueId("_root")););return v}(g),result=new Graph({compound:!0}).setGraph({root}).setDefaultNodeLabel(v=>g.node(v));return g.nodes().forEach(v=>{let node=g.node(v),parent=g.parent(v);(node.rank===rank||node.minRank<=rank&&rank<=node.maxRank)&&(result.setNode(v),result.setParent(v,parent||root),g[relationship](v).forEach(e=>{let u=e.v===v?e.w:e.v,edge=result.edge(u,v),weight=void 0!==edge?edge.weight:0;result.setEdge(u,v,{weight:g.edge(e).weight+weight})}),Object.hasOwn(node,"minRank")&&result.setNode(v,{borderLeft:node.borderLeft[rank],borderRight:node.borderRight[rank]}))}),result}},"./node_modules/@dagrejs/dagre/lib/order/cross-count.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let zipObject=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js").zipObject;function twoLayerCrossCount(g,northLayer,southLayer){let southPos=zipObject(southLayer,southLayer.map((v,i)=>i)),southEntries=northLayer.flatMap(v=>g.outEdges(v).map(e=>({pos:southPos[e.w],weight:g.edge(e).weight})).sort((a,b)=>a.pos-b.pos)),firstIndex=1;for(;firstIndex<southLayer.length;)firstIndex<<=1;let treeSize=2*firstIndex-1;firstIndex-=1;let tree=new Array(treeSize).fill(0),cc=0;return southEntries.forEach(entry=>{let index=entry.pos+firstIndex;tree[index]+=entry.weight;let weightSum=0;for(;index>0;)index%2&&(weightSum+=tree[index+1]),index=index-1>>1,tree[index]+=entry.weight;cc+=entry.weight*weightSum}),cc}module.exports=function crossCount(g,layering){let cc=0;for(let i=1;i<layering.length;++i)cc+=twoLayerCrossCount(g,layering[i-1],layering[i]);return cc}},"./node_modules/@dagrejs/dagre/lib/order/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let initOrder=__webpack_require__("./node_modules/@dagrejs/dagre/lib/order/init-order.js"),crossCount=__webpack_require__("./node_modules/@dagrejs/dagre/lib/order/cross-count.js"),sortSubgraph=__webpack_require__("./node_modules/@dagrejs/dagre/lib/order/sort-subgraph.js"),buildLayerGraph=__webpack_require__("./node_modules/@dagrejs/dagre/lib/order/build-layer-graph.js"),addSubgraphConstraints=__webpack_require__("./node_modules/@dagrejs/dagre/lib/order/add-subgraph-constraints.js"),Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").Graph,util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");function buildLayerGraphs(g,ranks,relationship){return ranks.map(function(rank){return buildLayerGraph(g,rank,relationship)})}function sweepLayerGraphs(layerGraphs,biasRight){let cg=new Graph;layerGraphs.forEach(function(lg){let root=lg.graph().root,sorted=sortSubgraph(lg,root,cg,biasRight);sorted.vs.forEach((v,i)=>lg.node(v).order=i),addSubgraphConstraints(lg,cg,sorted.vs)})}function assignOrder(g,layering){Object.values(layering).forEach(layer=>layer.forEach((v,i)=>g.node(v).order=i))}module.exports=function order(g,opts){if(opts&&"function"==typeof opts.customOrder)return void opts.customOrder(g,order);let maxRank=util.maxRank(g),downLayerGraphs=buildLayerGraphs(g,util.range(1,maxRank+1),"inEdges"),upLayerGraphs=buildLayerGraphs(g,util.range(maxRank-1,-1,-1),"outEdges"),layering=initOrder(g);if(assignOrder(g,layering),opts&&opts.disableOptimalOrderHeuristic)return;let best,bestCC=Number.POSITIVE_INFINITY;for(let i=0,lastBest=0;lastBest<4;++i,++lastBest){sweepLayerGraphs(i%2?downLayerGraphs:upLayerGraphs,i%4>=2),layering=util.buildLayerMatrix(g);let cc=crossCount(g,layering);cc<bestCC&&(lastBest=0,best=Object.assign({},layering),bestCC=cc)}assignOrder(g,best)}},"./node_modules/@dagrejs/dagre/lib/order/init-order.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");module.exports=function initOrder(g){let visited={},simpleNodes=g.nodes().filter(v=>!g.children(v).length),simpleNodesRanks=simpleNodes.map(v=>g.node(v).rank),maxRank=util.applyWithChunking(Math.max,simpleNodesRanks),layers=util.range(maxRank+1).map(()=>[]);return simpleNodes.sort((a,b)=>g.node(a).rank-g.node(b).rank).forEach(function dfs(v){if(visited[v])return;visited[v]=!0;let node=g.node(v);layers[node.rank].push(v),g.successors(v).forEach(dfs)}),layers}},"./node_modules/@dagrejs/dagre/lib/order/resolve-conflicts.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");module.exports=function resolveConflicts(entries,cg){let mappedEntries={};return entries.forEach((entry,i)=>{let tmp=mappedEntries[entry.v]={indegree:0,in:[],out:[],vs:[entry.v],i};void 0!==entry.barycenter&&(tmp.barycenter=entry.barycenter,tmp.weight=entry.weight)}),cg.edges().forEach(e=>{let entryV=mappedEntries[e.v],entryW=mappedEntries[e.w];void 0!==entryV&&void 0!==entryW&&(entryW.indegree++,entryV.out.push(mappedEntries[e.w]))}),function doResolveConflicts(sourceSet){let entries=[];function handleIn(vEntry){return uEntry=>{uEntry.merged||(void 0===uEntry.barycenter||void 0===vEntry.barycenter||uEntry.barycenter>=vEntry.barycenter)&&function mergeEntries(target,source){let sum=0,weight=0;target.weight&&(sum+=target.barycenter*target.weight,weight+=target.weight);source.weight&&(sum+=source.barycenter*source.weight,weight+=source.weight);target.vs=source.vs.concat(target.vs),target.barycenter=sum/weight,target.weight=weight,target.i=Math.min(source.i,target.i),source.merged=!0}(vEntry,uEntry)}}function handleOut(vEntry){return wEntry=>{wEntry.in.push(vEntry),0===--wEntry.indegree&&sourceSet.push(wEntry)}}for(;sourceSet.length;){let entry=sourceSet.pop();entries.push(entry),entry.in.reverse().forEach(handleIn(entry)),entry.out.forEach(handleOut(entry))}return entries.filter(entry=>!entry.merged).map(entry=>util.pick(entry,["vs","i","barycenter","weight"]))}(Object.values(mappedEntries).filter(entry=>!entry.indegree))}},"./node_modules/@dagrejs/dagre/lib/order/sort-subgraph.js":(module,__unused_webpack_exports,__webpack_require__)=>{let barycenter=__webpack_require__("./node_modules/@dagrejs/dagre/lib/order/barycenter.js"),resolveConflicts=__webpack_require__("./node_modules/@dagrejs/dagre/lib/order/resolve-conflicts.js"),sort=__webpack_require__("./node_modules/@dagrejs/dagre/lib/order/sort.js");module.exports=function sortSubgraph(g,v,cg,biasRight){let movable=g.children(v),node=g.node(v),bl=node?node.borderLeft:void 0,br=node?node.borderRight:void 0,subgraphs={};bl&&(movable=movable.filter(w=>w!==bl&&w!==br));let barycenters=barycenter(g,movable);barycenters.forEach(entry=>{if(g.children(entry.v).length){let subgraphResult=sortSubgraph(g,entry.v,cg,biasRight);subgraphs[entry.v]=subgraphResult,Object.hasOwn(subgraphResult,"barycenter")&&function mergeBarycenters(target,other){void 0!==target.barycenter?(target.barycenter=(target.barycenter*target.weight+other.barycenter*other.weight)/(target.weight+other.weight),target.weight+=other.weight):(target.barycenter=other.barycenter,target.weight=other.weight)}(entry,subgraphResult)}});let entries=resolveConflicts(barycenters,cg);!function expandSubgraphs(entries,subgraphs){entries.forEach(entry=>{entry.vs=entry.vs.flatMap(v=>subgraphs[v]?subgraphs[v].vs:v)})}(entries,subgraphs);let result=sort(entries,biasRight);if(bl&&(result.vs=[bl,result.vs,br].flat(!0),g.predecessors(bl).length)){let blPred=g.node(g.predecessors(bl)[0]),brPred=g.node(g.predecessors(br)[0]);Object.hasOwn(result,"barycenter")||(result.barycenter=0,result.weight=0),result.barycenter=(result.barycenter*result.weight+blPred.order+brPred.order)/(result.weight+2),result.weight+=2}return result}},"./node_modules/@dagrejs/dagre/lib/order/sort.js":(module,__unused_webpack_exports,__webpack_require__)=>{let util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");function consumeUnsortable(vs,unsortable,index){let last;for(;unsortable.length&&(last=unsortable[unsortable.length-1]).i<=index;)unsortable.pop(),vs.push(last.vs),index++;return index}module.exports=function sort(entries,biasRight){let parts=util.partition(entries,entry=>Object.hasOwn(entry,"barycenter")),sortable=parts.lhs,unsortable=parts.rhs.sort((a,b)=>b.i-a.i),vs=[],sum=0,weight=0,vsIndex=0;sortable.sort(function compareWithBias(bias){return(entryV,entryW)=>entryV.barycenter<entryW.barycenter?-1:entryV.barycenter>entryW.barycenter?1:bias?entryW.i-entryV.i:entryV.i-entryW.i}(!!biasRight)),vsIndex=consumeUnsortable(vs,unsortable,vsIndex),sortable.forEach(entry=>{vsIndex+=entry.vs.length,vs.push(entry.vs),sum+=entry.barycenter*entry.weight,weight+=entry.weight,vsIndex=consumeUnsortable(vs,unsortable,vsIndex)});let result={vs:vs.flat(!0)};weight&&(result.barycenter=sum/weight,result.weight=weight);return result}},"./node_modules/@dagrejs/dagre/lib/parent-dummy-chains.js":module=>{module.exports=function parentDummyChains(g){let postorderNums=function postorder(g){let result={},lim=0;function dfs(v){let low=lim;g.children(v).forEach(dfs),result[v]={low,lim:lim++}}return g.children().forEach(dfs),result}(g);g.graph().dummyChains.forEach(v=>{let node=g.node(v),edgeObj=node.edgeObj,pathData=function findPath(g,postorderNums,v,w){let parent,lca,vPath=[],wPath=[],low=Math.min(postorderNums[v].low,postorderNums[w].low),lim=Math.max(postorderNums[v].lim,postorderNums[w].lim);parent=v;do{parent=g.parent(parent),vPath.push(parent)}while(parent&&(postorderNums[parent].low>low||lim>postorderNums[parent].lim));lca=parent,parent=w;for(;(parent=g.parent(parent))!==lca;)wPath.push(parent);return{path:vPath.concat(wPath.reverse()),lca}}(g,postorderNums,edgeObj.v,edgeObj.w),path=pathData.path,lca=pathData.lca,pathIdx=0,pathV=path[pathIdx],ascending=!0;for(;v!==edgeObj.w;){if(node=g.node(v),ascending){for(;(pathV=path[pathIdx])!==lca&&g.node(pathV).maxRank<node.rank;)pathIdx++;pathV===lca&&(ascending=!1)}if(!ascending){for(;pathIdx<path.length-1&&g.node(pathV=path[pathIdx+1]).minRank<=node.rank;)pathIdx++;pathV=path[pathIdx]}g.setParent(v,pathV),v=g.successors(v)[0]}})}},"./node_modules/@dagrejs/dagre/lib/position/bk.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").Graph,util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");function findType1Conflicts(g,layering){let conflicts={};return layering.length&&layering.reduce(function visitLayer(prevLayer,layer){let k0=0,scanPos=0,prevLayerLength=prevLayer.length,lastNode=layer[layer.length-1];return layer.forEach((v,i)=>{let w=function findOtherInnerSegmentNode(g,v){if(g.node(v).dummy)return g.predecessors(v).find(u=>g.node(u).dummy)}(g,v),k1=w?g.node(w).order:prevLayerLength;(w||v===lastNode)&&(layer.slice(scanPos,i+1).forEach(scanNode=>{g.predecessors(scanNode).forEach(u=>{let uLabel=g.node(u),uPos=uLabel.order;!(uPos<k0||k1<uPos)||uLabel.dummy&&g.node(scanNode).dummy||addConflict(conflicts,u,scanNode)})}),scanPos=i+1,k0=k1)}),layer}),conflicts}function findType2Conflicts(g,layering){let conflicts={};function scan(south,southPos,southEnd,prevNorthBorder,nextNorthBorder){let v;util.range(southPos,southEnd).forEach(i=>{v=south[i],g.node(v).dummy&&g.predecessors(v).forEach(u=>{let uNode=g.node(u);uNode.dummy&&(uNode.order<prevNorthBorder||uNode.order>nextNorthBorder)&&addConflict(conflicts,u,v)})})}return layering.length&&layering.reduce(function visitLayer(north,south){let nextNorthPos,prevNorthPos=-1,southPos=0;return south.forEach((v,southLookahead)=>{if("border"===g.node(v).dummy){let predecessors=g.predecessors(v);predecessors.length&&(nextNorthPos=g.node(predecessors[0]).order,scan(south,southPos,southLookahead,prevNorthPos,nextNorthPos),southPos=southLookahead,prevNorthPos=nextNorthPos)}scan(south,southPos,south.length,nextNorthPos,north.length)}),south}),conflicts}function addConflict(conflicts,v,w){if(v>w){let tmp=v;v=w,w=tmp}let conflictsV=conflicts[v];conflictsV||(conflicts[v]=conflictsV={}),conflictsV[w]=!0}function hasConflict(conflicts,v,w){if(v>w){let tmp=v;v=w,w=tmp}return!!conflicts[v]&&Object.hasOwn(conflicts[v],w)}function verticalAlignment(g,layering,conflicts,neighborFn){let root={},align={},pos={};return layering.forEach(layer=>{layer.forEach((v,order)=>{root[v]=v,align[v]=v,pos[v]=order})}),layering.forEach(layer=>{let prevIdx=-1;layer.forEach(v=>{let ws=neighborFn(v);if(ws.length){ws=ws.sort((a,b)=>pos[a]-pos[b]);let mp=(ws.length-1)/2;for(let i=Math.floor(mp),il=Math.ceil(mp);i<=il;++i){let w=ws[i];align[v]===v&&prevIdx<pos[w]&&!hasConflict(conflicts,v,w)&&(align[w]=v,align[v]=root[v]=root[w],prevIdx=pos[w])}}})}),{root,align}}function horizontalCompaction(g,layering,root,align,reverseSep){let xs={},blockG=function buildBlockGraph(g,layering,root,reverseSep){let blockGraph=new Graph,graphLabel=g.graph(),sepFn=function sep(nodeSep,edgeSep,reverseSep){return(g,v,w)=>{let delta,vLabel=g.node(v),wLabel=g.node(w),sum=0;if(sum+=vLabel.width/2,Object.hasOwn(vLabel,"labelpos"))switch(vLabel.labelpos.toLowerCase()){case"l":delta=-vLabel.width/2;break;case"r":delta=vLabel.width/2}if(delta&&(sum+=reverseSep?delta:-delta),delta=0,sum+=(vLabel.dummy?edgeSep:nodeSep)/2,sum+=(wLabel.dummy?edgeSep:nodeSep)/2,sum+=wLabel.width/2,Object.hasOwn(wLabel,"labelpos"))switch(wLabel.labelpos.toLowerCase()){case"l":delta=wLabel.width/2;break;case"r":delta=-wLabel.width/2}return delta&&(sum+=reverseSep?delta:-delta),delta=0,sum}}(graphLabel.nodesep,graphLabel.edgesep,reverseSep);return layering.forEach(layer=>{let u;layer.forEach(v=>{let vRoot=root[v];if(blockGraph.setNode(vRoot),u){var uRoot=root[u],prevMax=blockGraph.edge(uRoot,vRoot);blockGraph.setEdge(uRoot,vRoot,Math.max(sepFn(g,v,u),prevMax||0))}u=v})}),blockGraph}(g,layering,root,reverseSep),borderType=reverseSep?"borderLeft":"borderRight";function iterate(setXsFunc,nextNodesFunc){let stack=blockG.nodes(),elem=stack.pop(),visited={};for(;elem;)visited[elem]?setXsFunc(elem):(visited[elem]=!0,stack.push(elem),stack=stack.concat(nextNodesFunc(elem))),elem=stack.pop()}return iterate(function pass1(elem){xs[elem]=blockG.inEdges(elem).reduce((acc,e)=>Math.max(acc,xs[e.v]+blockG.edge(e)),0)},blockG.predecessors.bind(blockG)),iterate(function pass2(elem){let min=blockG.outEdges(elem).reduce((acc,e)=>Math.min(acc,xs[e.w]-blockG.edge(e)),Number.POSITIVE_INFINITY),node=g.node(elem);min!==Number.POSITIVE_INFINITY&&node.borderType!==borderType&&(xs[elem]=Math.max(xs[elem],min))},blockG.successors.bind(blockG)),Object.keys(align).forEach(v=>xs[v]=xs[root[v]]),xs}function findSmallestWidthAlignment(g,xss){return Object.values(xss).reduce((currentMinAndXs,xs)=>{let max=Number.NEGATIVE_INFINITY,min=Number.POSITIVE_INFINITY;Object.entries(xs).forEach(([v,x])=>{let halfWidth=function width(g,v){return g.node(v).width}(g,v)/2;max=Math.max(x+halfWidth,max),min=Math.min(x-halfWidth,min)});const newMin=max-min;return newMin<currentMinAndXs[0]&&(currentMinAndXs=[newMin,xs]),currentMinAndXs},[Number.POSITIVE_INFINITY,null])[1]}function alignCoordinates(xss,alignTo){let alignToVals=Object.values(alignTo),alignToMin=util.applyWithChunking(Math.min,alignToVals),alignToMax=util.applyWithChunking(Math.max,alignToVals);["u","d"].forEach(vert=>{["l","r"].forEach(horiz=>{let alignment=vert+horiz,xs=xss[alignment];if(xs===alignTo)return;let xsVals=Object.values(xs),delta=alignToMin-util.applyWithChunking(Math.min,xsVals);"l"!==horiz&&(delta=alignToMax-util.applyWithChunking(Math.max,xsVals)),delta&&(xss[alignment]=util.mapValues(xs,x=>x+delta))})})}function balance(xss,align){return util.mapValues(xss.ul,(num,v)=>{if(align)return xss[align.toLowerCase()][v];{let xs=Object.values(xss).map(xs=>xs[v]).sort((a,b)=>a-b);return(xs[1]+xs[2])/2}})}module.exports={positionX:function positionX(g){let adjustedLayering,layering=util.buildLayerMatrix(g),conflicts=Object.assign(findType1Conflicts(g,layering),findType2Conflicts(g,layering)),xss={};["u","d"].forEach(vert=>{adjustedLayering="u"===vert?layering:Object.values(layering).reverse(),["l","r"].forEach(horiz=>{"r"===horiz&&(adjustedLayering=adjustedLayering.map(inner=>Object.values(inner).reverse()));let neighborFn=("u"===vert?g.predecessors:g.successors).bind(g),align=verticalAlignment(g,adjustedLayering,conflicts,neighborFn),xs=horizontalCompaction(g,adjustedLayering,align.root,align.align,"r"===horiz);"r"===horiz&&(xs=util.mapValues(xs,x=>-x)),xss[vert+horiz]=xs})});let smallestWidth=findSmallestWidthAlignment(g,xss);return alignCoordinates(xss,smallestWidth),balance(xss,g.graph().align)},findType1Conflicts,findType2Conflicts,addConflict,hasConflict,verticalAlignment,horizontalCompaction,alignCoordinates,findSmallestWidthAlignment,balance}},"./node_modules/@dagrejs/dagre/lib/position/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let util=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js"),positionX=__webpack_require__("./node_modules/@dagrejs/dagre/lib/position/bk.js").positionX;module.exports=function position(g){(function positionY(g){let layering=util.buildLayerMatrix(g),rankSep=g.graph().ranksep,prevY=0;layering.forEach(layer=>{const maxHeight=layer.reduce((acc,v)=>{const height=g.node(v).height;return acc>height?acc:height},0);layer.forEach(v=>g.node(v).y=prevY+maxHeight/2),prevY+=maxHeight+rankSep})})(g=util.asNonCompoundGraph(g)),Object.entries(positionX(g)).forEach(([v,x])=>g.node(v).x=x)}},"./node_modules/@dagrejs/dagre/lib/rank/feasible-tree.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").Graph,slack=__webpack_require__("./node_modules/@dagrejs/dagre/lib/rank/util.js").slack;function tightTree(t,g){return t.nodes().forEach(function dfs(v){g.nodeEdges(v).forEach(e=>{var edgeV=e.v,w=v===edgeV?e.w:edgeV;t.hasNode(w)||slack(g,e)||(t.setNode(w,{}),t.setEdge(v,w,{}),dfs(w))})}),t.nodeCount()}function findMinSlackEdge(t,g){return g.edges().reduce((acc,edge)=>{let edgeSlack=Number.POSITIVE_INFINITY;return t.hasNode(edge.v)!==t.hasNode(edge.w)&&(edgeSlack=slack(g,edge)),edgeSlack<acc[0]?[edgeSlack,edge]:acc},[Number.POSITIVE_INFINITY,null])[1]}function shiftRanks(t,g,delta){t.nodes().forEach(v=>g.node(v).rank+=delta)}module.exports=function feasibleTree(g){var edge,delta,t=new Graph({directed:!1}),start=g.nodes()[0],size=g.nodeCount();t.setNode(start,{});for(;tightTree(t,g)<size;)edge=findMinSlackEdge(t,g),delta=t.hasNode(edge.v)?slack(g,edge):-slack(g,edge),shiftRanks(t,g,delta);return t}},"./node_modules/@dagrejs/dagre/lib/rank/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var longestPath=__webpack_require__("./node_modules/@dagrejs/dagre/lib/rank/util.js").longestPath,feasibleTree=__webpack_require__("./node_modules/@dagrejs/dagre/lib/rank/feasible-tree.js"),networkSimplex=__webpack_require__("./node_modules/@dagrejs/dagre/lib/rank/network-simplex.js");module.exports=function rank(g){var ranker=g.graph().ranker;if(ranker instanceof Function)return ranker(g);switch(g.graph().ranker){case"network-simplex":default:networkSimplexRanker(g);break;case"tight-tree":!function tightTreeRanker(g){longestPath(g),feasibleTree(g)}(g);break;case"longest-path":longestPathRanker(g);case"none":}};var longestPathRanker=longestPath;function networkSimplexRanker(g){networkSimplex(g)}},"./node_modules/@dagrejs/dagre/lib/rank/network-simplex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var feasibleTree=__webpack_require__("./node_modules/@dagrejs/dagre/lib/rank/feasible-tree.js"),slack=__webpack_require__("./node_modules/@dagrejs/dagre/lib/rank/util.js").slack,initRank=__webpack_require__("./node_modules/@dagrejs/dagre/lib/rank/util.js").longestPath,preorder=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").alg.preorder,postorder=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").alg.postorder,simplify=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js").simplify;function networkSimplex(g){g=simplify(g),initRank(g);var e,t=feasibleTree(g);for(initLowLimValues(t),initCutValues(t,g);e=leaveEdge(t);)exchangeEdges(t,g,e,enterEdge(t,g,e))}function initCutValues(t,g){var vs=postorder(t,t.nodes());(vs=vs.slice(0,vs.length-1)).forEach(v=>function assignCutValue(t,g,child){var childLab=t.node(child),parent=childLab.parent;t.edge(child,parent).cutvalue=calcCutValue(t,g,child)}(t,g,v))}function calcCutValue(t,g,child){var parent=t.node(child).parent,childIsTail=!0,graphEdge=g.edge(child,parent),cutValue=0;return graphEdge||(childIsTail=!1,graphEdge=g.edge(parent,child)),cutValue=graphEdge.weight,g.nodeEdges(child).forEach(e=>{var isOutEdge=e.v===child,other=isOutEdge?e.w:e.v;if(other!==parent){var pointsToHead=isOutEdge===childIsTail,otherWeight=g.edge(e).weight;if(cutValue+=pointsToHead?otherWeight:-otherWeight,function isTreeEdge(tree,u,v){return tree.hasEdge(u,v)}(t,child,other)){var otherCutValue=t.edge(child,other).cutvalue;cutValue+=pointsToHead?-otherCutValue:otherCutValue}}}),cutValue}function initLowLimValues(tree,root){arguments.length<2&&(root=tree.nodes()[0]),dfsAssignLowLim(tree,{},1,root)}function dfsAssignLowLim(tree,visited,nextLim,v,parent){var low=nextLim,label=tree.node(v);return visited[v]=!0,tree.neighbors(v).forEach(w=>{Object.hasOwn(visited,w)||(nextLim=dfsAssignLowLim(tree,visited,nextLim,w,v))}),label.low=low,label.lim=nextLim++,parent?label.parent=parent:delete label.parent,nextLim}function leaveEdge(tree){return tree.edges().find(e=>tree.edge(e).cutvalue<0)}function enterEdge(t,g,edge){var v=edge.v,w=edge.w;g.hasEdge(v,w)||(v=edge.w,w=edge.v);var vLabel=t.node(v),wLabel=t.node(w),tailLabel=vLabel,flip=!1;vLabel.lim>wLabel.lim&&(tailLabel=wLabel,flip=!0);var candidates=g.edges().filter(edge=>flip===isDescendant(t,t.node(edge.v),tailLabel)&&flip!==isDescendant(t,t.node(edge.w),tailLabel));return candidates.reduce((acc,edge)=>slack(g,edge)<slack(g,acc)?edge:acc)}function exchangeEdges(t,g,e,f){var v=e.v,w=e.w;t.removeEdge(v,w),t.setEdge(f.v,f.w,{}),initLowLimValues(t),initCutValues(t,g),function updateRanks(t,g){var root=t.nodes().find(v=>!g.node(v).parent),vs=preorder(t,root);(vs=vs.slice(1)).forEach(v=>{var parent=t.node(v).parent,edge=g.edge(v,parent),flipped=!1;edge||(edge=g.edge(parent,v),flipped=!0),g.node(v).rank=g.node(parent).rank+(flipped?edge.minlen:-edge.minlen)})}(t,g)}function isDescendant(tree,vLabel,rootLabel){return rootLabel.low<=vLabel.lim&&vLabel.lim<=rootLabel.lim}module.exports=networkSimplex,networkSimplex.initLowLimValues=initLowLimValues,networkSimplex.initCutValues=initCutValues,networkSimplex.calcCutValue=calcCutValue,networkSimplex.leaveEdge=leaveEdge,networkSimplex.enterEdge=enterEdge,networkSimplex.exchangeEdges=exchangeEdges},"./node_modules/@dagrejs/dagre/lib/rank/util.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const{applyWithChunking}=__webpack_require__("./node_modules/@dagrejs/dagre/lib/util.js");module.exports={longestPath:function longestPath(g){var visited={};g.sources().forEach(function dfs(v){var label=g.node(v);if(Object.hasOwn(visited,v))return label.rank;visited[v]=!0;let outEdgesMinLens=g.outEdges(v).map(e=>null==e?Number.POSITIVE_INFINITY:dfs(e.w)-g.edge(e).minlen);var rank=applyWithChunking(Math.min,outEdgesMinLens);return rank===Number.POSITIVE_INFINITY&&(rank=0),label.rank=rank})},slack:function slack(g,e){return g.node(e.w).rank-g.node(e.v).rank-g.edge(e).minlen}}},"./node_modules/@dagrejs/dagre/lib/util.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/index.js").Graph;function addDummyNode(g,type,attrs,name){for(var v=name;g.hasNode(v);)v=uniqueId(name);return attrs.dummy=type,g.setNode(v,attrs),v}module.exports={addBorderNode:function addBorderNode(g,prefix,rank,order){let node={width:0,height:0};arguments.length>=4&&(node.rank=rank,node.order=order);return addDummyNode(g,"border",node,prefix)},addDummyNode,applyWithChunking,asNonCompoundGraph:function asNonCompoundGraph(g){let simplified=new Graph({multigraph:g.isMultigraph()}).setGraph(g.graph());return g.nodes().forEach(v=>{g.children(v).length||simplified.setNode(v,g.node(v))}),g.edges().forEach(e=>{simplified.setEdge(e,g.edge(e))}),simplified},buildLayerMatrix:function buildLayerMatrix(g){let layering=range(maxRank(g)+1).map(()=>[]);return g.nodes().forEach(v=>{let node=g.node(v),rank=node.rank;void 0!==rank&&(layering[rank][node.order]=v)}),layering},intersectRect:function intersectRect(rect,point){let sx,sy,x=rect.x,y=rect.y,dx=point.x-x,dy=point.y-y,w=rect.width/2,h=rect.height/2;if(!dx&&!dy)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(dy)*w>Math.abs(dx)*h?(dy<0&&(h=-h),sx=h*dx/dy,sy=h):(dx<0&&(w=-w),sx=w,sy=w*dy/dx);return{x:x+sx,y:y+sy}},mapValues:function mapValues(obj,funcOrProp){let func=funcOrProp;"string"==typeof funcOrProp&&(func=val=>val[funcOrProp]);return Object.entries(obj).reduce((acc,[k,v])=>(acc[k]=func(v,k),acc),{})},maxRank,normalizeRanks:function normalizeRanks(g){let nodeRanks=g.nodes().map(v=>{let rank=g.node(v).rank;return void 0===rank?Number.MAX_VALUE:rank}),min=applyWithChunking(Math.min,nodeRanks);g.nodes().forEach(v=>{let node=g.node(v);Object.hasOwn(node,"rank")&&(node.rank-=min)})},notime:function notime(name,fn){return fn()},partition:function partition(collection,fn){let result={lhs:[],rhs:[]};return collection.forEach(value=>{fn(value)?result.lhs.push(value):result.rhs.push(value)}),result},pick:function pick(source,keys){const dest={};for(const key of keys)void 0!==source[key]&&(dest[key]=source[key]);return dest},predecessorWeights:function predecessorWeights(g){let weightMap=g.nodes().map(v=>{let preds={};return g.inEdges(v).forEach(e=>{preds[e.v]=(preds[e.v]||0)+g.edge(e).weight}),preds});return zipObject(g.nodes(),weightMap)},range,removeEmptyRanks:function removeEmptyRanks(g){let nodeRanks=g.nodes().map(v=>g.node(v).rank),offset=applyWithChunking(Math.min,nodeRanks),layers=[];g.nodes().forEach(v=>{let rank=g.node(v).rank-offset;layers[rank]||(layers[rank]=[]),layers[rank].push(v)});let delta=0,nodeRankFactor=g.graph().nodeRankFactor;Array.from(layers).forEach((vs,i)=>{void 0===vs&&i%nodeRankFactor!==0?--delta:void 0!==vs&&delta&&vs.forEach(v=>g.node(v).rank+=delta)})},simplify:function simplify(g){let simplified=(new Graph).setGraph(g.graph());return g.nodes().forEach(v=>simplified.setNode(v,g.node(v))),g.edges().forEach(e=>{let simpleLabel=simplified.edge(e.v,e.w)||{weight:0,minlen:1},label=g.edge(e);simplified.setEdge(e.v,e.w,{weight:simpleLabel.weight+label.weight,minlen:Math.max(simpleLabel.minlen,label.minlen)})}),simplified},successorWeights:function successorWeights(g){let weightMap=g.nodes().map(v=>{let sucs={};return g.outEdges(v).forEach(e=>{sucs[e.w]=(sucs[e.w]||0)+g.edge(e).weight}),sucs});return zipObject(g.nodes(),weightMap)},time:function time(name,fn){let start=Date.now();try{return fn()}finally{console.log(name+" time: "+(Date.now()-start)+"ms")}},uniqueId,zipObject};const CHUNKING_THRESHOLD=65535;function applyWithChunking(fn,argsArray){if(argsArray.length>CHUNKING_THRESHOLD){const chunks=function splitToChunks(array,chunkSize=CHUNKING_THRESHOLD){const chunks=[];for(let i=0;i<array.length;i+=chunkSize){const chunk=array.slice(i,i+chunkSize);chunks.push(chunk)}return chunks}(argsArray);return fn.apply(null,chunks.map(chunk=>fn.apply(null,chunk)))}return fn.apply(null,argsArray)}function maxRank(g){const nodeRanks=g.nodes().map(v=>{let rank=g.node(v).rank;return void 0===rank?Number.MIN_VALUE:rank});return applyWithChunking(Math.max,nodeRanks)}let idCounter=0;function uniqueId(prefix){return prefix+""+ ++idCounter}function range(start,limit,step=1){null==limit&&(limit=start,start=0);let endCon=i=>i<limit;step<0&&(endCon=i=>limit<i);const range=[];for(let i=start;endCon(i);i+=step)range.push(i);return range}function zipObject(props,values){return props.reduce((acc,key,i)=>(acc[key]=values[i],acc),{})}},"./node_modules/@dagrejs/dagre/lib/version.js":module=>{module.exports="1.1.5"},"./node_modules/@dagrejs/graphlib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var lib=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/index.js");module.exports={Graph:lib.Graph,json:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/json.js"),alg:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/index.js"),version:lib.version}},"./node_modules/@dagrejs/graphlib/lib/alg/components.js":module=>{module.exports=function components(g){var cmpt,visited={},cmpts=[];function dfs(v){Object.hasOwn(visited,v)||(visited[v]=!0,cmpt.push(v),g.successors(v).forEach(dfs),g.predecessors(v).forEach(dfs))}return g.nodes().forEach(function(v){cmpt=[],dfs(v),cmpt.length&&cmpts.push(cmpt)}),cmpts}},"./node_modules/@dagrejs/graphlib/lib/alg/dfs.js":module=>{function postOrderDfs(v,navigation,visited,acc){for(var stack=[[v,!1]];stack.length>0;){var curr=stack.pop();curr[1]?acc.push(curr[0]):Object.hasOwn(visited,curr[0])||(visited[curr[0]]=!0,stack.push([curr[0],!0]),forEachRight(navigation(curr[0]),w=>stack.push([w,!1])))}}function preOrderDfs(v,navigation,visited,acc){for(var stack=[v];stack.length>0;){var curr=stack.pop();Object.hasOwn(visited,curr)||(visited[curr]=!0,acc.push(curr),forEachRight(navigation(curr),w=>stack.push(w)))}}function forEachRight(array,iteratee){for(var length=array.length;length--;)iteratee(array[length],length,array);return array}module.exports=function dfs(g,vs,order){Array.isArray(vs)||(vs=[vs]);var navigation=g.isDirected()?v=>g.successors(v):v=>g.neighbors(v),orderFunc="post"===order?postOrderDfs:preOrderDfs,acc=[],visited={};return vs.forEach(v=>{if(!g.hasNode(v))throw new Error("Graph does not have node: "+v);orderFunc(v,navigation,visited,acc)}),acc}},"./node_modules/@dagrejs/graphlib/lib/alg/dijkstra-all.js":(module,__unused_webpack_exports,__webpack_require__)=>{var dijkstra=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/dijkstra.js");module.exports=function dijkstraAll(g,weightFunc,edgeFunc){return g.nodes().reduce(function(acc,v){return acc[v]=dijkstra(g,v,weightFunc,edgeFunc),acc},{})}},"./node_modules/@dagrejs/graphlib/lib/alg/dijkstra.js":(module,__unused_webpack_exports,__webpack_require__)=>{var PriorityQueue=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/data/priority-queue.js");module.exports=function dijkstra(g,source,weightFn,edgeFn){return function runDijkstra(g,source,weightFn,edgeFn){var v,vEntry,results={},pq=new PriorityQueue,updateNeighbors=function(edge){var w=edge.v!==v?edge.v:edge.w,wEntry=results[w],weight=weightFn(edge),distance=vEntry.distance+weight;if(weight<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+edge+" Weight: "+weight);distance<wEntry.distance&&(wEntry.distance=distance,wEntry.predecessor=v,pq.decrease(w,distance))};g.nodes().forEach(function(v){var distance=v===source?0:Number.POSITIVE_INFINITY;results[v]={distance},pq.add(v,distance)});for(;pq.size()>0&&(v=pq.removeMin(),(vEntry=results[v]).distance!==Number.POSITIVE_INFINITY);)edgeFn(v).forEach(updateNeighbors);return results}(g,String(source),weightFn||DEFAULT_WEIGHT_FUNC,edgeFn||function(v){return g.outEdges(v)})};var DEFAULT_WEIGHT_FUNC=()=>1},"./node_modules/@dagrejs/graphlib/lib/alg/find-cycles.js":(module,__unused_webpack_exports,__webpack_require__)=>{var tarjan=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/tarjan.js");module.exports=function findCycles(g){return tarjan(g).filter(function(cmpt){return cmpt.length>1||1===cmpt.length&&g.hasEdge(cmpt[0],cmpt[0])})}},"./node_modules/@dagrejs/graphlib/lib/alg/floyd-warshall.js":module=>{module.exports=function floydWarshall(g,weightFn,edgeFn){return function runFloydWarshall(g,weightFn,edgeFn){var results={},nodes=g.nodes();return nodes.forEach(function(v){results[v]={},results[v][v]={distance:0},nodes.forEach(function(w){v!==w&&(results[v][w]={distance:Number.POSITIVE_INFINITY})}),edgeFn(v).forEach(function(edge){var w=edge.v===v?edge.w:edge.v,d=weightFn(edge);results[v][w]={distance:d,predecessor:v}})}),nodes.forEach(function(k){var rowK=results[k];nodes.forEach(function(i){var rowI=results[i];nodes.forEach(function(j){var ik=rowI[k],kj=rowK[j],ij=rowI[j],altDistance=ik.distance+kj.distance;altDistance<ij.distance&&(ij.distance=altDistance,ij.predecessor=kj.predecessor)})})}),results}(g,weightFn||DEFAULT_WEIGHT_FUNC,edgeFn||function(v){return g.outEdges(v)})};var DEFAULT_WEIGHT_FUNC=()=>1},"./node_modules/@dagrejs/graphlib/lib/alg/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports={components:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/components.js"),dijkstra:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/dijkstra.js"),dijkstraAll:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/dijkstra-all.js"),findCycles:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/find-cycles.js"),floydWarshall:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/floyd-warshall.js"),isAcyclic:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/is-acyclic.js"),postorder:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/postorder.js"),preorder:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/preorder.js"),prim:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/prim.js"),tarjan:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/tarjan.js"),topsort:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/topsort.js")}},"./node_modules/@dagrejs/graphlib/lib/alg/is-acyclic.js":(module,__unused_webpack_exports,__webpack_require__)=>{var topsort=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/topsort.js");module.exports=function isAcyclic(g){try{topsort(g)}catch(e){if(e instanceof topsort.CycleException)return!1;throw e}return!0}},"./node_modules/@dagrejs/graphlib/lib/alg/postorder.js":(module,__unused_webpack_exports,__webpack_require__)=>{var dfs=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/dfs.js");module.exports=function postorder(g,vs){return dfs(g,vs,"post")}},"./node_modules/@dagrejs/graphlib/lib/alg/preorder.js":(module,__unused_webpack_exports,__webpack_require__)=>{var dfs=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/alg/dfs.js");module.exports=function preorder(g,vs){return dfs(g,vs,"pre")}},"./node_modules/@dagrejs/graphlib/lib/alg/prim.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/graph.js"),PriorityQueue=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/data/priority-queue.js");module.exports=function prim(g,weightFunc){var v,result=new Graph,parents={},pq=new PriorityQueue;function updateNeighbors(edge){var w=edge.v===v?edge.w:edge.v,pri=pq.priority(w);if(void 0!==pri){var edgeWeight=weightFunc(edge);edgeWeight<pri&&(parents[w]=v,pq.decrease(w,edgeWeight))}}if(0===g.nodeCount())return result;g.nodes().forEach(function(v){pq.add(v,Number.POSITIVE_INFINITY),result.setNode(v)}),pq.decrease(g.nodes()[0],0);var init=!1;for(;pq.size()>0;){if(v=pq.removeMin(),Object.hasOwn(parents,v))result.setEdge(v,parents[v]);else{if(init)throw new Error("Input graph is not connected: "+g);init=!0}g.nodeEdges(v).forEach(updateNeighbors)}return result}},"./node_modules/@dagrejs/graphlib/lib/alg/tarjan.js":module=>{module.exports=function tarjan(g){var index=0,stack=[],visited={},results=[];function dfs(v){var entry=visited[v]={onStack:!0,lowlink:index,index:index++};if(stack.push(v),g.successors(v).forEach(function(w){Object.hasOwn(visited,w)?visited[w].onStack&&(entry.lowlink=Math.min(entry.lowlink,visited[w].index)):(dfs(w),entry.lowlink=Math.min(entry.lowlink,visited[w].lowlink))}),entry.lowlink===entry.index){var w,cmpt=[];do{w=stack.pop(),visited[w].onStack=!1,cmpt.push(w)}while(v!==w);results.push(cmpt)}}return g.nodes().forEach(function(v){Object.hasOwn(visited,v)||dfs(v)}),results}},"./node_modules/@dagrejs/graphlib/lib/alg/topsort.js":module=>{function topsort(g){var visited={},stack={},results=[];if(g.sinks().forEach(function visit(node){if(Object.hasOwn(stack,node))throw new CycleException;Object.hasOwn(visited,node)||(stack[node]=!0,visited[node]=!0,g.predecessors(node).forEach(visit),delete stack[node],results.push(node))}),Object.keys(visited).length!==g.nodeCount())throw new CycleException;return results}class CycleException extends Error{constructor(){super(...arguments)}}module.exports=topsort,topsort.CycleException=CycleException},"./node_modules/@dagrejs/graphlib/lib/data/priority-queue.js":module=>{module.exports=class PriorityQueue{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(x){return x.key})}has(key){return Object.hasOwn(this._keyIndices,key)}priority(key){var index=this._keyIndices[key];if(void 0!==index)return this._arr[index].priority}min(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key}add(key,priority){var keyIndices=this._keyIndices;if(key=String(key),!Object.hasOwn(keyIndices,key)){var arr=this._arr,index=arr.length;return keyIndices[key]=index,arr.push({key,priority}),this._decrease(index),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var min=this._arr.pop();return delete this._keyIndices[min.key],this._heapify(0),min.key}decrease(key,priority){var index=this._keyIndices[key];if(priority>this._arr[index].priority)throw new Error("New priority is greater than current priority. Key: "+key+" Old: "+this._arr[index].priority+" New: "+priority);this._arr[index].priority=priority,this._decrease(index)}_heapify(i){var arr=this._arr,l=2*i,r=l+1,largest=i;l<arr.length&&(largest=arr[l].priority<arr[largest].priority?l:largest,r<arr.length&&(largest=arr[r].priority<arr[largest].priority?r:largest),largest!==i&&(this._swap(i,largest),this._heapify(largest)))}_decrease(index){for(var parent,arr=this._arr,priority=arr[index].priority;0!==index&&!(arr[parent=index>>1].priority<priority);)this._swap(index,parent),index=parent}_swap(i,j){var arr=this._arr,keyIndices=this._keyIndices,origArrI=arr[i],origArrJ=arr[j];arr[i]=origArrJ,arr[j]=origArrI,keyIndices[origArrJ.key]=i,keyIndices[origArrI.key]=j}}},"./node_modules/@dagrejs/graphlib/lib/graph.js":module=>{"use strict";function incrementOrInitEntry(map,k){map[k]?map[k]++:map[k]=1}function decrementOrRemoveEntry(map,k){--map[k]||delete map[k]}function edgeArgsToId(isDirected,v_,w_,name){var v=""+v_,w=""+w_;if(!isDirected&&v>w){var tmp=v;v=w,w=tmp}return v+""+w+""+(void 0===name?"\0":name)}function edgeObjToId(isDirected,edgeObj){return edgeArgsToId(isDirected,edgeObj.v,edgeObj.w,edgeObj.name)}module.exports=class Graph{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(opts){opts&&(this._isDirected=!Object.hasOwn(opts,"directed")||opts.directed,this._isMultigraph=!!Object.hasOwn(opts,"multigraph")&&opts.multigraph,this._isCompound=!!Object.hasOwn(opts,"compound")&&opts.compound),this._isCompound&&(this._parent={},this._children={},this._children["\0"]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(label){return this._label=label,this}graph(){return this._label}setDefaultNodeLabel(newDefault){return this._defaultNodeLabelFn=newDefault,"function"!=typeof newDefault&&(this._defaultNodeLabelFn=()=>newDefault),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var self=this;return this.nodes().filter(v=>0===Object.keys(self._in[v]).length)}sinks(){var self=this;return this.nodes().filter(v=>0===Object.keys(self._out[v]).length)}setNodes(vs,value){var args=arguments,self=this;return vs.forEach(function(v){args.length>1?self.setNode(v,value):self.setNode(v)}),this}setNode(v,value){return Object.hasOwn(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=value),this):(this._nodes[v]=arguments.length>1?value:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)}node(v){return this._nodes[v]}hasNode(v){return Object.hasOwn(this._nodes,v)}removeNode(v){var self=this;if(Object.hasOwn(this._nodes,v)){var removeEdge=e=>self.removeEdge(self._edgeObjs[e]);delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],this.children(v).forEach(function(child){self.setParent(child)}),delete this._children[v]),Object.keys(this._in[v]).forEach(removeEdge),delete this._in[v],delete this._preds[v],Object.keys(this._out[v]).forEach(removeEdge),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this}setParent(v,parent){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(void 0===parent)parent="\0";else{for(var ancestor=parent+="";void 0!==ancestor;ancestor=this.parent(ancestor))if(ancestor===v)throw new Error("Setting "+parent+" as parent of "+v+" would create a cycle");this.setNode(parent)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=parent,this._children[parent][v]=!0,this}_removeFromParentsChildList(v){delete this._children[this._parent[v]][v]}parent(v){if(this._isCompound){var parent=this._parent[v];if("\0"!==parent)return parent}}children(v="\0"){if(this._isCompound){var children=this._children[v];if(children)return Object.keys(children)}else{if("\0"===v)return this.nodes();if(this.hasNode(v))return[]}}predecessors(v){var predsV=this._preds[v];if(predsV)return Object.keys(predsV)}successors(v){var sucsV=this._sucs[v];if(sucsV)return Object.keys(sucsV)}neighbors(v){var preds=this.predecessors(v);if(preds){const union=new Set(preds);for(var succ of this.successors(v))union.add(succ);return Array.from(union.values())}}isLeaf(v){return 0===(this.isDirected()?this.successors(v):this.neighbors(v)).length}filterNodes(filter){var copy=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});copy.setGraph(this.graph());var self=this;Object.entries(this._nodes).forEach(function([v,value]){filter(v)&&copy.setNode(v,value)}),Object.values(this._edgeObjs).forEach(function(e){copy.hasNode(e.v)&&copy.hasNode(e.w)&&copy.setEdge(e,self.edge(e))});var parents={};function findParent(v){var parent=self.parent(v);return void 0===parent||copy.hasNode(parent)?(parents[v]=parent,parent):parent in parents?parents[parent]:findParent(parent)}return this._isCompound&&copy.nodes().forEach(v=>copy.setParent(v,findParent(v))),copy}setDefaultEdgeLabel(newDefault){return this._defaultEdgeLabelFn=newDefault,"function"!=typeof newDefault&&(this._defaultEdgeLabelFn=()=>newDefault),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(vs,value){var self=this,args=arguments;return vs.reduce(function(v,w){return args.length>1?self.setEdge(v,w,value):self.setEdge(v,w),w}),this}setEdge(){var v,w,name,value,valueSpecified=!1,arg0=arguments[0];"object"==typeof arg0&&null!==arg0&&"v"in arg0?(v=arg0.v,w=arg0.w,name=arg0.name,2===arguments.length&&(value=arguments[1],valueSpecified=!0)):(v=arg0,w=arguments[1],name=arguments[3],arguments.length>2&&(value=arguments[2],valueSpecified=!0)),v=""+v,w=""+w,void 0!==name&&(name=""+name);var e=edgeArgsToId(this._isDirected,v,w,name);if(Object.hasOwn(this._edgeLabels,e))return valueSpecified&&(this._edgeLabels[e]=value),this;if(void 0!==name&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(w),this._edgeLabels[e]=valueSpecified?value:this._defaultEdgeLabelFn(v,w,name);var edgeObj=function edgeArgsToObj(isDirected,v_,w_,name){var v=""+v_,w=""+w_;if(!isDirected&&v>w){var tmp=v;v=w,w=tmp}var edgeObj={v,w};name&&(edgeObj.name=name);return edgeObj}(this._isDirected,v,w,name);return v=edgeObj.v,w=edgeObj.w,Object.freeze(edgeObj),this._edgeObjs[e]=edgeObj,incrementOrInitEntry(this._preds[w],v),incrementOrInitEntry(this._sucs[v],w),this._in[w][e]=edgeObj,this._out[v][e]=edgeObj,this._edgeCount++,this}edge(v,w,name){var e=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,name);return this._edgeLabels[e]}edgeAsObj(){const edge=this.edge(...arguments);return"object"!=typeof edge?{label:edge}:edge}hasEdge(v,w,name){var e=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,name);return Object.hasOwn(this._edgeLabels,e)}removeEdge(v,w,name){var e=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,name),edge=this._edgeObjs[e];return edge&&(v=edge.v,w=edge.w,delete this._edgeLabels[e],delete this._edgeObjs[e],decrementOrRemoveEntry(this._preds[w],v),decrementOrRemoveEntry(this._sucs[v],w),delete this._in[w][e],delete this._out[v][e],this._edgeCount--),this}inEdges(v,u){var inV=this._in[v];if(inV){var edges=Object.values(inV);return u?edges.filter(edge=>edge.v===u):edges}}outEdges(v,w){var outV=this._out[v];if(outV){var edges=Object.values(outV);return w?edges.filter(edge=>edge.w===w):edges}}nodeEdges(v,w){var inEdges=this.inEdges(v,w);if(inEdges)return inEdges.concat(this.outEdges(v,w))}}},"./node_modules/@dagrejs/graphlib/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports={Graph:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/graph.js"),version:__webpack_require__("./node_modules/@dagrejs/graphlib/lib/version.js")}},"./node_modules/@dagrejs/graphlib/lib/json.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Graph=__webpack_require__("./node_modules/@dagrejs/graphlib/lib/graph.js");function writeNodes(g){return g.nodes().map(function(v){var nodeValue=g.node(v),parent=g.parent(v),node={v};return void 0!==nodeValue&&(node.value=nodeValue),void 0!==parent&&(node.parent=parent),node})}function writeEdges(g){return g.edges().map(function(e){var edgeValue=g.edge(e),edge={v:e.v,w:e.w};return void 0!==e.name&&(edge.name=e.name),void 0!==edgeValue&&(edge.value=edgeValue),edge})}module.exports={write:function write(g){var json={options:{directed:g.isDirected(),multigraph:g.isMultigraph(),compound:g.isCompound()},nodes:writeNodes(g),edges:writeEdges(g)};void 0!==g.graph()&&(json.value=structuredClone(g.graph()));return json},read:function read(json){var g=new Graph(json.options).setGraph(json.value);return json.nodes.forEach(function(entry){g.setNode(entry.v,entry.value),entry.parent&&g.setParent(entry.v,entry.parent)}),json.edges.forEach(function(entry){g.setEdge({v:entry.v,w:entry.w,name:entry.name},entry.value)}),g}}},"./node_modules/@dagrejs/graphlib/lib/version.js":module=>{module.exports="2.2.4"},"./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/@xyflow/react/dist/style.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/sourceMaps.js"),_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"/* this gets exported as style.css and can be used for the default theming */\n/* these are the necessary styles for React/Svelte Flow, they get used by base.css and style.css */\n.react-flow {\n  direction: ltr;\n\n  --xy-edge-stroke-default: #b1b1b7;\n  --xy-edge-stroke-width-default: 1;\n  --xy-edge-stroke-selected-default: #555;\n\n  --xy-connectionline-stroke-default: #b1b1b7;\n  --xy-connectionline-stroke-width-default: 1;\n\n  --xy-attribution-background-color-default: rgba(255, 255, 255, 0.5);\n\n  --xy-minimap-background-color-default: #fff;\n  --xy-minimap-mask-background-color-default: rgba(240, 240, 240, 0.6);\n  --xy-minimap-mask-stroke-color-default: transparent;\n  --xy-minimap-mask-stroke-width-default: 1;\n  --xy-minimap-node-background-color-default: #e2e2e2;\n  --xy-minimap-node-stroke-color-default: transparent;\n  --xy-minimap-node-stroke-width-default: 2;\n\n  --xy-background-color-default: transparent;\n  --xy-background-pattern-dots-color-default: #91919a;\n  --xy-background-pattern-lines-color-default: #eee;\n  --xy-background-pattern-cross-color-default: #e2e2e2;\n  background-color: var(--xy-background-color, var(--xy-background-color-default));\n  --xy-node-color-default: inherit;\n  --xy-node-border-default: 1px solid #1a192b;\n  --xy-node-background-color-default: #fff;\n  --xy-node-group-background-color-default: rgba(240, 240, 240, 0.25);\n  --xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, 0.08);\n  --xy-node-boxshadow-selected-default: 0 0 0 0.5px #1a192b;\n  --xy-node-border-radius-default: 3px;\n\n  --xy-handle-background-color-default: #1a192b;\n  --xy-handle-border-color-default: #fff;\n\n  --xy-selection-background-color-default: rgba(0, 89, 220, 0.08);\n  --xy-selection-border-default: 1px dotted rgba(0, 89, 220, 0.8);\n\n  --xy-controls-button-background-color-default: #fefefe;\n  --xy-controls-button-background-color-hover-default: #f4f4f4;\n  --xy-controls-button-color-default: inherit;\n  --xy-controls-button-color-hover-default: inherit;\n  --xy-controls-button-border-color-default: #eee;\n  --xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, 0.08);\n\n  --xy-edge-label-background-color-default: #ffffff;\n  --xy-edge-label-color-default: inherit;\n  --xy-resize-background-color-default: #3367d9;\n}\n.react-flow.dark {\n  --xy-edge-stroke-default: #3e3e3e;\n  --xy-edge-stroke-width-default: 1;\n  --xy-edge-stroke-selected-default: #727272;\n\n  --xy-connectionline-stroke-default: #b1b1b7;\n  --xy-connectionline-stroke-width-default: 1;\n\n  --xy-attribution-background-color-default: rgba(150, 150, 150, 0.25);\n\n  --xy-minimap-background-color-default: #141414;\n  --xy-minimap-mask-background-color-default: rgba(60, 60, 60, 0.6);\n  --xy-minimap-mask-stroke-color-default: transparent;\n  --xy-minimap-mask-stroke-width-default: 1;\n  --xy-minimap-node-background-color-default: #2b2b2b;\n  --xy-minimap-node-stroke-color-default: transparent;\n  --xy-minimap-node-stroke-width-default: 2;\n\n  --xy-background-color-default: #141414;\n  --xy-background-pattern-dots-color-default: #777;\n  --xy-background-pattern-lines-color-default: #777;\n  --xy-background-pattern-cross-color-default: #777;\n  --xy-node-color-default: #f8f8f8;\n  --xy-node-border-default: 1px solid #3c3c3c;\n  --xy-node-background-color-default: #1e1e1e;\n  --xy-node-group-background-color-default: rgba(240, 240, 240, 0.25);\n  --xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, 0.08);\n  --xy-node-boxshadow-selected-default: 0 0 0 0.5px #999;\n\n  --xy-handle-background-color-default: #bebebe;\n  --xy-handle-border-color-default: #1e1e1e;\n\n  --xy-selection-background-color-default: rgba(200, 200, 220, 0.08);\n  --xy-selection-border-default: 1px dotted rgba(200, 200, 220, 0.8);\n\n  --xy-controls-button-background-color-default: #2b2b2b;\n  --xy-controls-button-background-color-hover-default: #3e3e3e;\n  --xy-controls-button-color-default: #f8f8f8;\n  --xy-controls-button-color-hover-default: #fff;\n  --xy-controls-button-border-color-default: #5b5b5b;\n  --xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, 0.08);\n\n  --xy-edge-label-background-color-default: #141414;\n  --xy-edge-label-color-default: #f8f8f8;\n}\n.react-flow__background {\n  background-color: var(--xy-background-color-props, var(--xy-background-color, var(--xy-background-color-default)));\n  pointer-events: none;\n  z-index: -1;\n}\n.react-flow__container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.react-flow__pane {\n  z-index: 1;\n}\n.react-flow__pane.draggable {\n    cursor: grab;\n  }\n.react-flow__pane.dragging {\n    cursor: grabbing;\n  }\n.react-flow__pane.selection {\n    cursor: pointer;\n  }\n.react-flow__viewport {\n  transform-origin: 0 0;\n  z-index: 2;\n  pointer-events: none;\n}\n.react-flow__renderer {\n  z-index: 4;\n}\n.react-flow__selection {\n  z-index: 6;\n}\n.react-flow__nodesselection-rect:focus,\n.react-flow__nodesselection-rect:focus-visible {\n  outline: none;\n}\n.react-flow__edge-path {\n  stroke: var(--xy-edge-stroke, var(--xy-edge-stroke-default));\n  stroke-width: var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));\n  fill: none;\n}\n.react-flow__connection-path {\n  stroke: var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));\n  stroke-width: var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));\n  fill: none;\n}\n.react-flow .react-flow__edges {\n  position: absolute;\n}\n.react-flow .react-flow__edges svg {\n    overflow: visible;\n    position: absolute;\n    pointer-events: none;\n  }\n.react-flow__edge {\n  pointer-events: visibleStroke;\n}\n.react-flow__edge.selectable {\n    cursor: pointer;\n  }\n.react-flow__edge.animated path {\n    stroke-dasharray: 5;\n    animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__edge.animated path.react-flow__edge-interaction {\n    stroke-dasharray: none;\n    animation: none;\n  }\n.react-flow__edge.inactive {\n    pointer-events: none;\n  }\n.react-flow__edge.selected,\n  .react-flow__edge:focus,\n  .react-flow__edge:focus-visible {\n    outline: none;\n  }\n.react-flow__edge.selected .react-flow__edge-path,\n  .react-flow__edge.selectable:focus .react-flow__edge-path,\n  .react-flow__edge.selectable:focus-visible .react-flow__edge-path {\n    stroke: var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default));\n  }\n.react-flow__edge-textwrapper {\n    pointer-events: all;\n  }\n.react-flow__edge .react-flow__edge-text {\n    pointer-events: none;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n  }\n.react-flow__connection {\n  pointer-events: none;\n}\n.react-flow__connection .animated {\n    stroke-dasharray: 5;\n    animation: dashdraw 0.5s linear infinite;\n  }\nsvg.react-flow__connectionline {\n  z-index: 1001;\n  overflow: visible;\n  position: absolute;\n}\n.react-flow__nodes {\n  pointer-events: none;\n  transform-origin: 0 0;\n}\n.react-flow__node {\n  position: absolute;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  pointer-events: all;\n  transform-origin: 0 0;\n  box-sizing: border-box;\n  cursor: default;\n}\n.react-flow__node.selectable {\n    cursor: pointer;\n  }\n.react-flow__node.draggable {\n    cursor: grab;\n    pointer-events: all;\n  }\n.react-flow__node.draggable.dragging {\n      cursor: grabbing;\n    }\n.react-flow__nodesselection {\n  z-index: 3;\n  transform-origin: left top;\n  pointer-events: none;\n}\n.react-flow__nodesselection-rect {\n    position: absolute;\n    pointer-events: all;\n    cursor: grab;\n  }\n.react-flow__handle {\n  position: absolute;\n  pointer-events: none;\n  min-width: 5px;\n  min-height: 5px;\n  width: 6px;\n  height: 6px;\n  background-color: var(--xy-handle-background-color, var(--xy-handle-background-color-default));\n  border: 1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));\n  border-radius: 100%;\n}\n.react-flow__handle.connectingfrom {\n    pointer-events: all;\n  }\n.react-flow__handle.connectionindicator {\n    pointer-events: all;\n    cursor: crosshair;\n  }\n.react-flow__handle-bottom {\n    top: auto;\n    left: 50%;\n    bottom: 0;\n    transform: translate(-50%, 50%);\n  }\n.react-flow__handle-top {\n    top: 0;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n.react-flow__handle-left {\n    top: 50%;\n    left: 0;\n    transform: translate(-50%, -50%);\n  }\n.react-flow__handle-right {\n    top: 50%;\n    right: 0;\n    transform: translate(50%, -50%);\n  }\n.react-flow__edgeupdater {\n  cursor: move;\n  pointer-events: all;\n}\n.react-flow__pane.selection .react-flow__panel {\n  pointer-events: none;\n}\n.react-flow__panel {\n  position: absolute;\n  z-index: 5;\n  margin: 15px;\n}\n.react-flow__panel.top {\n    top: 0;\n  }\n.react-flow__panel.bottom {\n    bottom: 0;\n  }\n.react-flow__panel.top.center, .react-flow__panel.bottom.center {\n      left: 50%;\n      transform: translateX(-15px) translateX(-50%);\n    }\n.react-flow__panel.left {\n    left: 0;\n  }\n.react-flow__panel.right {\n    right: 0;\n  }\n.react-flow__panel.left.center, .react-flow__panel.right.center {\n      top: 50%;\n      transform: translateY(-15px) translateY(-50%);\n    }\n.react-flow__attribution {\n  font-size: 10px;\n  background: var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));\n  padding: 2px 3px;\n  margin: 0;\n}\n.react-flow__attribution a {\n    text-decoration: none;\n    color: #999;\n  }\n@keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n.react-flow__edgelabel-renderer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  left: 0;\n  top: 0;\n}\n.react-flow__viewport-portal {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n}\n.react-flow__minimap {\n  background: var(\n    --xy-minimap-background-color-props,\n    var(--xy-minimap-background-color, var(--xy-minimap-background-color-default))\n  );\n}\n.react-flow__minimap-svg {\n    display: block;\n  }\n.react-flow__minimap-mask {\n    fill: var(\n      --xy-minimap-mask-background-color-props,\n      var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default))\n    );\n    stroke: var(\n      --xy-minimap-mask-stroke-color-props,\n      var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default))\n    );\n    stroke-width: var(\n      --xy-minimap-mask-stroke-width-props,\n      var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default))\n    );\n  }\n.react-flow__minimap-node {\n    fill: var(\n      --xy-minimap-node-background-color-props,\n      var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default))\n    );\n    stroke: var(\n      --xy-minimap-node-stroke-color-props,\n      var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default))\n    );\n    stroke-width: var(\n      --xy-minimap-node-stroke-width-props,\n      var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default))\n    );\n  }\n.react-flow__background-pattern.dots {\n    fill: var(\n      --xy-background-pattern-color-props,\n      var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default))\n    );\n  }\n.react-flow__background-pattern.lines {\n    stroke: var(\n      --xy-background-pattern-color-props,\n      var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default))\n    );\n  }\n.react-flow__background-pattern.cross {\n    stroke: var(\n      --xy-background-pattern-color-props,\n      var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default))\n    );\n  }\n.react-flow__controls {\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default));\n}\n.react-flow__controls.horizontal {\n    flex-direction: row;\n  }\n.react-flow__controls-button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 26px;\n    width: 26px;\n    padding: 4px;\n    border: none;\n    background: var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));\n    border-bottom: 1px solid\n      var(\n        --xy-controls-button-border-color-props,\n        var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default))\n      );\n    color: var(\n      --xy-controls-button-color-props,\n      var(--xy-controls-button-color, var(--xy-controls-button-color-default))\n    );\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n  }\n.react-flow__controls-button svg {\n      width: 100%;\n      max-width: 12px;\n      max-height: 12px;\n      fill: currentColor;\n    }\n.react-flow__edge.updating .react-flow__edge-path {\n      stroke: #777;\n    }\n.react-flow__edge-text {\n    font-size: 10px;\n  }\n.react-flow__node.selectable:focus,\n  .react-flow__node.selectable:focus-visible {\n    outline: none;\n  }\n.react-flow__node-input,\n.react-flow__node-default,\n.react-flow__node-output,\n.react-flow__node-group {\n  padding: 10px;\n  border-radius: var(--xy-node-border-radius, var(--xy-node-border-radius-default));\n  width: 150px;\n  font-size: 12px;\n  color: var(--xy-node-color, var(--xy-node-color-default));\n  text-align: center;\n  border: var(--xy-node-border, var(--xy-node-border-default));\n  background-color: var(--xy-node-background-color, var(--xy-node-background-color-default));\n}\n.react-flow__node-input.selectable:hover, .react-flow__node-default.selectable:hover, .react-flow__node-output.selectable:hover, .react-flow__node-group.selectable:hover {\n      box-shadow: var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default));\n    }\n.react-flow__node-input.selectable.selected,\n    .react-flow__node-input.selectable:focus,\n    .react-flow__node-input.selectable:focus-visible,\n    .react-flow__node-default.selectable.selected,\n    .react-flow__node-default.selectable:focus,\n    .react-flow__node-default.selectable:focus-visible,\n    .react-flow__node-output.selectable.selected,\n    .react-flow__node-output.selectable:focus,\n    .react-flow__node-output.selectable:focus-visible,\n    .react-flow__node-group.selectable.selected,\n    .react-flow__node-group.selectable:focus,\n    .react-flow__node-group.selectable:focus-visible {\n      box-shadow: var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default));\n    }\n.react-flow__node-group {\n  background-color: var(--xy-node-group-background-color, var(--xy-node-group-background-color-default));\n}\n.react-flow__nodesselection-rect,\n.react-flow__selection {\n  background: var(--xy-selection-background-color, var(--xy-selection-background-color-default));\n  border: var(--xy-selection-border, var(--xy-selection-border-default));\n}\n.react-flow__nodesselection-rect:focus,\n  .react-flow__nodesselection-rect:focus-visible,\n  .react-flow__selection:focus,\n  .react-flow__selection:focus-visible {\n    outline: none;\n  }\n.react-flow__controls-button:hover {\n      background: var(\n        --xy-controls-button-background-color-hover-props,\n        var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default))\n      );\n      color: var(\n        --xy-controls-button-color-hover-props,\n        var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default))\n      );\n    }\n.react-flow__controls-button:disabled {\n      pointer-events: none;\n    }\n.react-flow__controls-button:disabled svg {\n        fill-opacity: 0.4;\n      }\n.react-flow__controls-button:last-child {\n    border-bottom: none;\n  }\n.react-flow__controls.horizontal .react-flow__controls-button {\n    border-bottom: none;\n    border-right: 1px solid\n      var(\n        --xy-controls-button-border-color-props,\n        var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default))\n      );\n  }\n.react-flow__controls.horizontal .react-flow__controls-button:last-child {\n    border-right: none;\n  }\n.react-flow__resize-control {\n  position: absolute;\n}\n.react-flow__resize-control.left,\n.react-flow__resize-control.right {\n  cursor: ew-resize;\n}\n.react-flow__resize-control.top,\n.react-flow__resize-control.bottom {\n  cursor: ns-resize;\n}\n.react-flow__resize-control.top.left,\n.react-flow__resize-control.bottom.right {\n  cursor: nwse-resize;\n}\n.react-flow__resize-control.bottom.left,\n.react-flow__resize-control.top.right {\n  cursor: nesw-resize;\n}\n/* handle styles */\n.react-flow__resize-control.handle {\n  width: 5px;\n  height: 5px;\n  border: 1px solid #fff;\n  border-radius: 1px;\n  background-color: var(--xy-resize-background-color, var(--xy-resize-background-color-default));\n  translate: -50% -50%;\n}\n.react-flow__resize-control.handle.left {\n  left: 0;\n  top: 50%;\n}\n.react-flow__resize-control.handle.right {\n  left: 100%;\n  top: 50%;\n}\n.react-flow__resize-control.handle.top {\n  left: 50%;\n  top: 0;\n}\n.react-flow__resize-control.handle.bottom {\n  left: 50%;\n  top: 100%;\n}\n.react-flow__resize-control.handle.top.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.bottom.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.top.right {\n  left: 100%;\n}\n.react-flow__resize-control.handle.bottom.right {\n  left: 100%;\n}\n/* line styles */\n.react-flow__resize-control.line {\n  border-color: var(--xy-resize-background-color, var(--xy-resize-background-color-default));\n  border-width: 0;\n  border-style: solid;\n}\n.react-flow__resize-control.line.left,\n.react-flow__resize-control.line.right {\n  width: 1px;\n  transform: translate(-50%, 0);\n  top: 0;\n  height: 100%;\n}\n.react-flow__resize-control.line.left {\n  left: 0;\n  border-left-width: 1px;\n}\n.react-flow__resize-control.line.right {\n  left: 100%;\n  border-right-width: 1px;\n}\n.react-flow__resize-control.line.top,\n.react-flow__resize-control.line.bottom {\n  height: 1px;\n  transform: translate(0, -50%);\n  left: 0;\n  width: 100%;\n}\n.react-flow__resize-control.line.top {\n  top: 0;\n  border-top-width: 1px;\n}\n.react-flow__resize-control.line.bottom {\n  border-bottom-width: 1px;\n  top: 100%;\n}\n.react-flow__edge-textbg {\n  fill: var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default));\n}\n.react-flow__edge-text {\n  fill: var(--xy-edge-label-color, var(--xy-edge-label-color-default));\n}\n","",{version:3,sources:["webpack://./node_modules/@xyflow/react/dist/style.css"],names:[],mappings:"AAAA,4EAA4E;AAC5E,kGAAkG;AAClG;EACE,cAAc;;EAEd,iCAAiC;EACjC,iCAAiC;EACjC,uCAAuC;;EAEvC,2CAA2C;EAC3C,2CAA2C;;EAE3C,mEAAmE;;EAEnE,2CAA2C;EAC3C,oEAAoE;EACpE,mDAAmD;EACnD,yCAAyC;EACzC,mDAAmD;EACnD,mDAAmD;EACnD,yCAAyC;;EAEzC,0CAA0C;EAC1C,mDAAmD;EACnD,iDAAiD;EACjD,oDAAoD;EACpD,gFAAgF;EAChF,gCAAgC;EAChC,2CAA2C;EAC3C,wCAAwC;EACxC,mEAAmE;EACnE,oEAAoE;EACpE,yDAAyD;EACzD,oCAAoC;;EAEpC,6CAA6C;EAC7C,sCAAsC;;EAEtC,+DAA+D;EAC/D,+DAA+D;;EAE/D,sDAAsD;EACtD,4DAA4D;EAC5D,2CAA2C;EAC3C,iDAAiD;EACjD,+CAA+C;EAC/C,iEAAiE;;EAEjE,iDAAiD;EACjD,sCAAsC;EACtC,6CAA6C;AAC/C;AACA;EACE,iCAAiC;EACjC,iCAAiC;EACjC,0CAA0C;;EAE1C,2CAA2C;EAC3C,2CAA2C;;EAE3C,oEAAoE;;EAEpE,8CAA8C;EAC9C,iEAAiE;EACjE,mDAAmD;EACnD,yCAAyC;EACzC,mDAAmD;EACnD,mDAAmD;EACnD,yCAAyC;;EAEzC,sCAAsC;EACtC,gDAAgD;EAChD,iDAAiD;EACjD,iDAAiD;EACjD,gCAAgC;EAChC,2CAA2C;EAC3C,2CAA2C;EAC3C,mEAAmE;EACnE,0EAA0E;EAC1E,sDAAsD;;EAEtD,6CAA6C;EAC7C,yCAAyC;;EAEzC,kEAAkE;EAClE,kEAAkE;;EAElE,sDAAsD;EACtD,4DAA4D;EAC5D,2CAA2C;EAC3C,8CAA8C;EAC9C,kDAAkD;EAClD,iEAAiE;;EAEjE,iDAAiD;EACjD,sCAAsC;AACxC;AACA;EACE,kHAAkH;EAClH,oBAAoB;EACpB,WAAW;AACb;AACA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,MAAM;EACN,OAAO;AACT;AACA;EACE,UAAU;AACZ;AACA;IACI,YAAY;EACd;AACF;IACI,gBAAgB;EAClB;AACF;IACI,eAAe;EACjB;AACF;EACE,qBAAqB;EACrB,UAAU;EACV,oBAAoB;AACtB;AACA;EACE,UAAU;AACZ;AACA;EACE,UAAU;AACZ;AACA;;EAEE,aAAa;AACf;AACA;EACE,4DAA4D;EAC5D,8EAA8E;EAC9E,UAAU;AACZ;AACA;EACE,gFAAgF;EAChF,kGAAkG;EAClG,UAAU;AACZ;AACA;EACE,kBAAkB;AACpB;AACA;IACI,iBAAiB;IACjB,kBAAkB;IAClB,oBAAoB;EACtB;AACF;EACE,6BAA6B;AAC/B;AACA;IACI,eAAe;EACjB;AACF;IACI,mBAAmB;IACnB,wCAAwC;EAC1C;AACF;IACI,sBAAsB;IACtB,eAAe;EACjB;AACF;IACI,oBAAoB;EACtB;AACF;;;IAGI,aAAa;EACf;AACF;;;IAGI,8EAA8E;EAChF;AACF;IACI,mBAAmB;EACrB;AACF;IACI,oBAAoB;IACpB,yBAAyB;OACtB,sBAAsB;YACjB,iBAAiB;EAC3B;AACF;EACE,oBAAoB;AACtB;AACA;IACI,mBAAmB;IACnB,wCAAwC;EAC1C;AACF;EACE,aAAa;EACb,iBAAiB;EACjB,kBAAkB;AACpB;AACA;EACE,oBAAoB;EACpB,qBAAqB;AACvB;AACA;EACE,kBAAkB;EAClB,yBAAyB;KACtB,sBAAsB;UACjB,iBAAiB;EACzB,mBAAmB;EACnB,qBAAqB;EACrB,sBAAsB;EACtB,eAAe;AACjB;AACA;IACI,eAAe;EACjB;AACF;IACI,YAAY;IACZ,mBAAmB;EACrB;AACF;MACM,gBAAgB;IAClB;AACJ;EACE,UAAU;EACV,0BAA0B;EAC1B,oBAAoB;AACtB;AACA;IACI,kBAAkB;IAClB,mBAAmB;IACnB,YAAY;EACd;AACF;EACE,kBAAkB;EAClB,oBAAoB;EACpB,cAAc;EACd,eAAe;EACf,UAAU;EACV,WAAW;EACX,8FAA8F;EAC9F,sFAAsF;EACtF,mBAAmB;AACrB;AACA;IACI,mBAAmB;EACrB;AACF;IACI,mBAAmB;IACnB,iBAAiB;EACnB;AACF;IACI,SAAS;IACT,SAAS;IACT,SAAS;IACT,+BAA+B;EACjC;AACF;IACI,MAAM;IACN,SAAS;IACT,gCAAgC;EAClC;AACF;IACI,QAAQ;IACR,OAAO;IACP,gCAAgC;EAClC;AACF;IACI,QAAQ;IACR,QAAQ;IACR,+BAA+B;EACjC;AACF;EACE,YAAY;EACZ,mBAAmB;AACrB;AACA;EACE,oBAAoB;AACtB;AACA;EACE,kBAAkB;EAClB,UAAU;EACV,YAAY;AACd;AACA;IACI,MAAM;EACR;AACF;IACI,SAAS;EACX;AACF;MACM,SAAS;MACT,6CAA6C;IAC/C;AACJ;IACI,OAAO;EACT;AACF;IACI,QAAQ;EACV;AACF;MACM,QAAQ;MACR,6CAA6C;IAC/C;AACJ;EACE,eAAe;EACf,kGAAkG;EAClG,gBAAgB;EAChB,SAAS;AACX;AACA;IACI,qBAAqB;IACrB,WAAW;EACb;AACF;EACE;IACE,qBAAqB;EACvB;AACF;AACA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,oBAAoB;EACpB,yBAAyB;KACtB,sBAAsB;UACjB,iBAAiB;EACzB,OAAO;EACP,MAAM;AACR;AACA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,OAAO;EACP,MAAM;EACN,yBAAyB;KACtB,sBAAsB;UACjB,iBAAiB;AAC3B;AACA;EACE;;;GAGC;AACH;AACA;IACI,cAAc;EAChB;AACF;IACI;;;KAGC;IACD;;;KAGC;IACD;;;KAGC;EACH;AACF;IACI;;;KAGC;IACD;;;KAGC;IACD;;;KAGC;EACH;AACF;IACI;;;KAGC;EACH;AACF;IACI;;;KAGC;EACH;AACF;IACI;;;KAGC;EACH;AACF;EACE,aAAa;EACb,sBAAsB;EACtB,gFAAgF;AAClF;AACA;IACI,mBAAmB;EACrB;AACF;IACI,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,YAAY;IACZ,0GAA0G;IAC1G;;;;OAIG;IACH;;;KAGC;IACD,eAAe;IACf,yBAAyB;OACtB,sBAAsB;YACjB,iBAAiB;EAC3B;AACF;MACM,WAAW;MACX,eAAe;MACf,gBAAgB;MAChB,kBAAkB;IACpB;AACJ;MACM,YAAY;IACd;AACJ;IACI,eAAe;EACjB;AACF;;IAEI,aAAa;EACf;AACF;;;;EAIE,aAAa;EACb,iFAAiF;EACjF,YAAY;EACZ,eAAe;EACf,yDAAyD;EACzD,kBAAkB;EAClB,4DAA4D;EAC5D,0FAA0F;AAC5F;AACA;MACM,kFAAkF;IACpF;AACJ;;;;;;;;;;;;MAYM,wFAAwF;IAC1F;AACJ;EACE,sGAAsG;AACxG;AACA;;EAEE,8FAA8F;EAC9F,sEAAsE;AACxE;AACA;;;;IAII,aAAa;EACf;AACF;MACM;;;OAGC;MACD;;;OAGC;IACH;AACJ;MACM,oBAAoB;IACtB;AACJ;QACQ,iBAAiB;MACnB;AACN;IACI,mBAAmB;EACrB;AACF;IACI,mBAAmB;IACnB;;;;OAIG;EACL;AACF;IACI,kBAAkB;EACpB;AACF;EACE,kBAAkB;AACpB;AACA;;EAEE,iBAAiB;AACnB;AACA;;EAEE,iBAAiB;AACnB;AACA;;EAEE,mBAAmB;AACrB;AACA;;EAEE,mBAAmB;AACrB;AACA,kBAAkB;AAClB;EACE,UAAU;EACV,WAAW;EACX,sBAAsB;EACtB,kBAAkB;EAClB,8FAA8F;EAC9F,oBAAoB;AACtB;AACA;EACE,OAAO;EACP,QAAQ;AACV;AACA;EACE,UAAU;EACV,QAAQ;AACV;AACA;EACE,SAAS;EACT,MAAM;AACR;AACA;EACE,SAAS;EACT,SAAS;AACX;AACA;EACE,OAAO;AACT;AACA;EACE,OAAO;AACT;AACA;EACE,UAAU;AACZ;AACA;EACE,UAAU;AACZ;AACA,gBAAgB;AAChB;EACE,0FAA0F;EAC1F,eAAe;EACf,mBAAmB;AACrB;AACA;;EAEE,UAAU;EACV,6BAA6B;EAC7B,MAAM;EACN,YAAY;AACd;AACA;EACE,OAAO;EACP,sBAAsB;AACxB;AACA;EACE,UAAU;EACV,uBAAuB;AACzB;AACA;;EAEE,WAAW;EACX,6BAA6B;EAC7B,OAAO;EACP,WAAW;AACb;AACA;EACE,MAAM;EACN,qBAAqB;AACvB;AACA;EACE,wBAAwB;EACxB,SAAS;AACX;AACA;EACE,0FAA0F;AAC5F;AACA;EACE,oEAAoE;AACtE",sourcesContent:["/* this gets exported as style.css and can be used for the default theming */\n/* these are the necessary styles for React/Svelte Flow, they get used by base.css and style.css */\n.react-flow {\n  direction: ltr;\n\n  --xy-edge-stroke-default: #b1b1b7;\n  --xy-edge-stroke-width-default: 1;\n  --xy-edge-stroke-selected-default: #555;\n\n  --xy-connectionline-stroke-default: #b1b1b7;\n  --xy-connectionline-stroke-width-default: 1;\n\n  --xy-attribution-background-color-default: rgba(255, 255, 255, 0.5);\n\n  --xy-minimap-background-color-default: #fff;\n  --xy-minimap-mask-background-color-default: rgba(240, 240, 240, 0.6);\n  --xy-minimap-mask-stroke-color-default: transparent;\n  --xy-minimap-mask-stroke-width-default: 1;\n  --xy-minimap-node-background-color-default: #e2e2e2;\n  --xy-minimap-node-stroke-color-default: transparent;\n  --xy-minimap-node-stroke-width-default: 2;\n\n  --xy-background-color-default: transparent;\n  --xy-background-pattern-dots-color-default: #91919a;\n  --xy-background-pattern-lines-color-default: #eee;\n  --xy-background-pattern-cross-color-default: #e2e2e2;\n  background-color: var(--xy-background-color, var(--xy-background-color-default));\n  --xy-node-color-default: inherit;\n  --xy-node-border-default: 1px solid #1a192b;\n  --xy-node-background-color-default: #fff;\n  --xy-node-group-background-color-default: rgba(240, 240, 240, 0.25);\n  --xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, 0.08);\n  --xy-node-boxshadow-selected-default: 0 0 0 0.5px #1a192b;\n  --xy-node-border-radius-default: 3px;\n\n  --xy-handle-background-color-default: #1a192b;\n  --xy-handle-border-color-default: #fff;\n\n  --xy-selection-background-color-default: rgba(0, 89, 220, 0.08);\n  --xy-selection-border-default: 1px dotted rgba(0, 89, 220, 0.8);\n\n  --xy-controls-button-background-color-default: #fefefe;\n  --xy-controls-button-background-color-hover-default: #f4f4f4;\n  --xy-controls-button-color-default: inherit;\n  --xy-controls-button-color-hover-default: inherit;\n  --xy-controls-button-border-color-default: #eee;\n  --xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, 0.08);\n\n  --xy-edge-label-background-color-default: #ffffff;\n  --xy-edge-label-color-default: inherit;\n  --xy-resize-background-color-default: #3367d9;\n}\n.react-flow.dark {\n  --xy-edge-stroke-default: #3e3e3e;\n  --xy-edge-stroke-width-default: 1;\n  --xy-edge-stroke-selected-default: #727272;\n\n  --xy-connectionline-stroke-default: #b1b1b7;\n  --xy-connectionline-stroke-width-default: 1;\n\n  --xy-attribution-background-color-default: rgba(150, 150, 150, 0.25);\n\n  --xy-minimap-background-color-default: #141414;\n  --xy-minimap-mask-background-color-default: rgba(60, 60, 60, 0.6);\n  --xy-minimap-mask-stroke-color-default: transparent;\n  --xy-minimap-mask-stroke-width-default: 1;\n  --xy-minimap-node-background-color-default: #2b2b2b;\n  --xy-minimap-node-stroke-color-default: transparent;\n  --xy-minimap-node-stroke-width-default: 2;\n\n  --xy-background-color-default: #141414;\n  --xy-background-pattern-dots-color-default: #777;\n  --xy-background-pattern-lines-color-default: #777;\n  --xy-background-pattern-cross-color-default: #777;\n  --xy-node-color-default: #f8f8f8;\n  --xy-node-border-default: 1px solid #3c3c3c;\n  --xy-node-background-color-default: #1e1e1e;\n  --xy-node-group-background-color-default: rgba(240, 240, 240, 0.25);\n  --xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, 0.08);\n  --xy-node-boxshadow-selected-default: 0 0 0 0.5px #999;\n\n  --xy-handle-background-color-default: #bebebe;\n  --xy-handle-border-color-default: #1e1e1e;\n\n  --xy-selection-background-color-default: rgba(200, 200, 220, 0.08);\n  --xy-selection-border-default: 1px dotted rgba(200, 200, 220, 0.8);\n\n  --xy-controls-button-background-color-default: #2b2b2b;\n  --xy-controls-button-background-color-hover-default: #3e3e3e;\n  --xy-controls-button-color-default: #f8f8f8;\n  --xy-controls-button-color-hover-default: #fff;\n  --xy-controls-button-border-color-default: #5b5b5b;\n  --xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, 0.08);\n\n  --xy-edge-label-background-color-default: #141414;\n  --xy-edge-label-color-default: #f8f8f8;\n}\n.react-flow__background {\n  background-color: var(--xy-background-color-props, var(--xy-background-color, var(--xy-background-color-default)));\n  pointer-events: none;\n  z-index: -1;\n}\n.react-flow__container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.react-flow__pane {\n  z-index: 1;\n}\n.react-flow__pane.draggable {\n    cursor: grab;\n  }\n.react-flow__pane.dragging {\n    cursor: grabbing;\n  }\n.react-flow__pane.selection {\n    cursor: pointer;\n  }\n.react-flow__viewport {\n  transform-origin: 0 0;\n  z-index: 2;\n  pointer-events: none;\n}\n.react-flow__renderer {\n  z-index: 4;\n}\n.react-flow__selection {\n  z-index: 6;\n}\n.react-flow__nodesselection-rect:focus,\n.react-flow__nodesselection-rect:focus-visible {\n  outline: none;\n}\n.react-flow__edge-path {\n  stroke: var(--xy-edge-stroke, var(--xy-edge-stroke-default));\n  stroke-width: var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));\n  fill: none;\n}\n.react-flow__connection-path {\n  stroke: var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));\n  stroke-width: var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));\n  fill: none;\n}\n.react-flow .react-flow__edges {\n  position: absolute;\n}\n.react-flow .react-flow__edges svg {\n    overflow: visible;\n    position: absolute;\n    pointer-events: none;\n  }\n.react-flow__edge {\n  pointer-events: visibleStroke;\n}\n.react-flow__edge.selectable {\n    cursor: pointer;\n  }\n.react-flow__edge.animated path {\n    stroke-dasharray: 5;\n    animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__edge.animated path.react-flow__edge-interaction {\n    stroke-dasharray: none;\n    animation: none;\n  }\n.react-flow__edge.inactive {\n    pointer-events: none;\n  }\n.react-flow__edge.selected,\n  .react-flow__edge:focus,\n  .react-flow__edge:focus-visible {\n    outline: none;\n  }\n.react-flow__edge.selected .react-flow__edge-path,\n  .react-flow__edge.selectable:focus .react-flow__edge-path,\n  .react-flow__edge.selectable:focus-visible .react-flow__edge-path {\n    stroke: var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default));\n  }\n.react-flow__edge-textwrapper {\n    pointer-events: all;\n  }\n.react-flow__edge .react-flow__edge-text {\n    pointer-events: none;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n  }\n.react-flow__connection {\n  pointer-events: none;\n}\n.react-flow__connection .animated {\n    stroke-dasharray: 5;\n    animation: dashdraw 0.5s linear infinite;\n  }\nsvg.react-flow__connectionline {\n  z-index: 1001;\n  overflow: visible;\n  position: absolute;\n}\n.react-flow__nodes {\n  pointer-events: none;\n  transform-origin: 0 0;\n}\n.react-flow__node {\n  position: absolute;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  pointer-events: all;\n  transform-origin: 0 0;\n  box-sizing: border-box;\n  cursor: default;\n}\n.react-flow__node.selectable {\n    cursor: pointer;\n  }\n.react-flow__node.draggable {\n    cursor: grab;\n    pointer-events: all;\n  }\n.react-flow__node.draggable.dragging {\n      cursor: grabbing;\n    }\n.react-flow__nodesselection {\n  z-index: 3;\n  transform-origin: left top;\n  pointer-events: none;\n}\n.react-flow__nodesselection-rect {\n    position: absolute;\n    pointer-events: all;\n    cursor: grab;\n  }\n.react-flow__handle {\n  position: absolute;\n  pointer-events: none;\n  min-width: 5px;\n  min-height: 5px;\n  width: 6px;\n  height: 6px;\n  background-color: var(--xy-handle-background-color, var(--xy-handle-background-color-default));\n  border: 1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));\n  border-radius: 100%;\n}\n.react-flow__handle.connectingfrom {\n    pointer-events: all;\n  }\n.react-flow__handle.connectionindicator {\n    pointer-events: all;\n    cursor: crosshair;\n  }\n.react-flow__handle-bottom {\n    top: auto;\n    left: 50%;\n    bottom: 0;\n    transform: translate(-50%, 50%);\n  }\n.react-flow__handle-top {\n    top: 0;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n.react-flow__handle-left {\n    top: 50%;\n    left: 0;\n    transform: translate(-50%, -50%);\n  }\n.react-flow__handle-right {\n    top: 50%;\n    right: 0;\n    transform: translate(50%, -50%);\n  }\n.react-flow__edgeupdater {\n  cursor: move;\n  pointer-events: all;\n}\n.react-flow__pane.selection .react-flow__panel {\n  pointer-events: none;\n}\n.react-flow__panel {\n  position: absolute;\n  z-index: 5;\n  margin: 15px;\n}\n.react-flow__panel.top {\n    top: 0;\n  }\n.react-flow__panel.bottom {\n    bottom: 0;\n  }\n.react-flow__panel.top.center, .react-flow__panel.bottom.center {\n      left: 50%;\n      transform: translateX(-15px) translateX(-50%);\n    }\n.react-flow__panel.left {\n    left: 0;\n  }\n.react-flow__panel.right {\n    right: 0;\n  }\n.react-flow__panel.left.center, .react-flow__panel.right.center {\n      top: 50%;\n      transform: translateY(-15px) translateY(-50%);\n    }\n.react-flow__attribution {\n  font-size: 10px;\n  background: var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));\n  padding: 2px 3px;\n  margin: 0;\n}\n.react-flow__attribution a {\n    text-decoration: none;\n    color: #999;\n  }\n@keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n.react-flow__edgelabel-renderer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  left: 0;\n  top: 0;\n}\n.react-flow__viewport-portal {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n}\n.react-flow__minimap {\n  background: var(\n    --xy-minimap-background-color-props,\n    var(--xy-minimap-background-color, var(--xy-minimap-background-color-default))\n  );\n}\n.react-flow__minimap-svg {\n    display: block;\n  }\n.react-flow__minimap-mask {\n    fill: var(\n      --xy-minimap-mask-background-color-props,\n      var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default))\n    );\n    stroke: var(\n      --xy-minimap-mask-stroke-color-props,\n      var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default))\n    );\n    stroke-width: var(\n      --xy-minimap-mask-stroke-width-props,\n      var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default))\n    );\n  }\n.react-flow__minimap-node {\n    fill: var(\n      --xy-minimap-node-background-color-props,\n      var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default))\n    );\n    stroke: var(\n      --xy-minimap-node-stroke-color-props,\n      var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default))\n    );\n    stroke-width: var(\n      --xy-minimap-node-stroke-width-props,\n      var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default))\n    );\n  }\n.react-flow__background-pattern.dots {\n    fill: var(\n      --xy-background-pattern-color-props,\n      var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default))\n    );\n  }\n.react-flow__background-pattern.lines {\n    stroke: var(\n      --xy-background-pattern-color-props,\n      var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default))\n    );\n  }\n.react-flow__background-pattern.cross {\n    stroke: var(\n      --xy-background-pattern-color-props,\n      var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default))\n    );\n  }\n.react-flow__controls {\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default));\n}\n.react-flow__controls.horizontal {\n    flex-direction: row;\n  }\n.react-flow__controls-button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 26px;\n    width: 26px;\n    padding: 4px;\n    border: none;\n    background: var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));\n    border-bottom: 1px solid\n      var(\n        --xy-controls-button-border-color-props,\n        var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default))\n      );\n    color: var(\n      --xy-controls-button-color-props,\n      var(--xy-controls-button-color, var(--xy-controls-button-color-default))\n    );\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n  }\n.react-flow__controls-button svg {\n      width: 100%;\n      max-width: 12px;\n      max-height: 12px;\n      fill: currentColor;\n    }\n.react-flow__edge.updating .react-flow__edge-path {\n      stroke: #777;\n    }\n.react-flow__edge-text {\n    font-size: 10px;\n  }\n.react-flow__node.selectable:focus,\n  .react-flow__node.selectable:focus-visible {\n    outline: none;\n  }\n.react-flow__node-input,\n.react-flow__node-default,\n.react-flow__node-output,\n.react-flow__node-group {\n  padding: 10px;\n  border-radius: var(--xy-node-border-radius, var(--xy-node-border-radius-default));\n  width: 150px;\n  font-size: 12px;\n  color: var(--xy-node-color, var(--xy-node-color-default));\n  text-align: center;\n  border: var(--xy-node-border, var(--xy-node-border-default));\n  background-color: var(--xy-node-background-color, var(--xy-node-background-color-default));\n}\n.react-flow__node-input.selectable:hover, .react-flow__node-default.selectable:hover, .react-flow__node-output.selectable:hover, .react-flow__node-group.selectable:hover {\n      box-shadow: var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default));\n    }\n.react-flow__node-input.selectable.selected,\n    .react-flow__node-input.selectable:focus,\n    .react-flow__node-input.selectable:focus-visible,\n    .react-flow__node-default.selectable.selected,\n    .react-flow__node-default.selectable:focus,\n    .react-flow__node-default.selectable:focus-visible,\n    .react-flow__node-output.selectable.selected,\n    .react-flow__node-output.selectable:focus,\n    .react-flow__node-output.selectable:focus-visible,\n    .react-flow__node-group.selectable.selected,\n    .react-flow__node-group.selectable:focus,\n    .react-flow__node-group.selectable:focus-visible {\n      box-shadow: var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default));\n    }\n.react-flow__node-group {\n  background-color: var(--xy-node-group-background-color, var(--xy-node-group-background-color-default));\n}\n.react-flow__nodesselection-rect,\n.react-flow__selection {\n  background: var(--xy-selection-background-color, var(--xy-selection-background-color-default));\n  border: var(--xy-selection-border, var(--xy-selection-border-default));\n}\n.react-flow__nodesselection-rect:focus,\n  .react-flow__nodesselection-rect:focus-visible,\n  .react-flow__selection:focus,\n  .react-flow__selection:focus-visible {\n    outline: none;\n  }\n.react-flow__controls-button:hover {\n      background: var(\n        --xy-controls-button-background-color-hover-props,\n        var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default))\n      );\n      color: var(\n        --xy-controls-button-color-hover-props,\n        var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default))\n      );\n    }\n.react-flow__controls-button:disabled {\n      pointer-events: none;\n    }\n.react-flow__controls-button:disabled svg {\n        fill-opacity: 0.4;\n      }\n.react-flow__controls-button:last-child {\n    border-bottom: none;\n  }\n.react-flow__controls.horizontal .react-flow__controls-button {\n    border-bottom: none;\n    border-right: 1px solid\n      var(\n        --xy-controls-button-border-color-props,\n        var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default))\n      );\n  }\n.react-flow__controls.horizontal .react-flow__controls-button:last-child {\n    border-right: none;\n  }\n.react-flow__resize-control {\n  position: absolute;\n}\n.react-flow__resize-control.left,\n.react-flow__resize-control.right {\n  cursor: ew-resize;\n}\n.react-flow__resize-control.top,\n.react-flow__resize-control.bottom {\n  cursor: ns-resize;\n}\n.react-flow__resize-control.top.left,\n.react-flow__resize-control.bottom.right {\n  cursor: nwse-resize;\n}\n.react-flow__resize-control.bottom.left,\n.react-flow__resize-control.top.right {\n  cursor: nesw-resize;\n}\n/* handle styles */\n.react-flow__resize-control.handle {\n  width: 5px;\n  height: 5px;\n  border: 1px solid #fff;\n  border-radius: 1px;\n  background-color: var(--xy-resize-background-color, var(--xy-resize-background-color-default));\n  translate: -50% -50%;\n}\n.react-flow__resize-control.handle.left {\n  left: 0;\n  top: 50%;\n}\n.react-flow__resize-control.handle.right {\n  left: 100%;\n  top: 50%;\n}\n.react-flow__resize-control.handle.top {\n  left: 50%;\n  top: 0;\n}\n.react-flow__resize-control.handle.bottom {\n  left: 50%;\n  top: 100%;\n}\n.react-flow__resize-control.handle.top.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.bottom.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.top.right {\n  left: 100%;\n}\n.react-flow__resize-control.handle.bottom.right {\n  left: 100%;\n}\n/* line styles */\n.react-flow__resize-control.line {\n  border-color: var(--xy-resize-background-color, var(--xy-resize-background-color-default));\n  border-width: 0;\n  border-style: solid;\n}\n.react-flow__resize-control.line.left,\n.react-flow__resize-control.line.right {\n  width: 1px;\n  transform: translate(-50%, 0);\n  top: 0;\n  height: 100%;\n}\n.react-flow__resize-control.line.left {\n  left: 0;\n  border-left-width: 1px;\n}\n.react-flow__resize-control.line.right {\n  left: 100%;\n  border-right-width: 1px;\n}\n.react-flow__resize-control.line.top,\n.react-flow__resize-control.line.bottom {\n  height: 1px;\n  transform: translate(0, -50%);\n  left: 0;\n  width: 100%;\n}\n.react-flow__resize-control.line.top {\n  top: 0;\n  border-top-width: 1px;\n}\n.react-flow__resize-control.line.bottom {\n  border-bottom-width: 1px;\n  top: 100%;\n}\n.react-flow__edge-textbg {\n  fill: var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default));\n}\n.react-flow__edge-text {\n  fill: var(--xy-edge-label-color, var(--xy-edge-label-color-default));\n}\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/api.js":module=>{"use strict";module.exports=function(cssWithMappingToString){var list=[];return list.toString=function toString(){return this.map(function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content}).join("")},list.i=function i(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},"./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/sourceMaps.js":module=>{"use strict";module.exports=function(item){var content=item[1],cssMapping=item[3];if(!cssMapping)return content;if("function"==typeof btoa){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),sourceMapping="/*# ".concat(data," */");return[content].concat([sourceMapping]).join("\n")}return[content].join("\n")}},"./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":module=>{"use strict";var stylesInDOM=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDOM.length;i++)if(stylesInDOM[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var indexByIdentifier=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3],supports:item[4],layer:item[5]};if(-1!==indexByIdentifier)stylesInDOM[indexByIdentifier].references++,stylesInDOM[indexByIdentifier].updater(obj);else{var updater=addElementStyle(obj,options);options.byIndex=i,stylesInDOM.splice(i,0,{identifier,updater,references:1})}identifiers.push(identifier)}return identifiers}function addElementStyle(obj,options){var api=options.domAPI(options);api.update(obj);return function updater(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap&&newObj.supports===obj.supports&&newObj.layer===obj.layer)return;api.update(obj=newObj)}else api.remove()}}module.exports=function(list,options){var lastIdentifiers=modulesToDom(list=list||[],options=options||{});return function update(newList){newList=newList||[];for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDOM[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDOM[_index].references&&(stylesInDOM[_index].updater(),stylesInDOM.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}},"./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertBySelector.js":module=>{"use strict";var memo={};module.exports=function insertBySelector(insert,style){var target=function getTarget(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}(insert);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}},"./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertStyleElement.js":module=>{"use strict";module.exports=function insertStyleElement(options){var element=document.createElement("style");return options.setAttributes(element,options.attributes),options.insert(element,options.options),element}},"./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=function setAttributesWithoutAttributes(styleElement){var nonce=__webpack_require__.nc;nonce&&styleElement.setAttribute("nonce",nonce)}},"./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleDomAPI.js":module=>{"use strict";module.exports=function domAPI(options){if("undefined"==typeof document)return{update:function update(){},remove:function remove(){}};var styleElement=options.insertStyleElement(options);return{update:function update(obj){!function apply(styleElement,options,obj){var css="";obj.supports&&(css+="@supports (".concat(obj.supports,") {")),obj.media&&(css+="@media ".concat(obj.media," {"));var needLayer=void 0!==obj.layer;needLayer&&(css+="@layer".concat(obj.layer.length>0?" ".concat(obj.layer):""," {")),css+=obj.css,needLayer&&(css+="}"),obj.media&&(css+="}"),obj.supports&&(css+="}");var sourceMap=obj.sourceMap;sourceMap&&"undefined"!=typeof btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),options.styleTagTransform(css,styleElement,options.options)}(styleElement,options,obj)},remove:function remove(){!function removeStyleElement(styleElement){if(null===styleElement.parentNode)return!1;styleElement.parentNode.removeChild(styleElement)}(styleElement)}}}},"./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleTagTransform.js":module=>{"use strict";module.exports=function styleTagTransform(css,styleElement){if(styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}},"./node_modules/@xyflow/react/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H2:()=>Controls,Gc:()=>index,Ln:()=>ReactFlowProvider,fM:()=>useEdgesState,ck:()=>useNodesState,VH:()=>useReactFlow});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js");function classcat_cc(names){if("string"==typeof names||"number"==typeof names)return""+names;let out="";if(Array.isArray(names))for(let tmp,i=0;i<names.length;i++)""!==(tmp=classcat_cc(names[i]))&&(out+=(out&&" ")+tmp);else for(let k in names)names[k]&&(out+=(out&&" ")+k);return out}var esm=__webpack_require__("./node_modules/@xyflow/system/dist/esm/index.js"),with_selector=__webpack_require__("./node_modules/use-sync-external-store/shim/with-selector.js");const createStoreImpl=createState=>{let state;const listeners=new Set,setState=(partial,replace)=>{const nextState="function"==typeof partial?partial(state):partial;if(!Object.is(nextState,state)){const previousState=state;state=(null!=replace?replace:"object"!=typeof nextState||null===nextState)?nextState:Object.assign({},state,nextState),listeners.forEach(listener=>listener(state,previousState))}},getState=()=>state,api={setState,getState,getInitialState:()=>initialState,subscribe:listener=>(listeners.add(listener),()=>listeners.delete(listener)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),listeners.clear()}},initialState=state=createState(setState,getState,api);return api},createStore=createState=>createState?createStoreImpl(createState):createStoreImpl;const{useDebugValue}=react,{useSyncExternalStoreWithSelector}=with_selector,identity=arg=>arg;function useStoreWithEqualityFn(api,selector=identity,equalityFn){const slice=useSyncExternalStoreWithSelector(api.subscribe,api.getState,api.getServerState||api.getInitialState,selector,equalityFn);return useDebugValue(slice),slice}const createWithEqualityFnImpl=(createState,defaultEqualityFn)=>{const api=createStore(createState),useBoundStoreWithEqualityFn=(selector,equalityFn=defaultEqualityFn)=>useStoreWithEqualityFn(api,selector,equalityFn);return Object.assign(useBoundStoreWithEqualityFn,api),useBoundStoreWithEqualityFn};function shallow$1(objA,objB){if(Object.is(objA,objB))return!0;if("object"!=typeof objA||null===objA||"object"!=typeof objB||null===objB)return!1;if(objA instanceof Map&&objB instanceof Map){if(objA.size!==objB.size)return!1;for(const[key,value]of objA)if(!Object.is(value,objB.get(key)))return!1;return!0}if(objA instanceof Set&&objB instanceof Set){if(objA.size!==objB.size)return!1;for(const value of objA)if(!objB.has(value))return!1;return!0}const keysA=Object.keys(objA);if(keysA.length!==Object.keys(objB).length)return!1;for(const keyA of keysA)if(!Object.prototype.hasOwnProperty.call(objB,keyA)||!Object.is(objA[keyA],objB[keyA]))return!1;return!0}__webpack_require__("./node_modules/react-dom/index.js");const StoreContext=(0,react.createContext)(null),Provider$1=StoreContext.Provider,zustandErrorMessage=esm.xc.error001();function useStore(selector,equalityFn){const store=(0,react.useContext)(StoreContext);if(null===store)throw new Error(zustandErrorMessage);return useStoreWithEqualityFn(store,selector,equalityFn)}function useStoreApi(){const store=(0,react.useContext)(StoreContext);if(null===store)throw new Error(zustandErrorMessage);return(0,react.useMemo)(()=>({getState:store.getState,setState:store.setState,subscribe:store.subscribe}),[store])}const style={display:"none"},ariaLiveStyle={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ariaLiveSelector=s=>s.ariaLiveMessage,ariaLabelConfigSelector=s=>s.ariaLabelConfig;function AriaLiveMessage({rfId}){const ariaLiveMessage=useStore(ariaLiveSelector);return(0,jsx_runtime.jsx)("div",{id:`react-flow__aria-live-${rfId}`,"aria-live":"assertive","aria-atomic":"true",style:ariaLiveStyle,children:ariaLiveMessage})}function A11yDescriptions({rfId,disableKeyboardA11y}){const ariaLabelConfig=useStore(ariaLabelConfigSelector);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{id:`react-flow__node-desc-${rfId}`,style,children:disableKeyboardA11y?ariaLabelConfig["node.a11yDescription.default"]:ariaLabelConfig["node.a11yDescription.keyboardDisabled"]}),(0,jsx_runtime.jsx)("div",{id:`react-flow__edge-desc-${rfId}`,style,children:ariaLabelConfig["edge.a11yDescription.default"]}),!disableKeyboardA11y&&(0,jsx_runtime.jsx)(AriaLiveMessage,{rfId})]})}const Panel=(0,react.forwardRef)(({position="top-left",children,className,style,...rest},ref)=>{const positionClasses=`${position}`.split("-");return(0,jsx_runtime.jsx)("div",{className:classcat_cc(["react-flow__panel",className,...positionClasses]),style,ref,...rest,children})});function Attribution({proOptions,position="bottom-right"}){return proOptions?.hideAttribution?null:(0,jsx_runtime.jsx)(Panel,{position,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,jsx_runtime.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}Panel.displayName="Panel";const selector$m=s=>{const selectedNodes=[],selectedEdges=[];for(const[,node]of s.nodeLookup)node.selected&&selectedNodes.push(node.internals.userNode);for(const[,edge]of s.edgeLookup)edge.selected&&selectedEdges.push(edge);return{selectedNodes,selectedEdges}},selectId=obj=>obj.id;function areEqual(a,b){return shallow$1(a.selectedNodes.map(selectId),b.selectedNodes.map(selectId))&&shallow$1(a.selectedEdges.map(selectId),b.selectedEdges.map(selectId))}function SelectionListenerInner({onSelectionChange}){const store=useStoreApi(),{selectedNodes,selectedEdges}=useStore(selector$m,areEqual);return(0,react.useEffect)(()=>{const params={nodes:selectedNodes,edges:selectedEdges};onSelectionChange?.(params),store.getState().onSelectionChangeHandlers.forEach(fn=>fn(params))},[selectedNodes,selectedEdges,onSelectionChange]),null}const changeSelector=s=>!!s.onSelectionChangeHandlers;function SelectionListener({onSelectionChange}){const storeHasSelectionChangeHandlers=useStore(changeSelector);return onSelectionChange||storeHasSelectionChangeHandlers?(0,jsx_runtime.jsx)(SelectionListenerInner,{onSelectionChange}):null}const defaultNodeOrigin=[0,0],defaultViewport={x:0,y:0,zoom:1},fieldsToTrack=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig","rfId"],selector$l=s=>({setNodes:s.setNodes,setEdges:s.setEdges,setMinZoom:s.setMinZoom,setMaxZoom:s.setMaxZoom,setTranslateExtent:s.setTranslateExtent,setNodeExtent:s.setNodeExtent,reset:s.reset,setDefaultNodesAndEdges:s.setDefaultNodesAndEdges,setPaneClickDistance:s.setPaneClickDistance}),initPrevValues={translateExtent:esm.ZO,nodeOrigin:defaultNodeOrigin,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function StoreUpdater(props){const{setNodes,setEdges,setMinZoom,setMaxZoom,setTranslateExtent,setNodeExtent,reset,setDefaultNodesAndEdges,setPaneClickDistance}=useStore(selector$l,shallow$1),store=useStoreApi();(0,react.useEffect)(()=>(setDefaultNodesAndEdges(props.defaultNodes,props.defaultEdges),()=>{previousFields.current=initPrevValues,reset()}),[]);const previousFields=(0,react.useRef)(initPrevValues);return(0,react.useEffect)(()=>{for(const fieldName of fieldsToTrack){const fieldValue=props[fieldName];fieldValue!==previousFields.current[fieldName]&&(void 0!==props[fieldName]&&("nodes"===fieldName?setNodes(fieldValue):"edges"===fieldName?setEdges(fieldValue):"minZoom"===fieldName?setMinZoom(fieldValue):"maxZoom"===fieldName?setMaxZoom(fieldValue):"translateExtent"===fieldName?setTranslateExtent(fieldValue):"nodeExtent"===fieldName?setNodeExtent(fieldValue):"paneClickDistance"===fieldName?setPaneClickDistance(fieldValue):"ariaLabelConfig"===fieldName?store.setState({ariaLabelConfig:(0,esm.Q6)(fieldValue)}):"fitView"===fieldName?store.setState({fitViewQueued:fieldValue}):"fitViewOptions"===fieldName?store.setState({fitViewOptions:fieldValue}):store.setState({[fieldName]:fieldValue})))}previousFields.current=props},fieldsToTrack.map(fieldName=>props[fieldName])),null}function getMediaQuery(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const defaultDoc="undefined"!=typeof document?document:null;function useKeyPress(keyCode=null,options={target:defaultDoc,actInsideInputWithModifier:!0}){const[keyPressed,setKeyPressed]=(0,react.useState)(!1),modifierPressed=(0,react.useRef)(!1),pressedKeys=(0,react.useRef)(new Set([])),[keyCodes,keysToWatch]=(0,react.useMemo)(()=>{if(null!==keyCode){const keys=(Array.isArray(keyCode)?keyCode:[keyCode]).filter(kc=>"string"==typeof kc).map(kc=>kc.replace("+","\n").replace("\n\n","\n+").split("\n")),keysFlat=keys.reduce((res,item)=>res.concat(...item),[]);return[keys,keysFlat]}return[[],[]]},[keyCode]);return(0,react.useEffect)(()=>{const target=options?.target??defaultDoc,actInsideInputWithModifier=options?.actInsideInputWithModifier??!0;if(null!==keyCode){const downHandler=event=>{modifierPressed.current=event.ctrlKey||event.metaKey||event.shiftKey||event.altKey;if((!modifierPressed.current||modifierPressed.current&&!actInsideInputWithModifier)&&(0,esm.v5)(event))return!1;const keyOrCode=useKeyOrCode(event.code,keysToWatch);if(pressedKeys.current.add(event[keyOrCode]),isMatchingKey(keyCodes,pressedKeys.current,!1)){const target=event.composedPath?.()?.[0]||event.target,isInteractiveElement="BUTTON"===target?.nodeName||"A"===target?.nodeName;!1===options.preventDefault||!modifierPressed.current&&isInteractiveElement||event.preventDefault(),setKeyPressed(!0)}},upHandler=event=>{const keyOrCode=useKeyOrCode(event.code,keysToWatch);isMatchingKey(keyCodes,pressedKeys.current,!0)?(setKeyPressed(!1),pressedKeys.current.clear()):pressedKeys.current.delete(event[keyOrCode]),"Meta"===event.key&&pressedKeys.current.clear(),modifierPressed.current=!1},resetHandler=()=>{pressedKeys.current.clear(),setKeyPressed(!1)};return target?.addEventListener("keydown",downHandler),target?.addEventListener("keyup",upHandler),window.addEventListener("blur",resetHandler),window.addEventListener("contextmenu",resetHandler),()=>{target?.removeEventListener("keydown",downHandler),target?.removeEventListener("keyup",upHandler),window.removeEventListener("blur",resetHandler),window.removeEventListener("contextmenu",resetHandler)}}},[keyCode,setKeyPressed]),keyPressed}function isMatchingKey(keyCodes,pressedKeys,isUp){return keyCodes.filter(keys=>isUp||keys.length===pressedKeys.size).some(keys=>keys.every(k=>pressedKeys.has(k)))}function useKeyOrCode(eventCode,keysToWatch){return keysToWatch.includes(eventCode)?"code":"key"}const useViewportHelper=()=>{const store=useStoreApi();return(0,react.useMemo)(()=>({zoomIn:options=>{const{panZoom}=store.getState();return panZoom?panZoom.scaleBy(1.2,{duration:options?.duration}):Promise.resolve(!1)},zoomOut:options=>{const{panZoom}=store.getState();return panZoom?panZoom.scaleBy(1/1.2,{duration:options?.duration}):Promise.resolve(!1)},zoomTo:(zoomLevel,options)=>{const{panZoom}=store.getState();return panZoom?panZoom.scaleTo(zoomLevel,{duration:options?.duration}):Promise.resolve(!1)},getZoom:()=>store.getState().transform[2],setViewport:async(viewport,options)=>{const{transform:[tX,tY,tZoom],panZoom}=store.getState();return panZoom?(await panZoom.setViewport({x:viewport.x??tX,y:viewport.y??tY,zoom:viewport.zoom??tZoom},options),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[x,y,zoom]=store.getState().transform;return{x,y,zoom}},setCenter:async(x,y,options)=>store.getState().setCenter(x,y,options),fitBounds:async(bounds,options)=>{const{width,height,minZoom,maxZoom,panZoom}=store.getState(),viewport=(0,esm.R4)(bounds,width,height,minZoom,maxZoom,options?.padding??.1);return panZoom?(await panZoom.setViewport(viewport,{duration:options?.duration,ease:options?.ease,interpolate:options?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(clientPosition,options={})=>{const{transform,snapGrid,snapToGrid,domNode}=store.getState();if(!domNode)return clientPosition;const{x:domX,y:domY}=domNode.getBoundingClientRect(),correctedPosition={x:clientPosition.x-domX,y:clientPosition.y-domY},_snapGrid=options.snapGrid??snapGrid,_snapToGrid=options.snapToGrid??snapToGrid;return(0,esm.Ff)(correctedPosition,transform,_snapToGrid,_snapGrid)},flowToScreenPosition:flowPosition=>{const{transform,domNode}=store.getState();if(!domNode)return flowPosition;const{x:domX,y:domY}=domNode.getBoundingClientRect(),rendererPosition=(0,esm.zj)(flowPosition,transform);return{x:rendererPosition.x+domX,y:rendererPosition.y+domY}}}),[])};function applyChanges(changes,elements){const updatedElements=[],changesMap=new Map,addItemChanges=[];for(const change of changes)if("add"!==change.type)if("remove"===change.type||"replace"===change.type)changesMap.set(change.id,[change]);else{const elementChanges=changesMap.get(change.id);elementChanges?elementChanges.push(change):changesMap.set(change.id,[change])}else addItemChanges.push(change);for(const element of elements){const changes=changesMap.get(element.id);if(!changes){updatedElements.push(element);continue}if("remove"===changes[0].type)continue;if("replace"===changes[0].type){updatedElements.push({...changes[0].item});continue}const updatedElement={...element};for(const change of changes)applyChange(change,updatedElement);updatedElements.push(updatedElement)}return addItemChanges.length&&addItemChanges.forEach(change=>{void 0!==change.index?updatedElements.splice(change.index,0,{...change.item}):updatedElements.push({...change.item})}),updatedElements}function applyChange(change,element){switch(change.type){case"select":element.selected=change.selected;break;case"position":void 0!==change.position&&(element.position=change.position),void 0!==change.dragging&&(element.dragging=change.dragging);break;case"dimensions":void 0!==change.dimensions&&(element.measured??={},element.measured.width=change.dimensions.width,element.measured.height=change.dimensions.height,change.setAttributes&&(!0!==change.setAttributes&&"width"!==change.setAttributes||(element.width=change.dimensions.width),!0!==change.setAttributes&&"height"!==change.setAttributes||(element.height=change.dimensions.height))),"boolean"==typeof change.resizing&&(element.resizing=change.resizing)}}function applyNodeChanges(changes,nodes){return applyChanges(changes,nodes)}function applyEdgeChanges(changes,edges){return applyChanges(changes,edges)}function createSelectionChange(id,selected){return{id,type:"select",selected}}function getSelectionChanges(items,selectedIds=new Set,mutateItem=!1){const changes=[];for(const[id,item]of items){const willBeSelected=selectedIds.has(id);void 0===item.selected&&!willBeSelected||item.selected===willBeSelected||(mutateItem&&(item.selected=willBeSelected),changes.push(createSelectionChange(item.id,willBeSelected)))}return changes}function getElementsDiffChanges({items=[],lookup}){const changes=[],itemsLookup=new Map(items.map(item=>[item.id,item]));for(const[index,item]of items.entries()){const lookupItem=lookup.get(item.id),storeItem=lookupItem?.internals?.userNode??lookupItem;void 0!==storeItem&&storeItem!==item&&changes.push({id:item.id,item,type:"replace"}),void 0===storeItem&&changes.push({item,type:"add",index})}for(const[id]of lookup){void 0===itemsLookup.get(id)&&changes.push({id,type:"remove"})}return changes}function elementToRemoveChange(item){return{id:item.id,type:"remove"}}const isNode=element=>(0,esm.oB)(element),isEdge=element=>(0,esm.b$)(element);function fixedForwardRef(render){return(0,react.forwardRef)(render)}const useIsomorphicLayoutEffect="undefined"!=typeof window?react.useLayoutEffect:react.useEffect;function useQueue(runQueue){const[serial,setSerial]=(0,react.useState)(BigInt(0)),[queue]=(0,react.useState)(()=>function createQueue(cb){let queue=[];return{get:()=>queue,reset:()=>{queue=[]},push:item=>{queue.push(item),cb()}}}(()=>setSerial(n=>n+BigInt(1))));return useIsomorphicLayoutEffect(()=>{const queueItems=queue.get();queueItems.length&&(runQueue(queueItems),queue.reset())},[serial]),queue}const BatchContext=(0,react.createContext)(null);function BatchProvider({children}){const store=useStoreApi(),nodeQueue=useQueue((0,react.useCallback)(queueItems=>{const{nodes=[],setNodes,hasDefaultNodes,onNodesChange,nodeLookup,fitViewQueued}=store.getState();let next=nodes;for(const payload of queueItems)next="function"==typeof payload?payload(next):payload;const changes=getElementsDiffChanges({items:next,lookup:nodeLookup});hasDefaultNodes&&setNodes(next),changes.length>0?onNodesChange?.(changes):fitViewQueued&&window.requestAnimationFrame(()=>{const{fitViewQueued,nodes,setNodes}=store.getState();fitViewQueued&&setNodes(nodes)})},[])),edgeQueue=useQueue((0,react.useCallback)(queueItems=>{const{edges=[],setEdges,hasDefaultEdges,onEdgesChange,edgeLookup}=store.getState();let next=edges;for(const payload of queueItems)next="function"==typeof payload?payload(next):payload;hasDefaultEdges?setEdges(next):onEdgesChange&&onEdgesChange(getElementsDiffChanges({items:next,lookup:edgeLookup}))},[])),value=(0,react.useMemo)(()=>({nodeQueue,edgeQueue}),[]);return(0,jsx_runtime.jsx)(BatchContext.Provider,{value,children})}const selector$k=s=>!!s.panZoom;function useReactFlow(){const viewportHelper=useViewportHelper(),store=useStoreApi(),batchContext=function useBatchContext(){const batchContext=(0,react.useContext)(BatchContext);if(!batchContext)throw new Error("useBatchContext must be used within a BatchProvider");return batchContext}(),viewportInitialized=useStore(selector$k),generalHelper=(0,react.useMemo)(()=>{const getInternalNode=id=>store.getState().nodeLookup.get(id),setNodes=payload=>{batchContext.nodeQueue.push(payload)},setEdges=payload=>{batchContext.edgeQueue.push(payload)},getNodeRect=node=>{const{nodeLookup,nodeOrigin}=store.getState(),nodeToUse=isNode(node)?node:nodeLookup.get(node.id),position=nodeToUse.parentId?(0,esm.us)(nodeToUse.position,nodeToUse.measured,nodeToUse.parentId,nodeLookup,nodeOrigin):nodeToUse.position,nodeWithPosition={...nodeToUse,position,width:nodeToUse.measured?.width??nodeToUse.width,height:nodeToUse.measured?.height??nodeToUse.height};return(0,esm.kM)(nodeWithPosition)},updateNode=(id,nodeUpdate,options={replace:!1})=>{setNodes(prevNodes=>prevNodes.map(node=>{if(node.id===id){const nextNode="function"==typeof nodeUpdate?nodeUpdate(node):nodeUpdate;return options.replace&&isNode(nextNode)?nextNode:{...node,...nextNode}}return node}))},updateEdge=(id,edgeUpdate,options={replace:!1})=>{setEdges(prevEdges=>prevEdges.map(edge=>{if(edge.id===id){const nextEdge="function"==typeof edgeUpdate?edgeUpdate(edge):edgeUpdate;return options.replace&&isEdge(nextEdge)?nextEdge:{...edge,...nextEdge}}return edge}))};return{getNodes:()=>store.getState().nodes.map(n=>({...n})),getNode:id=>getInternalNode(id)?.internals.userNode,getInternalNode,getEdges:()=>{const{edges=[]}=store.getState();return edges.map(e=>({...e}))},getEdge:id=>store.getState().edgeLookup.get(id),setNodes,setEdges,addNodes:payload=>{const newNodes=Array.isArray(payload)?payload:[payload];batchContext.nodeQueue.push(nodes=>[...nodes,...newNodes])},addEdges:payload=>{const newEdges=Array.isArray(payload)?payload:[payload];batchContext.edgeQueue.push(edges=>[...edges,...newEdges])},toObject:()=>{const{nodes=[],edges=[],transform}=store.getState(),[x,y,zoom]=transform;return{nodes:nodes.map(n=>({...n})),edges:edges.map(e=>({...e})),viewport:{x,y,zoom}}},deleteElements:async({nodes:nodesToRemove=[],edges:edgesToRemove=[]})=>{const{nodes,edges,onNodesDelete,onEdgesDelete,triggerNodeChanges,triggerEdgeChanges,onDelete,onBeforeDelete}=store.getState(),{nodes:matchingNodes,edges:matchingEdges}=await(0,esm.Tq)({nodesToRemove,edgesToRemove,nodes,edges,onBeforeDelete}),hasMatchingEdges=matchingEdges.length>0,hasMatchingNodes=matchingNodes.length>0;if(hasMatchingEdges){const edgeChanges=matchingEdges.map(elementToRemoveChange);onEdgesDelete?.(matchingEdges),triggerEdgeChanges(edgeChanges)}if(hasMatchingNodes){const nodeChanges=matchingNodes.map(elementToRemoveChange);onNodesDelete?.(matchingNodes),triggerNodeChanges(nodeChanges)}return(hasMatchingNodes||hasMatchingEdges)&&onDelete?.({nodes:matchingNodes,edges:matchingEdges}),{deletedNodes:matchingNodes,deletedEdges:matchingEdges}},getIntersectingNodes:(nodeOrRect,partially=!0,nodes)=>{const isRect=(0,esm.mW)(nodeOrRect),nodeRect=isRect?nodeOrRect:getNodeRect(nodeOrRect),hasNodesOption=void 0!==nodes;return nodeRect?(nodes||store.getState().nodes).filter(n=>{const internalNode=store.getState().nodeLookup.get(n.id);if(internalNode&&!isRect&&(n.id===nodeOrRect.id||!internalNode.internals.positionAbsolute))return!1;const currNodeRect=(0,esm.kM)(hasNodesOption?n:internalNode),overlappingArea=(0,esm.X6)(currNodeRect,nodeRect);return partially&&overlappingArea>0||overlappingArea>=currNodeRect.width*currNodeRect.height||overlappingArea>=nodeRect.width*nodeRect.height}):[]},isNodeIntersecting:(nodeOrRect,area,partially=!0)=>{const nodeRect=(0,esm.mW)(nodeOrRect)?nodeOrRect:getNodeRect(nodeOrRect);if(!nodeRect)return!1;const overlappingArea=(0,esm.X6)(nodeRect,area);return partially&&overlappingArea>0||overlappingArea>=nodeRect.width*nodeRect.height},updateNode,updateNodeData:(id,dataUpdate,options={replace:!1})=>{updateNode(id,node=>{const nextData="function"==typeof dataUpdate?dataUpdate(node):dataUpdate;return options.replace?{...node,data:nextData}:{...node,data:{...node.data,...nextData}}},options)},updateEdge,updateEdgeData:(id,dataUpdate,options={replace:!1})=>{updateEdge(id,edge=>{const nextData="function"==typeof dataUpdate?dataUpdate(edge):dataUpdate;return options.replace?{...edge,data:nextData}:{...edge,data:{...edge.data,...nextData}}},options)},getNodesBounds:nodes=>{const{nodeLookup,nodeOrigin}=store.getState();return(0,esm.Jo)(nodes,{nodeLookup,nodeOrigin})},getHandleConnections:({type,id,nodeId})=>Array.from(store.getState().connectionLookup.get(`${nodeId}-${type}${id?`-${id}`:""}`)?.values()??[]),getNodeConnections:({type,handleId,nodeId})=>Array.from(store.getState().connectionLookup.get(`${nodeId}${type?handleId?`-${type}-${handleId}`:`-${type}`:""}`)?.values()??[]),fitView:async options=>{const fitViewResolver=store.getState().fitViewResolver??(0,esm.YN)();return store.setState({fitViewQueued:!0,fitViewOptions:options,fitViewResolver}),batchContext.nodeQueue.push(nodes=>[...nodes]),fitViewResolver.promise}}},[]);return(0,react.useMemo)(()=>({...generalHelper,...viewportHelper,viewportInitialized}),[viewportInitialized])}const selected=item=>item.selected,win$1="undefined"!=typeof window?window:void 0;const containerStyle={position:"absolute",width:"100%",height:"100%",top:0,left:0},selector$j=s=>({userSelectionActive:s.userSelectionActive,lib:s.lib});function ZoomPane({onPaneContextMenu,zoomOnScroll=!0,zoomOnPinch=!0,panOnScroll=!1,panOnScrollSpeed=.5,panOnScrollMode=esm.ny.Free,zoomOnDoubleClick=!0,panOnDrag=!0,defaultViewport,translateExtent,minZoom,maxZoom,zoomActivationKeyCode,preventScrolling=!0,children,noWheelClassName,noPanClassName,onViewportChange,isControlledViewport,paneClickDistance}){const store=useStoreApi(),zoomPane=(0,react.useRef)(null),{userSelectionActive,lib}=useStore(selector$j,shallow$1),zoomActivationKeyPressed=useKeyPress(zoomActivationKeyCode),panZoom=(0,react.useRef)();!function useResizeHandler(domNode){const store=useStoreApi();(0,react.useEffect)(()=>{const updateDimensions=()=>{if(!domNode.current)return!1;const size=(0,esm.Eo)(domNode.current);0!==size.height&&0!==size.width||store.getState().onError?.("004",esm.xc.error004()),store.setState({width:size.width||500,height:size.height||500})};if(domNode.current){updateDimensions(),window.addEventListener("resize",updateDimensions);const resizeObserver=new ResizeObserver(()=>updateDimensions());return resizeObserver.observe(domNode.current),()=>{window.removeEventListener("resize",updateDimensions),resizeObserver&&domNode.current&&resizeObserver.unobserve(domNode.current)}}},[])}(zoomPane);const onTransformChange=(0,react.useCallback)(transform=>{onViewportChange?.({x:transform[0],y:transform[1],zoom:transform[2]}),isControlledViewport||store.setState({transform})},[onViewportChange,isControlledViewport]);return(0,react.useEffect)(()=>{if(zoomPane.current){panZoom.current=(0,esm.kO)({domNode:zoomPane.current,minZoom,maxZoom,translateExtent,viewport:defaultViewport,paneClickDistance,onDraggingChange:paneDragging=>store.setState({paneDragging}),onPanZoomStart:(event,vp)=>{const{onViewportChangeStart,onMoveStart}=store.getState();onMoveStart?.(event,vp),onViewportChangeStart?.(vp)},onPanZoom:(event,vp)=>{const{onViewportChange,onMove}=store.getState();onMove?.(event,vp),onViewportChange?.(vp)},onPanZoomEnd:(event,vp)=>{const{onViewportChangeEnd,onMoveEnd}=store.getState();onMoveEnd?.(event,vp),onViewportChangeEnd?.(vp)}});const{x,y,zoom}=panZoom.current.getViewport();return store.setState({panZoom:panZoom.current,transform:[x,y,zoom],domNode:zoomPane.current.closest(".react-flow")}),()=>{panZoom.current?.destroy()}}},[]),(0,react.useEffect)(()=>{panZoom.current?.update({onPaneContextMenu,zoomOnScroll,zoomOnPinch,panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag,zoomActivationKeyPressed,preventScrolling,noPanClassName,userSelectionActive,noWheelClassName,lib,onTransformChange})},[onPaneContextMenu,zoomOnScroll,zoomOnPinch,panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag,zoomActivationKeyPressed,preventScrolling,noPanClassName,userSelectionActive,noWheelClassName,lib,onTransformChange]),(0,jsx_runtime.jsx)("div",{className:"react-flow__renderer",ref:zoomPane,style:containerStyle,children})}const selector$i=s=>({userSelectionActive:s.userSelectionActive,userSelectionRect:s.userSelectionRect});function UserSelection(){const{userSelectionActive,userSelectionRect}=useStore(selector$i,shallow$1);return userSelectionActive&&userSelectionRect?(0,jsx_runtime.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:userSelectionRect.width,height:userSelectionRect.height,transform:`translate(${userSelectionRect.x}px, ${userSelectionRect.y}px)`}}):null}const wrapHandler=(handler,containerRef)=>event=>{event.target===containerRef.current&&handler?.(event)},selector$h=s=>({userSelectionActive:s.userSelectionActive,elementsSelectable:s.elementsSelectable,connectionInProgress:s.connection.inProgress,dragging:s.paneDragging});function Pane({isSelecting,selectionKeyPressed,selectionMode=esm.Qc.Full,panOnDrag,selectionOnDrag,onSelectionStart,onSelectionEnd,onPaneClick,onPaneContextMenu,onPaneScroll,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,children}){const store=useStoreApi(),{userSelectionActive,elementsSelectable,dragging,connectionInProgress}=useStore(selector$h,shallow$1),hasActiveSelection=elementsSelectable&&(isSelecting||userSelectionActive),container=(0,react.useRef)(null),containerBounds=(0,react.useRef)(),selectedNodeIds=(0,react.useRef)(new Set),selectedEdgeIds=(0,react.useRef)(new Set),selectionInProgress=(0,react.useRef)(!1),selectionStarted=(0,react.useRef)(!1),onClick=event=>{selectionInProgress.current||connectionInProgress?selectionInProgress.current=!1:(onPaneClick?.(event),store.getState().resetSelectedElements(),store.setState({nodesSelectionActive:!1}))},onWheel=onPaneScroll?event=>onPaneScroll(event):void 0,draggable=!0===panOnDrag||Array.isArray(panOnDrag)&&panOnDrag.includes(0);return(0,jsx_runtime.jsxs)("div",{className:classcat_cc(["react-flow__pane",{draggable,dragging,selection:isSelecting}]),onClick:hasActiveSelection?void 0:wrapHandler(onClick,container),onContextMenu:wrapHandler(event=>{Array.isArray(panOnDrag)&&panOnDrag?.includes(2)?event.preventDefault():onPaneContextMenu?.(event)},container),onWheel:wrapHandler(onWheel,container),onPointerEnter:hasActiveSelection?void 0:onPaneMouseEnter,onPointerDown:hasActiveSelection?event=>{const{resetSelectedElements,domNode}=store.getState();if(containerBounds.current=domNode?.getBoundingClientRect(),!elementsSelectable||!isSelecting||0!==event.button||event.target!==container.current||!containerBounds.current)return;event.target?.setPointerCapture?.(event.pointerId),selectionStarted.current=!0,selectionInProgress.current=!1;const{x,y}=(0,esm.q1)(event.nativeEvent,containerBounds.current);resetSelectedElements(),store.setState({userSelectionRect:{width:0,height:0,startX:x,startY:y,x,y}}),onSelectionStart?.(event)}:onPaneMouseMove,onPointerMove:hasActiveSelection?event=>{const{userSelectionRect,transform,nodeLookup,edgeLookup,connectionLookup,triggerNodeChanges,triggerEdgeChanges,defaultEdgeOptions}=store.getState();if(!containerBounds.current||!userSelectionRect)return;selectionInProgress.current=!0;const{x:mouseX,y:mouseY}=(0,esm.q1)(event.nativeEvent,containerBounds.current),{startX,startY}=userSelectionRect,nextUserSelectRect={startX,startY,x:mouseX<startX?mouseX:startX,y:mouseY<startY?mouseY:startY,width:Math.abs(mouseX-startX),height:Math.abs(mouseY-startY)},prevSelectedNodeIds=selectedNodeIds.current,prevSelectedEdgeIds=selectedEdgeIds.current;selectedNodeIds.current=new Set((0,esm.U$)(nodeLookup,nextUserSelectRect,transform,selectionMode===esm.Qc.Partial,!0).map(node=>node.id)),selectedEdgeIds.current=new Set;const edgesSelectable=defaultEdgeOptions?.selectable??!0;for(const nodeId of selectedNodeIds.current){const connections=connectionLookup.get(nodeId);if(connections)for(const{edgeId}of connections.values()){const edge=edgeLookup.get(edgeId);edge&&(edge.selectable??edgesSelectable)&&selectedEdgeIds.current.add(edgeId)}}if(!(0,esm._s)(prevSelectedNodeIds,selectedNodeIds.current)){triggerNodeChanges(getSelectionChanges(nodeLookup,selectedNodeIds.current,!0))}if(!(0,esm._s)(prevSelectedEdgeIds,selectedEdgeIds.current)){triggerEdgeChanges(getSelectionChanges(edgeLookup,selectedEdgeIds.current))}store.setState({userSelectionRect:nextUserSelectRect,userSelectionActive:!0,nodesSelectionActive:!1})}:onPaneMouseMove,onPointerUp:hasActiveSelection?event=>{if(0!==event.button||!selectionStarted.current)return;event.target?.releasePointerCapture?.(event.pointerId);const{userSelectionRect}=store.getState();!userSelectionActive&&userSelectionRect&&event.target===container.current&&onClick?.(event),store.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:selectedNodeIds.current.size>0}),onSelectionEnd?.(event),(selectionKeyPressed||selectionOnDrag)&&(selectionInProgress.current=!1),selectionStarted.current=!1}:void 0,onPointerLeave:onPaneMouseLeave,ref:container,style:containerStyle,children:[children,(0,jsx_runtime.jsx)(UserSelection,{})]})}function handleNodeClick({id,store,unselect=!1,nodeRef}){const{addSelectedNodes,unselectNodesAndEdges,multiSelectionActive,nodeLookup,onError}=store.getState(),node=nodeLookup.get(id);node?(store.setState({nodesSelectionActive:!1}),node.selected?(unselect||node.selected&&multiSelectionActive)&&(unselectNodesAndEdges({nodes:[node],edges:[]}),requestAnimationFrame(()=>nodeRef?.current?.blur())):addSelectedNodes([id])):onError?.("012",esm.xc.error012(id))}function useDrag({nodeRef,disabled=!1,noDragClassName,handleSelector,nodeId,isSelectable,nodeClickDistance}){const store=useStoreApi(),[dragging,setDragging]=(0,react.useState)(!1),xyDrag=(0,react.useRef)();return(0,react.useEffect)(()=>{xyDrag.current=(0,esm.I$)({getStoreItems:()=>store.getState(),onNodeMouseDown:id=>{handleNodeClick({id,store,nodeRef})},onDragStart:()=>{setDragging(!0)},onDragStop:()=>{setDragging(!1)}})},[]),(0,react.useEffect)(()=>{if(disabled)xyDrag.current?.destroy();else if(nodeRef.current)return xyDrag.current?.update({noDragClassName,handleSelector,domNode:nodeRef.current,isSelectable,nodeId,nodeClickDistance}),()=>{xyDrag.current?.destroy()}},[noDragClassName,handleSelector,disabled,isSelectable,nodeRef,nodeId]),dragging}function useMoveSelectedNodes(){const store=useStoreApi();return(0,react.useCallback)(params=>{const{nodeExtent,snapToGrid,snapGrid,nodesDraggable,onError,updateNodePositions,nodeLookup,nodeOrigin}=store.getState(),nodeUpdates=new Map,isSelected=(nodesDraggable=>n=>n.selected&&(n.draggable||nodesDraggable&&void 0===n.draggable))(nodesDraggable),xVelo=snapToGrid?snapGrid[0]:5,yVelo=snapToGrid?snapGrid[1]:5,xDiff=params.direction.x*xVelo*params.factor,yDiff=params.direction.y*yVelo*params.factor;for(const[,node]of nodeLookup){if(!isSelected(node))continue;let nextPosition={x:node.internals.positionAbsolute.x+xDiff,y:node.internals.positionAbsolute.y+yDiff};snapToGrid&&(nextPosition=(0,esm.s_)(nextPosition,snapGrid));const{position,positionAbsolute}=(0,esm.aE)({nodeId:node.id,nextPosition,nodeLookup,nodeExtent,nodeOrigin,onError});node.position=position,node.internals.positionAbsolute=positionAbsolute,nodeUpdates.set(node.id,node)}updateNodePositions(nodeUpdates)},[])}const NodeIdContext=(0,react.createContext)(null),Provider=NodeIdContext.Provider;NodeIdContext.Consumer;const useNodeId=()=>(0,react.useContext)(NodeIdContext),selector$g=s=>({connectOnClick:s.connectOnClick,noPanClassName:s.noPanClassName,rfId:s.rfId});const Handle=(0,react.memo)(fixedForwardRef(function HandleComponent({type="source",position=esm.yX.Top,isValidConnection,isConnectable=!0,isConnectableStart=!0,isConnectableEnd=!0,id,onConnect,children,className,onMouseDown,onTouchStart,...rest},ref){const handleId=id||null,isTarget="target"===type,store=useStoreApi(),nodeId=useNodeId(),{connectOnClick,noPanClassName,rfId}=useStore(selector$g,shallow$1),{connectingFrom,connectingTo,clickConnecting,isPossibleEndHandle,connectionInProcess,clickConnectionInProcess,valid}=useStore(((nodeId,handleId,type)=>state=>{const{connectionClickStartHandle:clickHandle,connectionMode,connection}=state,{fromHandle,toHandle,isValid}=connection,connectingTo=toHandle?.nodeId===nodeId&&toHandle?.id===handleId&&toHandle?.type===type;return{connectingFrom:fromHandle?.nodeId===nodeId&&fromHandle?.id===handleId&&fromHandle?.type===type,connectingTo,clickConnecting:clickHandle?.nodeId===nodeId&&clickHandle?.id===handleId&&clickHandle?.type===type,isPossibleEndHandle:connectionMode===esm.WZ.Strict?fromHandle?.type!==type:nodeId!==fromHandle?.nodeId||handleId!==fromHandle?.id,connectionInProcess:!!fromHandle,clickConnectionInProcess:!!clickHandle,valid:connectingTo&&isValid}})(nodeId,handleId,type),shallow$1);nodeId||store.getState().onError?.("010",esm.xc.error010());const onConnectExtended=params=>{const{defaultEdgeOptions,onConnect:onConnectAction,hasDefaultEdges}=store.getState(),edgeParams={...defaultEdgeOptions,...params};if(hasDefaultEdges){const{edges,setEdges}=store.getState();setEdges((0,esm.rN)(edgeParams,edges))}onConnectAction?.(edgeParams),onConnect?.(edgeParams)},onPointerDown=event=>{if(!nodeId)return;const isMouseTriggered=(0,esm.Er)(event.nativeEvent);if(isConnectableStart&&(isMouseTriggered&&0===event.button||!isMouseTriggered)){const currentStore=store.getState();esm.aQ.onPointerDown(event.nativeEvent,{autoPanOnConnect:currentStore.autoPanOnConnect,connectionMode:currentStore.connectionMode,connectionRadius:currentStore.connectionRadius,domNode:currentStore.domNode,nodeLookup:currentStore.nodeLookup,lib:currentStore.lib,isTarget,handleId,nodeId,flowId:currentStore.rfId,panBy:currentStore.panBy,cancelConnection:currentStore.cancelConnection,onConnectStart:currentStore.onConnectStart,onConnectEnd:currentStore.onConnectEnd,updateConnection:currentStore.updateConnection,onConnect:onConnectExtended,isValidConnection:isValidConnection||currentStore.isValidConnection,getTransform:()=>store.getState().transform,getFromHandle:()=>store.getState().connection.fromHandle,autoPanSpeed:currentStore.autoPanSpeed,dragThreshold:currentStore.connectionDragThreshold})}isMouseTriggered?onMouseDown?.(event):onTouchStart?.(event)};return(0,jsx_runtime.jsx)("div",{"data-handleid":handleId,"data-nodeid":nodeId,"data-handlepos":position,"data-id":`${rfId}-${nodeId}-${handleId}-${type}`,className:classcat_cc(["react-flow__handle",`react-flow__handle-${position}`,"nodrag",noPanClassName,className,{source:!isTarget,target:isTarget,connectable:isConnectable,connectablestart:isConnectableStart,connectableend:isConnectableEnd,clickconnecting:clickConnecting,connectingfrom:connectingFrom,connectingto:connectingTo,valid,connectionindicator:isConnectable&&(!connectionInProcess||isPossibleEndHandle)&&(connectionInProcess||clickConnectionInProcess?isConnectableEnd:isConnectableStart)}]),onMouseDown:onPointerDown,onTouchStart:onPointerDown,onClick:connectOnClick?event=>{const{onClickConnectStart,onClickConnectEnd,connectionClickStartHandle,connectionMode,isValidConnection:isValidConnectionStore,lib,rfId:flowId,nodeLookup,connection:connectionState}=store.getState();if(!nodeId||!connectionClickStartHandle&&!isConnectableStart)return;if(!connectionClickStartHandle)return onClickConnectStart?.(event.nativeEvent,{nodeId,handleId,handleType:type}),void store.setState({connectionClickStartHandle:{nodeId,type,id:handleId}});const doc=(0,esm.oj)(event.target),isValidConnectionHandler=isValidConnection||isValidConnectionStore,{connection,isValid}=esm.aQ.isValid(event.nativeEvent,{handle:{nodeId,id:handleId,type},connectionMode,fromNodeId:connectionClickStartHandle.nodeId,fromHandleId:connectionClickStartHandle.id||null,fromType:connectionClickStartHandle.type,isValidConnection:isValidConnectionHandler,flowId,doc,lib,nodeLookup});isValid&&connection&&onConnectExtended(connection);const connectionClone=structuredClone(connectionState);delete connectionClone.inProgress,connectionClone.toPosition=connectionClone.toHandle?connectionClone.toHandle.position:null,onClickConnectEnd?.(event,connectionClone),store.setState({connectionClickStartHandle:null})}:void 0,ref,...rest,children})}));const arrowKeyDiffs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},builtinNodeTypes={input:function InputNode({data,isConnectable,sourcePosition=esm.yX.Bottom}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[data?.label,(0,jsx_runtime.jsx)(Handle,{type:"source",position:sourcePosition,isConnectable})]})},default:function DefaultNode({data,isConnectable,targetPosition=esm.yX.Top,sourcePosition=esm.yX.Bottom}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Handle,{type:"target",position:targetPosition,isConnectable}),data?.label,(0,jsx_runtime.jsx)(Handle,{type:"source",position:sourcePosition,isConnectable})]})},output:function OutputNode({data,isConnectable,targetPosition=esm.yX.Top}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Handle,{type:"target",position:targetPosition,isConnectable}),data?.label]})},group:function GroupNode(){return null}};const selector$f=s=>{const{width,height,x,y}=(0,esm.aZ)(s.nodeLookup,{filter:node=>!!node.selected});return{width:(0,esm.kf)(width)?width:null,height:(0,esm.kf)(height)?height:null,userSelectionActive:s.userSelectionActive,transformString:`translate(${s.transform[0]}px,${s.transform[1]}px) scale(${s.transform[2]}) translate(${x}px,${y}px)`}};function NodesSelection({onSelectionContextMenu,noPanClassName,disableKeyboardA11y}){const store=useStoreApi(),{width,height,transformString,userSelectionActive}=useStore(selector$f,shallow$1),moveSelectedNodes=useMoveSelectedNodes(),nodeRef=(0,react.useRef)(null);if((0,react.useEffect)(()=>{disableKeyboardA11y||nodeRef.current?.focus({preventScroll:!0})},[disableKeyboardA11y]),useDrag({nodeRef}),userSelectionActive||!width||!height)return null;const onContextMenu=onSelectionContextMenu?event=>{const selectedNodes=store.getState().nodes.filter(n=>n.selected);onSelectionContextMenu(event,selectedNodes)}:void 0;return(0,jsx_runtime.jsx)("div",{className:classcat_cc(["react-flow__nodesselection","react-flow__container",noPanClassName]),style:{transform:transformString},children:(0,jsx_runtime.jsx)("div",{ref:nodeRef,className:"react-flow__nodesselection-rect",onContextMenu,tabIndex:disableKeyboardA11y?void 0:-1,onKeyDown:disableKeyboardA11y?void 0:event=>{Object.prototype.hasOwnProperty.call(arrowKeyDiffs,event.key)&&(event.preventDefault(),moveSelectedNodes({direction:arrowKeyDiffs[event.key],factor:event.shiftKey?4:1}))},style:{width,height}})})}const win="undefined"!=typeof window?window:void 0,selector$e=s=>({nodesSelectionActive:s.nodesSelectionActive,userSelectionActive:s.userSelectionActive});function FlowRendererComponent({children,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneContextMenu,onPaneScroll,paneClickDistance,deleteKeyCode,selectionKeyCode,selectionOnDrag,selectionMode,onSelectionStart,onSelectionEnd,multiSelectionKeyCode,panActivationKeyCode,zoomActivationKeyCode,elementsSelectable,zoomOnScroll,zoomOnPinch,panOnScroll:_panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag:_panOnDrag,defaultViewport,translateExtent,minZoom,maxZoom,preventScrolling,onSelectionContextMenu,noWheelClassName,noPanClassName,disableKeyboardA11y,onViewportChange,isControlledViewport}){const{nodesSelectionActive,userSelectionActive}=useStore(selector$e),selectionKeyPressed=useKeyPress(selectionKeyCode,{target:win}),panActivationKeyPressed=useKeyPress(panActivationKeyCode,{target:win}),panOnDrag=panActivationKeyPressed||_panOnDrag,panOnScroll=panActivationKeyPressed||_panOnScroll,_selectionOnDrag=selectionOnDrag&&!0!==panOnDrag,isSelecting=selectionKeyPressed||userSelectionActive||_selectionOnDrag;return function useGlobalKeyHandler({deleteKeyCode,multiSelectionKeyCode}){const store=useStoreApi(),{deleteElements}=useReactFlow(),deleteKeyPressed=useKeyPress(deleteKeyCode,{actInsideInputWithModifier:!1}),multiSelectionKeyPressed=useKeyPress(multiSelectionKeyCode,{target:win$1});(0,react.useEffect)(()=>{if(deleteKeyPressed){const{edges,nodes}=store.getState();deleteElements({nodes:nodes.filter(selected),edges:edges.filter(selected)}),store.setState({nodesSelectionActive:!1})}},[deleteKeyPressed]),(0,react.useEffect)(()=>{store.setState({multiSelectionActive:multiSelectionKeyPressed})},[multiSelectionKeyPressed])}({deleteKeyCode,multiSelectionKeyCode}),(0,jsx_runtime.jsx)(ZoomPane,{onPaneContextMenu,elementsSelectable,zoomOnScroll,zoomOnPinch,panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag:!selectionKeyPressed&&panOnDrag,defaultViewport,translateExtent,minZoom,maxZoom,zoomActivationKeyCode,preventScrolling,noWheelClassName,noPanClassName,onViewportChange,isControlledViewport,paneClickDistance,children:(0,jsx_runtime.jsxs)(Pane,{onSelectionStart,onSelectionEnd,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneContextMenu,onPaneScroll,panOnDrag,isSelecting:!!isSelecting,selectionMode,selectionKeyPressed,selectionOnDrag:_selectionOnDrag,children:[children,nodesSelectionActive&&(0,jsx_runtime.jsx)(NodesSelection,{onSelectionContextMenu,noPanClassName,disableKeyboardA11y})]})})}FlowRendererComponent.displayName="FlowRenderer";const FlowRenderer=(0,react.memo)(FlowRendererComponent);function useVisibleNodeIds(onlyRenderVisible){return useStore((0,react.useCallback)((onlyRenderVisible=>s=>onlyRenderVisible?(0,esm.U$)(s.nodeLookup,{x:0,y:0,width:s.width,height:s.height},s.transform,!0).map(node=>node.id):Array.from(s.nodeLookup.keys()))(onlyRenderVisible),[onlyRenderVisible]),shallow$1)}const selector$c=s=>s.updateNodeInternals;function NodeWrapper({id,onClick,onMouseEnter,onMouseMove,onMouseLeave,onContextMenu,onDoubleClick,nodesDraggable,elementsSelectable,nodesConnectable,nodesFocusable,resizeObserver,noDragClassName,noPanClassName,disableKeyboardA11y,rfId,nodeTypes,nodeClickDistance,onError}){const{node,internals,isParent}=useStore(s=>{const node=s.nodeLookup.get(id),isParent=s.parentLookup.has(id);return{node,internals:node.internals,isParent}},shallow$1);let nodeType=node.type||"default",NodeComponent=nodeTypes?.[nodeType]||builtinNodeTypes[nodeType];void 0===NodeComponent&&(onError?.("003",esm.xc.error003(nodeType)),nodeType="default",NodeComponent=nodeTypes?.default||builtinNodeTypes.default);const isDraggable=!!(node.draggable||nodesDraggable&&void 0===node.draggable),isSelectable=!!(node.selectable||elementsSelectable&&void 0===node.selectable),isConnectable=!!(node.connectable||nodesConnectable&&void 0===node.connectable),isFocusable=!!(node.focusable||nodesFocusable&&void 0===node.focusable),store=useStoreApi(),hasDimensions=(0,esm.QE)(node),nodeRef=function useNodeObserver({node,nodeType,hasDimensions,resizeObserver}){const store=useStoreApi(),nodeRef=(0,react.useRef)(null),observedNode=(0,react.useRef)(null),prevSourcePosition=(0,react.useRef)(node.sourcePosition),prevTargetPosition=(0,react.useRef)(node.targetPosition),prevType=(0,react.useRef)(nodeType),isInitialized=hasDimensions&&!!node.internals.handleBounds;return(0,react.useEffect)(()=>{!nodeRef.current||node.hidden||isInitialized&&observedNode.current===nodeRef.current||(observedNode.current&&resizeObserver?.unobserve(observedNode.current),resizeObserver?.observe(nodeRef.current),observedNode.current=nodeRef.current)},[isInitialized,node.hidden]),(0,react.useEffect)(()=>()=>{observedNode.current&&(resizeObserver?.unobserve(observedNode.current),observedNode.current=null)},[]),(0,react.useEffect)(()=>{if(nodeRef.current){const typeChanged=prevType.current!==nodeType,sourcePosChanged=prevSourcePosition.current!==node.sourcePosition,targetPosChanged=prevTargetPosition.current!==node.targetPosition;(typeChanged||sourcePosChanged||targetPosChanged)&&(prevType.current=nodeType,prevSourcePosition.current=node.sourcePosition,prevTargetPosition.current=node.targetPosition,store.getState().updateNodeInternals(new Map([[node.id,{id:node.id,nodeElement:nodeRef.current,force:!0}]])))}},[node.id,nodeType,node.sourcePosition,node.targetPosition]),nodeRef}({node,nodeType,hasDimensions,resizeObserver}),dragging=useDrag({nodeRef,disabled:node.hidden||!isDraggable,noDragClassName,handleSelector:node.dragHandle,nodeId:id,isSelectable,nodeClickDistance}),moveSelectedNodes=useMoveSelectedNodes();if(node.hidden)return null;const nodeDimensions=(0,esm.uD)(node),inlineDimensions=function getNodeInlineStyleDimensions(node){return void 0===node.internals.handleBounds?{width:node.width??node.initialWidth??node.style?.width,height:node.height??node.initialHeight??node.style?.height}:{width:node.width??node.style?.width,height:node.height??node.style?.height}}(node),hasPointerEvents=isSelectable||isDraggable||onClick||onMouseEnter||onMouseMove||onMouseLeave,onMouseEnterHandler=onMouseEnter?event=>onMouseEnter(event,{...internals.userNode}):void 0,onMouseMoveHandler=onMouseMove?event=>onMouseMove(event,{...internals.userNode}):void 0,onMouseLeaveHandler=onMouseLeave?event=>onMouseLeave(event,{...internals.userNode}):void 0,onContextMenuHandler=onContextMenu?event=>onContextMenu(event,{...internals.userNode}):void 0,onDoubleClickHandler=onDoubleClick?event=>onDoubleClick(event,{...internals.userNode}):void 0;return(0,jsx_runtime.jsx)("div",{className:classcat_cc(["react-flow__node",`react-flow__node-${nodeType}`,{[noPanClassName]:isDraggable},node.className,{selected:node.selected,selectable:isSelectable,parent:isParent,draggable:isDraggable,dragging}]),ref:nodeRef,style:{zIndex:internals.z,transform:`translate(${internals.positionAbsolute.x}px,${internals.positionAbsolute.y}px)`,pointerEvents:hasPointerEvents?"all":"none",visibility:hasDimensions?"visible":"hidden",...node.style,...inlineDimensions},"data-id":id,"data-testid":`rf__node-${id}`,onMouseEnter:onMouseEnterHandler,onMouseMove:onMouseMoveHandler,onMouseLeave:onMouseLeaveHandler,onContextMenu:onContextMenuHandler,onClick:event=>{const{selectNodesOnDrag,nodeDragThreshold}=store.getState();isSelectable&&(!selectNodesOnDrag||!isDraggable||nodeDragThreshold>0)&&handleNodeClick({id,store,nodeRef}),onClick&&onClick(event,{...internals.userNode})},onDoubleClick:onDoubleClickHandler,onKeyDown:isFocusable?event=>{if(!(0,esm.v5)(event.nativeEvent)&&!disableKeyboardA11y)if(esm.tn.includes(event.key)&&isSelectable){const unselect="Escape"===event.key;handleNodeClick({id,store,unselect,nodeRef})}else if(isDraggable&&node.selected&&Object.prototype.hasOwnProperty.call(arrowKeyDiffs,event.key)){event.preventDefault();const{ariaLabelConfig}=store.getState();store.setState({ariaLiveMessage:ariaLabelConfig["node.a11yDescription.ariaLiveMessage"]({direction:event.key.replace("Arrow","").toLowerCase(),x:~~internals.positionAbsolute.x,y:~~internals.positionAbsolute.y})}),moveSelectedNodes({direction:arrowKeyDiffs[event.key],factor:event.shiftKey?4:1})}}:void 0,tabIndex:isFocusable?0:void 0,onFocus:isFocusable?()=>{if(disableKeyboardA11y||!nodeRef.current?.matches(":focus-visible"))return;const{transform,width,height,autoPanOnNodeFocus,setCenter}=store.getState();if(!autoPanOnNodeFocus)return;(0,esm.U$)(new Map([[id,node]]),{x:0,y:0,width,height},transform,!0).length>0||setCenter(node.position.x+nodeDimensions.width/2,node.position.y+nodeDimensions.height/2,{zoom:transform[2]})}:void 0,role:node.ariaRole??(isFocusable?"group":void 0),"aria-roledescription":"node","aria-describedby":disableKeyboardA11y?void 0:`react-flow__node-desc-${rfId}`,"aria-label":node.ariaLabel,...node.domAttributes,children:(0,jsx_runtime.jsx)(Provider,{value:id,children:(0,jsx_runtime.jsx)(NodeComponent,{id,data:node.data,type:nodeType,positionAbsoluteX:internals.positionAbsolute.x,positionAbsoluteY:internals.positionAbsolute.y,selected:node.selected??!1,selectable:isSelectable,draggable:isDraggable,deletable:node.deletable??!0,isConnectable,sourcePosition:node.sourcePosition,targetPosition:node.targetPosition,dragging,dragHandle:node.dragHandle,zIndex:internals.z,parentId:node.parentId,...nodeDimensions})})})}const selector$b=s=>({nodesDraggable:s.nodesDraggable,nodesConnectable:s.nodesConnectable,nodesFocusable:s.nodesFocusable,elementsSelectable:s.elementsSelectable,onError:s.onError});function NodeRendererComponent(props){const{nodesDraggable,nodesConnectable,nodesFocusable,elementsSelectable,onError}=useStore(selector$b,shallow$1),nodeIds=useVisibleNodeIds(props.onlyRenderVisibleElements),resizeObserver=function useResizeObserver(){const updateNodeInternals=useStore(selector$c),[resizeObserver]=(0,react.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(entries=>{const updates=new Map;entries.forEach(entry=>{const id=entry.target.getAttribute("data-id");updates.set(id,{id,nodeElement:entry.target,force:!0})}),updateNodeInternals(updates)}));return(0,react.useEffect)(()=>()=>{resizeObserver?.disconnect()},[resizeObserver]),resizeObserver}();return(0,jsx_runtime.jsx)("div",{className:"react-flow__nodes",style:containerStyle,children:nodeIds.map(nodeId=>(0,jsx_runtime.jsx)(NodeWrapper,{id:nodeId,nodeTypes:props.nodeTypes,nodeExtent:props.nodeExtent,onClick:props.onNodeClick,onMouseEnter:props.onNodeMouseEnter,onMouseMove:props.onNodeMouseMove,onMouseLeave:props.onNodeMouseLeave,onContextMenu:props.onNodeContextMenu,onDoubleClick:props.onNodeDoubleClick,noDragClassName:props.noDragClassName,noPanClassName:props.noPanClassName,rfId:props.rfId,disableKeyboardA11y:props.disableKeyboardA11y,resizeObserver,nodesDraggable,nodesConnectable,nodesFocusable,elementsSelectable,nodeClickDistance:props.nodeClickDistance,onError},nodeId))})}NodeRendererComponent.displayName="NodeRenderer";const NodeRenderer=(0,react.memo)(NodeRendererComponent);const MarkerSymbols={[esm.TG.Arrow]:({color="none",strokeWidth=1})=>(0,jsx_runtime.jsx)("polyline",{style:{stroke:color,strokeWidth},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[esm.TG.ArrowClosed]:({color="none",strokeWidth=1})=>(0,jsx_runtime.jsx)("polyline",{style:{stroke:color,fill:color,strokeWidth},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const Marker=({id,type,color,width=12.5,height=12.5,markerUnits="strokeWidth",strokeWidth,orient="auto-start-reverse"})=>{const Symbol=function useMarkerSymbol(type){const store=useStoreApi();return(0,react.useMemo)(()=>Object.prototype.hasOwnProperty.call(MarkerSymbols,type)?MarkerSymbols[type]:(store.getState().onError?.("009",esm.xc.error009(type)),null),[type])}(type);return Symbol?(0,jsx_runtime.jsx)("marker",{className:"react-flow__arrowhead",id,markerWidth:`${width}`,markerHeight:`${height}`,viewBox:"-10 -10 20 20",markerUnits,orient,refX:"0",refY:"0",children:(0,jsx_runtime.jsx)(Symbol,{color,strokeWidth})}):null},MarkerDefinitions=({defaultColor,rfId})=>{const edges=useStore(s=>s.edges),defaultEdgeOptions=useStore(s=>s.defaultEdgeOptions),markers=(0,react.useMemo)(()=>(0,esm.Hm)(edges,{id:rfId,defaultColor,defaultMarkerStart:defaultEdgeOptions?.markerStart,defaultMarkerEnd:defaultEdgeOptions?.markerEnd}),[edges,defaultEdgeOptions,rfId,defaultColor]);return markers.length?(0,jsx_runtime.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,jsx_runtime.jsx)("defs",{children:markers.map(marker=>(0,jsx_runtime.jsx)(Marker,{id:marker.id,type:marker.type,color:marker.color,width:marker.width,height:marker.height,markerUnits:marker.markerUnits,strokeWidth:marker.strokeWidth,orient:marker.orient},marker.id))})}):null};MarkerDefinitions.displayName="MarkerDefinitions";var MarkerDefinitions$1=(0,react.memo)(MarkerDefinitions);function EdgeTextComponent({x,y,label,labelStyle,labelShowBg=!0,labelBgStyle,labelBgPadding=[2,4],labelBgBorderRadius=2,children,className,...rest}){const[edgeTextBbox,setEdgeTextBbox]=(0,react.useState)({x:1,y:0,width:0,height:0}),edgeTextClasses=classcat_cc(["react-flow__edge-textwrapper",className]),edgeTextRef=(0,react.useRef)(null);return(0,react.useEffect)(()=>{if(edgeTextRef.current){const textBbox=edgeTextRef.current.getBBox();setEdgeTextBbox({x:textBbox.x,y:textBbox.y,width:textBbox.width,height:textBbox.height})}},[label]),label?(0,jsx_runtime.jsxs)("g",{transform:`translate(${x-edgeTextBbox.width/2} ${y-edgeTextBbox.height/2})`,className:edgeTextClasses,visibility:edgeTextBbox.width?"visible":"hidden",...rest,children:[labelShowBg&&(0,jsx_runtime.jsx)("rect",{width:edgeTextBbox.width+2*labelBgPadding[0],x:-labelBgPadding[0],y:-labelBgPadding[1],height:edgeTextBbox.height+2*labelBgPadding[1],className:"react-flow__edge-textbg",style:labelBgStyle,rx:labelBgBorderRadius,ry:labelBgBorderRadius}),(0,jsx_runtime.jsx)("text",{className:"react-flow__edge-text",y:edgeTextBbox.height/2,dy:"0.3em",ref:edgeTextRef,style:labelStyle,children:label}),children]}):null}EdgeTextComponent.displayName="EdgeText";const EdgeText=(0,react.memo)(EdgeTextComponent);function BaseEdge({path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,interactionWidth=20,...props}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("path",{...props,d:path,fill:"none",className:classcat_cc(["react-flow__edge-path",props.className])}),interactionWidth&&(0,jsx_runtime.jsx)("path",{d:path,fill:"none",strokeOpacity:0,strokeWidth:interactionWidth,className:"react-flow__edge-interaction"}),label&&(0,esm.kf)(labelX)&&(0,esm.kf)(labelY)?(0,jsx_runtime.jsx)(EdgeText,{x:labelX,y:labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius}):null]})}function getControl({pos,x1,y1,x2,y2}){return pos===esm.yX.Left||pos===esm.yX.Right?[.5*(x1+x2),y1]:[x1,.5*(y1+y2)]}function getSimpleBezierPath({sourceX,sourceY,sourcePosition=esm.yX.Bottom,targetX,targetY,targetPosition=esm.yX.Top}){const[sourceControlX,sourceControlY]=getControl({pos:sourcePosition,x1:sourceX,y1:sourceY,x2:targetX,y2:targetY}),[targetControlX,targetControlY]=getControl({pos:targetPosition,x1:targetX,y1:targetY,x2:sourceX,y2:sourceY}),[labelX,labelY,offsetX,offsetY]=(0,esm.e_)({sourceX,sourceY,targetX,targetY,sourceControlX,sourceControlY,targetControlX,targetControlY});return[`M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,labelX,labelY,offsetX,offsetY]}function createSimpleBezierEdge(params){return(0,react.memo)(({id,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style,markerEnd,markerStart,interactionWidth})=>{const[path,labelX,labelY]=getSimpleBezierPath({sourceX,sourceY,sourcePosition,targetX,targetY,targetPosition}),_id=params.isInternal?void 0:id;return(0,jsx_runtime.jsx)(BaseEdge,{id:_id,path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style,markerEnd,markerStart,interactionWidth})})}const SimpleBezierEdge=createSimpleBezierEdge({isInternal:!1}),SimpleBezierEdgeInternal=createSimpleBezierEdge({isInternal:!0});function createSmoothStepEdge(params){return(0,react.memo)(({id,sourceX,sourceY,targetX,targetY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style,sourcePosition=esm.yX.Bottom,targetPosition=esm.yX.Top,markerEnd,markerStart,pathOptions,interactionWidth})=>{const[path,labelX,labelY]=(0,esm.oN)({sourceX,sourceY,sourcePosition,targetX,targetY,targetPosition,borderRadius:pathOptions?.borderRadius,offset:pathOptions?.offset,stepPosition:pathOptions?.stepPosition}),_id=params.isInternal?void 0:id;return(0,jsx_runtime.jsx)(BaseEdge,{id:_id,path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style,markerEnd,markerStart,interactionWidth})})}SimpleBezierEdge.displayName="SimpleBezierEdge",SimpleBezierEdgeInternal.displayName="SimpleBezierEdgeInternal";const SmoothStepEdge=createSmoothStepEdge({isInternal:!1}),SmoothStepEdgeInternal=createSmoothStepEdge({isInternal:!0});function createStepEdge(params){return(0,react.memo)(({id,...props})=>{const _id=params.isInternal?void 0:id;return(0,jsx_runtime.jsx)(SmoothStepEdge,{...props,id:_id,pathOptions:(0,react.useMemo)(()=>({borderRadius:0,offset:props.pathOptions?.offset}),[props.pathOptions?.offset])})})}SmoothStepEdge.displayName="SmoothStepEdge",SmoothStepEdgeInternal.displayName="SmoothStepEdgeInternal";const StepEdge=createStepEdge({isInternal:!1}),StepEdgeInternal=createStepEdge({isInternal:!0});function createStraightEdge(params){return(0,react.memo)(({id,sourceX,sourceY,targetX,targetY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style,markerEnd,markerStart,interactionWidth})=>{const[path,labelX,labelY]=(0,esm.ah)({sourceX,sourceY,targetX,targetY}),_id=params.isInternal?void 0:id;return(0,jsx_runtime.jsx)(BaseEdge,{id:_id,path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style,markerEnd,markerStart,interactionWidth})})}StepEdge.displayName="StepEdge",StepEdgeInternal.displayName="StepEdgeInternal";const StraightEdge=createStraightEdge({isInternal:!1}),StraightEdgeInternal=createStraightEdge({isInternal:!0});function createBezierEdge(params){return(0,react.memo)(({id,sourceX,sourceY,targetX,targetY,sourcePosition=esm.yX.Bottom,targetPosition=esm.yX.Top,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style,markerEnd,markerStart,pathOptions,interactionWidth})=>{const[path,labelX,labelY]=(0,esm.Fp)({sourceX,sourceY,sourcePosition,targetX,targetY,targetPosition,curvature:pathOptions?.curvature}),_id=params.isInternal?void 0:id;return(0,jsx_runtime.jsx)(BaseEdge,{id:_id,path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style,markerEnd,markerStart,interactionWidth})})}StraightEdge.displayName="StraightEdge",StraightEdgeInternal.displayName="StraightEdgeInternal";const BezierEdge=createBezierEdge({isInternal:!1}),BezierEdgeInternal=createBezierEdge({isInternal:!0});BezierEdge.displayName="BezierEdge",BezierEdgeInternal.displayName="BezierEdgeInternal";const builtinEdgeTypes={default:BezierEdgeInternal,straight:StraightEdgeInternal,step:StepEdgeInternal,smoothstep:SmoothStepEdgeInternal,simplebezier:SimpleBezierEdgeInternal},nullPosition={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},shiftX=(x,shift,position)=>position===esm.yX.Left?x-shift:position===esm.yX.Right?x+shift:x,shiftY=(y,shift,position)=>position===esm.yX.Top?y-shift:position===esm.yX.Bottom?y+shift:y;function EdgeAnchor({position,centerX,centerY,radius=10,onMouseDown,onMouseEnter,onMouseOut,type}){return(0,jsx_runtime.jsx)("circle",{onMouseDown,onMouseEnter,onMouseOut,className:classcat_cc(["react-flow__edgeupdater",`react-flow__edgeupdater-${type}`]),cx:shiftX(centerX,radius,position),cy:shiftY(centerY,radius,position),r:radius,stroke:"transparent",fill:"transparent"})}function EdgeUpdateAnchors({isReconnectable,reconnectRadius,edge,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition,onReconnect,onReconnectStart,onReconnectEnd,setReconnecting,setUpdateHover}){const store=useStoreApi(),handleEdgeUpdater=(event,oppositeHandle)=>{if(0!==event.button)return;const{autoPanOnConnect,domNode,isValidConnection,connectionMode,connectionRadius,lib,onConnectStart,onConnectEnd,cancelConnection,nodeLookup,rfId:flowId,panBy,updateConnection}=store.getState(),isTarget="target"===oppositeHandle.type;esm.aQ.onPointerDown(event.nativeEvent,{autoPanOnConnect,connectionMode,connectionRadius,domNode,handleId:oppositeHandle.id,nodeId:oppositeHandle.nodeId,nodeLookup,isTarget,edgeUpdaterType:oppositeHandle.type,lib,flowId,cancelConnection,panBy,isValidConnection,onConnect:connection=>onReconnect?.(edge,connection),onConnectStart:(_event,params)=>{setReconnecting(!0),onReconnectStart?.(event,edge,oppositeHandle.type),onConnectStart?.(_event,params)},onConnectEnd,onReconnectEnd:(evt,connectionState)=>{setReconnecting(!1),onReconnectEnd?.(evt,edge,oppositeHandle.type,connectionState)},updateConnection,getTransform:()=>store.getState().transform,getFromHandle:()=>store.getState().connection.fromHandle,dragThreshold:store.getState().connectionDragThreshold})},onReconnectMouseEnter=()=>setUpdateHover(!0),onReconnectMouseOut=()=>setUpdateHover(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(!0===isReconnectable||"source"===isReconnectable)&&(0,jsx_runtime.jsx)(EdgeAnchor,{position:sourcePosition,centerX:sourceX,centerY:sourceY,radius:reconnectRadius,onMouseDown:event=>handleEdgeUpdater(event,{nodeId:edge.target,id:edge.targetHandle??null,type:"target"}),onMouseEnter:onReconnectMouseEnter,onMouseOut:onReconnectMouseOut,type:"source"}),(!0===isReconnectable||"target"===isReconnectable)&&(0,jsx_runtime.jsx)(EdgeAnchor,{position:targetPosition,centerX:targetX,centerY:targetY,radius:reconnectRadius,onMouseDown:event=>handleEdgeUpdater(event,{nodeId:edge.source,id:edge.sourceHandle??null,type:"source"}),onMouseEnter:onReconnectMouseEnter,onMouseOut:onReconnectMouseOut,type:"target"})]})}function EdgeWrapper({id,edgesFocusable,edgesReconnectable,elementsSelectable,onClick,onDoubleClick,onContextMenu,onMouseEnter,onMouseMove,onMouseLeave,reconnectRadius,onReconnect,onReconnectStart,onReconnectEnd,rfId,edgeTypes,noPanClassName,onError,disableKeyboardA11y}){let edge=useStore(s=>s.edgeLookup.get(id));const defaultEdgeOptions=useStore(s=>s.defaultEdgeOptions);edge=defaultEdgeOptions?{...defaultEdgeOptions,...edge}:edge;let edgeType=edge.type||"default",EdgeComponent=edgeTypes?.[edgeType]||builtinEdgeTypes[edgeType];void 0===EdgeComponent&&(onError?.("011",esm.xc.error011(edgeType)),edgeType="default",EdgeComponent=edgeTypes?.default||builtinEdgeTypes.default);const isFocusable=!!(edge.focusable||edgesFocusable&&void 0===edge.focusable),isReconnectable=void 0!==onReconnect&&(edge.reconnectable||edgesReconnectable&&void 0===edge.reconnectable),isSelectable=!!(edge.selectable||elementsSelectable&&void 0===edge.selectable),edgeRef=(0,react.useRef)(null),[updateHover,setUpdateHover]=(0,react.useState)(!1),[reconnecting,setReconnecting]=(0,react.useState)(!1),store=useStoreApi(),{zIndex,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition}=useStore((0,react.useCallback)(store=>{const sourceNode=store.nodeLookup.get(edge.source),targetNode=store.nodeLookup.get(edge.target);if(!sourceNode||!targetNode)return{zIndex:edge.zIndex,...nullPosition};const edgePosition=(0,esm.b5)({id,sourceNode,targetNode,sourceHandle:edge.sourceHandle||null,targetHandle:edge.targetHandle||null,connectionMode:store.connectionMode,onError});return{zIndex:(0,esm.qX)({selected:edge.selected,zIndex:edge.zIndex,sourceNode,targetNode,elevateOnSelect:store.elevateEdgesOnSelect}),...edgePosition||nullPosition}},[edge.source,edge.target,edge.sourceHandle,edge.targetHandle,edge.selected,edge.zIndex]),shallow$1),markerStartUrl=(0,react.useMemo)(()=>edge.markerStart?`url('#${(0,esm.aW)(edge.markerStart,rfId)}')`:void 0,[edge.markerStart,rfId]),markerEndUrl=(0,react.useMemo)(()=>edge.markerEnd?`url('#${(0,esm.aW)(edge.markerEnd,rfId)}')`:void 0,[edge.markerEnd,rfId]);if(edge.hidden||null===sourceX||null===sourceY||null===targetX||null===targetY)return null;const onEdgeDoubleClick=onDoubleClick?event=>{onDoubleClick(event,{...edge})}:void 0,onEdgeContextMenu=onContextMenu?event=>{onContextMenu(event,{...edge})}:void 0,onEdgeMouseEnter=onMouseEnter?event=>{onMouseEnter(event,{...edge})}:void 0,onEdgeMouseMove=onMouseMove?event=>{onMouseMove(event,{...edge})}:void 0,onEdgeMouseLeave=onMouseLeave?event=>{onMouseLeave(event,{...edge})}:void 0;return(0,jsx_runtime.jsx)("svg",{style:{zIndex},children:(0,jsx_runtime.jsxs)("g",{className:classcat_cc(["react-flow__edge",`react-flow__edge-${edgeType}`,edge.className,noPanClassName,{selected:edge.selected,animated:edge.animated,inactive:!isSelectable&&!onClick,updating:updateHover,selectable:isSelectable}]),onClick:event=>{const{addSelectedEdges,unselectNodesAndEdges,multiSelectionActive}=store.getState();isSelectable&&(store.setState({nodesSelectionActive:!1}),edge.selected&&multiSelectionActive?(unselectNodesAndEdges({nodes:[],edges:[edge]}),edgeRef.current?.blur()):addSelectedEdges([id])),onClick&&onClick(event,edge)},onDoubleClick:onEdgeDoubleClick,onContextMenu:onEdgeContextMenu,onMouseEnter:onEdgeMouseEnter,onMouseMove:onEdgeMouseMove,onMouseLeave:onEdgeMouseLeave,onKeyDown:isFocusable?event=>{if(!disableKeyboardA11y&&esm.tn.includes(event.key)&&isSelectable){const{unselectNodesAndEdges,addSelectedEdges}=store.getState();"Escape"===event.key?(edgeRef.current?.blur(),unselectNodesAndEdges({edges:[edge]})):addSelectedEdges([id])}}:void 0,tabIndex:isFocusable?0:void 0,role:edge.ariaRole??(isFocusable?"group":"img"),"aria-roledescription":"edge","data-id":id,"data-testid":`rf__edge-${id}`,"aria-label":null===edge.ariaLabel?void 0:edge.ariaLabel||`Edge from ${edge.source} to ${edge.target}`,"aria-describedby":isFocusable?`react-flow__edge-desc-${rfId}`:void 0,ref:edgeRef,...edge.domAttributes,children:[!reconnecting&&(0,jsx_runtime.jsx)(EdgeComponent,{id,source:edge.source,target:edge.target,type:edge.type,selected:edge.selected,animated:edge.animated,selectable:isSelectable,deletable:edge.deletable??!0,label:edge.label,labelStyle:edge.labelStyle,labelShowBg:edge.labelShowBg,labelBgStyle:edge.labelBgStyle,labelBgPadding:edge.labelBgPadding,labelBgBorderRadius:edge.labelBgBorderRadius,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition,data:edge.data,style:edge.style,sourceHandleId:edge.sourceHandle,targetHandleId:edge.targetHandle,markerStart:markerStartUrl,markerEnd:markerEndUrl,pathOptions:"pathOptions"in edge?edge.pathOptions:void 0,interactionWidth:edge.interactionWidth}),isReconnectable&&(0,jsx_runtime.jsx)(EdgeUpdateAnchors,{edge,isReconnectable,reconnectRadius,onReconnect,onReconnectStart,onReconnectEnd,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition,setUpdateHover,setReconnecting})]})})}const selector$a=s=>({edgesFocusable:s.edgesFocusable,edgesReconnectable:s.edgesReconnectable,elementsSelectable:s.elementsSelectable,connectionMode:s.connectionMode,onError:s.onError});function EdgeRendererComponent({defaultMarkerColor,onlyRenderVisibleElements,rfId,edgeTypes,noPanClassName,onReconnect,onEdgeContextMenu,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,onEdgeClick,reconnectRadius,onEdgeDoubleClick,onReconnectStart,onReconnectEnd,disableKeyboardA11y}){const{edgesFocusable,edgesReconnectable,elementsSelectable,onError}=useStore(selector$a,shallow$1),edgeIds=function useVisibleEdgeIds(onlyRenderVisible){return useStore((0,react.useCallback)(s=>{if(!onlyRenderVisible)return s.edges.map(edge=>edge.id);const visibleEdgeIds=[];if(s.width&&s.height)for(const edge of s.edges){const sourceNode=s.nodeLookup.get(edge.source),targetNode=s.nodeLookup.get(edge.target);sourceNode&&targetNode&&(0,esm.uj)({sourceNode,targetNode,width:s.width,height:s.height,transform:s.transform})&&visibleEdgeIds.push(edge.id)}return visibleEdgeIds},[onlyRenderVisible]),shallow$1)}(onlyRenderVisibleElements);return(0,jsx_runtime.jsxs)("div",{className:"react-flow__edges",children:[(0,jsx_runtime.jsx)(MarkerDefinitions$1,{defaultColor:defaultMarkerColor,rfId}),edgeIds.map(id=>(0,jsx_runtime.jsx)(EdgeWrapper,{id,edgesFocusable,edgesReconnectable,elementsSelectable,noPanClassName,onReconnect,onContextMenu:onEdgeContextMenu,onMouseEnter:onEdgeMouseEnter,onMouseMove:onEdgeMouseMove,onMouseLeave:onEdgeMouseLeave,onClick:onEdgeClick,reconnectRadius,onDoubleClick:onEdgeDoubleClick,onReconnectStart,onReconnectEnd,rfId,onError,edgeTypes,disableKeyboardA11y},id))]})}EdgeRendererComponent.displayName="EdgeRenderer";const EdgeRenderer=(0,react.memo)(EdgeRendererComponent),selector$9=s=>`translate(${s.transform[0]}px,${s.transform[1]}px) scale(${s.transform[2]})`;function Viewport({children}){const transform=useStore(selector$9);return(0,jsx_runtime.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform},children})}const selector$8=state=>state.panZoom?.syncViewport;function storeSelector$1(s){return s.connection.inProgress?{...s.connection,to:(0,esm.Ff)(s.connection.to,s.transform)}:{...s.connection}}function useConnection(connectionSelector){const combinedSelector=function getSelector(connectionSelector){if(connectionSelector)return s=>{const connection=storeSelector$1(s);return connectionSelector(connection)};return storeSelector$1}(connectionSelector);return useStore(combinedSelector,shallow$1)}const selector$7=s=>({nodesConnectable:s.nodesConnectable,isValid:s.connection.isValid,inProgress:s.connection.inProgress,width:s.width,height:s.height});function ConnectionLineWrapper({containerStyle,style,type,component}){const{nodesConnectable,width,height,isValid,inProgress}=useStore(selector$7,shallow$1);return!!(width&&nodesConnectable&&inProgress)?(0,jsx_runtime.jsx)("svg",{style:containerStyle,width,height,className:"react-flow__connectionline react-flow__container",children:(0,jsx_runtime.jsx)("g",{className:classcat_cc(["react-flow__connection",(0,esm.HF)(isValid)]),children:(0,jsx_runtime.jsx)(ConnectionLine,{style,type,CustomComponent:component,isValid})})}):null}const ConnectionLine=({style,type=esm.Do.Bezier,CustomComponent,isValid})=>{const{inProgress,from,fromNode,fromHandle,fromPosition,to,toNode,toHandle,toPosition}=useConnection();if(!inProgress)return;if(CustomComponent)return(0,jsx_runtime.jsx)(CustomComponent,{connectionLineType:type,connectionLineStyle:style,fromNode,fromHandle,fromX:from.x,fromY:from.y,toX:to.x,toY:to.y,fromPosition,toPosition,connectionStatus:(0,esm.HF)(isValid),toNode,toHandle});let path="";const pathParams={sourceX:from.x,sourceY:from.y,sourcePosition:fromPosition,targetX:to.x,targetY:to.y,targetPosition:toPosition};switch(type){case esm.Do.Bezier:[path]=(0,esm.Fp)(pathParams);break;case esm.Do.SimpleBezier:[path]=getSimpleBezierPath(pathParams);break;case esm.Do.Step:[path]=(0,esm.oN)({...pathParams,borderRadius:0});break;case esm.Do.SmoothStep:[path]=(0,esm.oN)(pathParams);break;default:[path]=(0,esm.ah)(pathParams)}return(0,jsx_runtime.jsx)("path",{d:path,fill:"none",className:"react-flow__connection-path",style})};ConnectionLine.displayName="ConnectionLine";const emptyTypes={};function useNodeOrEdgeTypesWarning(nodeOrEdgeTypes=emptyTypes){(0,react.useRef)(nodeOrEdgeTypes),useStoreApi();(0,react.useEffect)(()=>{0},[nodeOrEdgeTypes])}function GraphViewComponent({nodeTypes,edgeTypes,onInit,onNodeClick,onEdgeClick,onNodeDoubleClick,onEdgeDoubleClick,onNodeMouseEnter,onNodeMouseMove,onNodeMouseLeave,onNodeContextMenu,onSelectionContextMenu,onSelectionStart,onSelectionEnd,connectionLineType,connectionLineStyle,connectionLineComponent,connectionLineContainerStyle,selectionKeyCode,selectionOnDrag,selectionMode,multiSelectionKeyCode,panActivationKeyCode,zoomActivationKeyCode,deleteKeyCode,onlyRenderVisibleElements,elementsSelectable,defaultViewport,translateExtent,minZoom,maxZoom,preventScrolling,defaultMarkerColor,zoomOnScroll,zoomOnPinch,panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneScroll,onPaneContextMenu,paneClickDistance,nodeClickDistance,onEdgeContextMenu,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,reconnectRadius,onReconnect,onReconnectStart,onReconnectEnd,noDragClassName,noWheelClassName,noPanClassName,disableKeyboardA11y,nodeExtent,rfId,viewport,onViewportChange}){return useNodeOrEdgeTypesWarning(nodeTypes),useNodeOrEdgeTypesWarning(edgeTypes),function useStylesLoadedWarning(){useStoreApi(),(0,react.useRef)(!1),(0,react.useEffect)(()=>{},[])}(),function useOnInitHandler(onInit){const rfInstance=useReactFlow(),isInitialized=(0,react.useRef)(!1);(0,react.useEffect)(()=>{!isInitialized.current&&rfInstance.viewportInitialized&&onInit&&(setTimeout(()=>onInit(rfInstance),1),isInitialized.current=!0)},[onInit,rfInstance.viewportInitialized])}(onInit),function useViewportSync(viewport){const syncViewport=useStore(selector$8),store=useStoreApi();return(0,react.useEffect)(()=>{viewport&&(syncViewport?.(viewport),store.setState({transform:[viewport.x,viewport.y,viewport.zoom]}))},[viewport,syncViewport]),null}(viewport),(0,jsx_runtime.jsx)(FlowRenderer,{onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneContextMenu,onPaneScroll,paneClickDistance,deleteKeyCode,selectionKeyCode,selectionOnDrag,selectionMode,onSelectionStart,onSelectionEnd,multiSelectionKeyCode,panActivationKeyCode,zoomActivationKeyCode,elementsSelectable,zoomOnScroll,zoomOnPinch,zoomOnDoubleClick,panOnScroll,panOnScrollSpeed,panOnScrollMode,panOnDrag,defaultViewport,translateExtent,minZoom,maxZoom,onSelectionContextMenu,preventScrolling,noDragClassName,noWheelClassName,noPanClassName,disableKeyboardA11y,onViewportChange,isControlledViewport:!!viewport,children:(0,jsx_runtime.jsxs)(Viewport,{children:[(0,jsx_runtime.jsx)(EdgeRenderer,{edgeTypes,onEdgeClick,onEdgeDoubleClick,onReconnect,onReconnectStart,onReconnectEnd,onlyRenderVisibleElements,onEdgeContextMenu,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,reconnectRadius,defaultMarkerColor,noPanClassName,disableKeyboardA11y,rfId}),(0,jsx_runtime.jsx)(ConnectionLineWrapper,{style:connectionLineStyle,type:connectionLineType,component:connectionLineComponent,containerStyle:connectionLineContainerStyle}),(0,jsx_runtime.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,jsx_runtime.jsx)(NodeRenderer,{nodeTypes,onNodeClick,onNodeDoubleClick,onNodeMouseEnter,onNodeMouseMove,onNodeMouseLeave,onNodeContextMenu,nodeClickDistance,onlyRenderVisibleElements,noPanClassName,noDragClassName,disableKeyboardA11y,nodeExtent,rfId}),(0,jsx_runtime.jsx)("div",{className:"react-flow__viewport-portal"})]})})}GraphViewComponent.displayName="GraphView";const GraphView=(0,react.memo)(GraphViewComponent),getInitialState=({nodes,edges,defaultNodes,defaultEdges,width,height,fitView,fitViewOptions,minZoom=.5,maxZoom=2,nodeOrigin,nodeExtent}={})=>{const nodeLookup=new Map,parentLookup=new Map,connectionLookup=new Map,edgeLookup=new Map,storeEdges=defaultEdges??edges??[],storeNodes=defaultNodes??nodes??[],storeNodeOrigin=nodeOrigin??[0,0],storeNodeExtent=nodeExtent??esm.ZO;(0,esm.qn)(connectionLookup,edgeLookup,storeEdges);const nodesInitialized=(0,esm.bi)(storeNodes,nodeLookup,parentLookup,{nodeOrigin:storeNodeOrigin,nodeExtent:storeNodeExtent,elevateNodesOnSelect:!1});let transform=[0,0,1];if(fitView&&width&&height){const bounds=(0,esm.aZ)(nodeLookup,{filter:node=>!(!node.width&&!node.initialWidth||!node.height&&!node.initialHeight)}),{x,y,zoom}=(0,esm.R4)(bounds,width,height,minZoom,maxZoom,fitViewOptions?.padding??.1);transform=[x,y,zoom]}return{rfId:"1",width:0,height:0,transform,nodes:storeNodes,nodesInitialized,nodeLookup,parentLookup,edges:storeEdges,edgeLookup,connectionLookup,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==defaultNodes,hasDefaultEdges:void 0!==defaultEdges,panZoom:null,minZoom,maxZoom,translateExtent:esm.ZO,nodeExtent:storeNodeExtent,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:esm.WZ.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:storeNodeOrigin,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:fitView??!1,fitViewOptions,fitViewResolver:null,connection:{...esm.bK},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:esm.KE,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:esm.tM}},esm_createStore=({nodes,edges,defaultNodes,defaultEdges,width,height,fitView,fitViewOptions,minZoom,maxZoom,nodeOrigin,nodeExtent})=>{return createState=(set,get)=>{async function resolveFitView(){const{nodeLookup,panZoom,fitViewOptions,fitViewResolver,width,height,minZoom,maxZoom}=get();panZoom&&(await(0,esm.IO)({nodes:nodeLookup,width,height,panZoom,minZoom,maxZoom},fitViewOptions),fitViewResolver?.resolve(!0),set({fitViewResolver:null}))}return{...getInitialState({nodes,edges,width,height,fitView,fitViewOptions,minZoom,maxZoom,nodeOrigin,nodeExtent,defaultNodes,defaultEdges}),setNodes:nodes=>{const{nodeLookup,parentLookup,nodeOrigin,elevateNodesOnSelect,fitViewQueued}=get(),nodesInitialized=(0,esm.bi)(nodes,nodeLookup,parentLookup,{nodeOrigin,nodeExtent,elevateNodesOnSelect,checkEquality:!0});fitViewQueued&&nodesInitialized?(resolveFitView(),set({nodes,nodesInitialized,fitViewQueued:!1,fitViewOptions:void 0})):set({nodes,nodesInitialized})},setEdges:edges=>{const{connectionLookup,edgeLookup}=get();(0,esm.qn)(connectionLookup,edgeLookup,edges),set({edges})},setDefaultNodesAndEdges:(nodes,edges)=>{if(nodes){const{setNodes}=get();setNodes(nodes),set({hasDefaultNodes:!0})}if(edges){const{setEdges}=get();setEdges(edges),set({hasDefaultEdges:!0})}},updateNodeInternals:updates=>{const{triggerNodeChanges,nodeLookup,parentLookup,domNode,nodeOrigin,nodeExtent,debug,fitViewQueued}=get(),{changes,updatedInternals}=(0,esm.uL)(updates,nodeLookup,parentLookup,domNode,nodeOrigin,nodeExtent);updatedInternals&&((0,esm.vS)(nodeLookup,parentLookup,{nodeOrigin,nodeExtent}),fitViewQueued?(resolveFitView(),set({fitViewQueued:!1,fitViewOptions:void 0})):set({}),changes?.length>0&&(debug&&console.log("React Flow: trigger node changes",changes),triggerNodeChanges?.(changes)))},updateNodePositions:(nodeDragItems,dragging=!1)=>{const parentExpandChildren=[],changes=[],{nodeLookup,triggerNodeChanges}=get();for(const[id,dragItem]of nodeDragItems){const node=nodeLookup.get(id),expandParent=!!(node?.expandParent&&node?.parentId&&dragItem?.position),change={id,type:"position",position:expandParent?{x:Math.max(0,dragItem.position.x),y:Math.max(0,dragItem.position.y)}:dragItem.position,dragging};expandParent&&node.parentId&&parentExpandChildren.push({id,parentId:node.parentId,rect:{...dragItem.internals.positionAbsolute,width:dragItem.measured.width??0,height:dragItem.measured.height??0}}),changes.push(change)}if(parentExpandChildren.length>0){const{parentLookup,nodeOrigin}=get(),parentExpandChanges=(0,esm.r8)(parentExpandChildren,nodeLookup,parentLookup,nodeOrigin);changes.push(...parentExpandChanges)}triggerNodeChanges(changes)},triggerNodeChanges:changes=>{const{onNodesChange,setNodes,nodes,hasDefaultNodes,debug}=get();changes?.length&&(hasDefaultNodes&&setNodes(applyNodeChanges(changes,nodes)),debug&&console.log("React Flow: trigger node changes",changes),onNodesChange?.(changes))},triggerEdgeChanges:changes=>{const{onEdgesChange,setEdges,edges,hasDefaultEdges,debug}=get();changes?.length&&(hasDefaultEdges&&setEdges(applyEdgeChanges(changes,edges)),debug&&console.log("React Flow: trigger edge changes",changes),onEdgesChange?.(changes))},addSelectedNodes:selectedNodeIds=>{const{multiSelectionActive,edgeLookup,nodeLookup,triggerNodeChanges,triggerEdgeChanges}=get();multiSelectionActive?triggerNodeChanges(selectedNodeIds.map(nodeId=>createSelectionChange(nodeId,!0))):(triggerNodeChanges(getSelectionChanges(nodeLookup,new Set([...selectedNodeIds]),!0)),triggerEdgeChanges(getSelectionChanges(edgeLookup)))},addSelectedEdges:selectedEdgeIds=>{const{multiSelectionActive,edgeLookup,nodeLookup,triggerNodeChanges,triggerEdgeChanges}=get();multiSelectionActive?triggerEdgeChanges(selectedEdgeIds.map(edgeId=>createSelectionChange(edgeId,!0))):(triggerEdgeChanges(getSelectionChanges(edgeLookup,new Set([...selectedEdgeIds]))),triggerNodeChanges(getSelectionChanges(nodeLookup,new Set,!0)))},unselectNodesAndEdges:({nodes,edges}={})=>{const{edges:storeEdges,nodes:storeNodes,nodeLookup,triggerNodeChanges,triggerEdgeChanges}=get(),edgesToUnselect=edges||storeEdges,nodeChanges=(nodes||storeNodes).map(n=>{const internalNode=nodeLookup.get(n.id);return internalNode&&(internalNode.selected=!1),createSelectionChange(n.id,!1)}),edgeChanges=edgesToUnselect.map(edge=>createSelectionChange(edge.id,!1));triggerNodeChanges(nodeChanges),triggerEdgeChanges(edgeChanges)},setMinZoom:minZoom=>{const{panZoom,maxZoom}=get();panZoom?.setScaleExtent([minZoom,maxZoom]),set({minZoom})},setMaxZoom:maxZoom=>{const{panZoom,minZoom}=get();panZoom?.setScaleExtent([minZoom,maxZoom]),set({maxZoom})},setTranslateExtent:translateExtent=>{get().panZoom?.setTranslateExtent(translateExtent),set({translateExtent})},setPaneClickDistance:clickDistance=>{get().panZoom?.setClickDistance(clickDistance)},resetSelectedElements:()=>{const{edges,nodes,triggerNodeChanges,triggerEdgeChanges,elementsSelectable}=get();if(!elementsSelectable)return;const nodeChanges=nodes.reduce((res,node)=>node.selected?[...res,createSelectionChange(node.id,!1)]:res,[]),edgeChanges=edges.reduce((res,edge)=>edge.selected?[...res,createSelectionChange(edge.id,!1)]:res,[]);triggerNodeChanges(nodeChanges),triggerEdgeChanges(edgeChanges)},setNodeExtent:nextNodeExtent=>{const{nodes,nodeLookup,parentLookup,nodeOrigin,elevateNodesOnSelect,nodeExtent}=get();nextNodeExtent[0][0]===nodeExtent[0][0]&&nextNodeExtent[0][1]===nodeExtent[0][1]&&nextNodeExtent[1][0]===nodeExtent[1][0]&&nextNodeExtent[1][1]===nodeExtent[1][1]||((0,esm.bi)(nodes,nodeLookup,parentLookup,{nodeOrigin,nodeExtent:nextNodeExtent,elevateNodesOnSelect,checkEquality:!1}),set({nodeExtent:nextNodeExtent}))},panBy:delta=>{const{transform,width,height,panZoom,translateExtent}=get();return(0,esm.No)({delta,panZoom,transform,translateExtent,width,height})},setCenter:async(x,y,options)=>{const{width,height,maxZoom,panZoom}=get();if(!panZoom)return Promise.resolve(!1);const nextZoom=void 0!==options?.zoom?options.zoom:maxZoom;return await panZoom.setViewport({x:width/2-x*nextZoom,y:height/2-y*nextZoom,zoom:nextZoom},{duration:options?.duration,ease:options?.ease,interpolate:options?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{set({connection:{...esm.bK}})},updateConnection:connection=>{set({connection})},reset:()=>set({...getInitialState()})}},defaultEqualityFn=Object.is,createState?createWithEqualityFnImpl(createState,defaultEqualityFn):createWithEqualityFnImpl;var createState,defaultEqualityFn};function ReactFlowProvider({initialNodes:nodes,initialEdges:edges,defaultNodes,defaultEdges,initialWidth:width,initialHeight:height,initialMinZoom:minZoom,initialMaxZoom:maxZoom,initialFitViewOptions:fitViewOptions,fitView,nodeOrigin,nodeExtent,children}){const[store]=(0,react.useState)(()=>esm_createStore({nodes,edges,defaultNodes,defaultEdges,width,height,fitView,minZoom,maxZoom,fitViewOptions,nodeOrigin,nodeExtent}));return(0,jsx_runtime.jsx)(Provider$1,{value:store,children:(0,jsx_runtime.jsx)(BatchProvider,{children})})}function Wrapper({children,nodes,edges,defaultNodes,defaultEdges,width,height,fitView,fitViewOptions,minZoom,maxZoom,nodeOrigin,nodeExtent}){return(0,react.useContext)(StoreContext)?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children}):(0,jsx_runtime.jsx)(ReactFlowProvider,{initialNodes:nodes,initialEdges:edges,defaultNodes,defaultEdges,initialWidth:width,initialHeight:height,fitView,initialFitViewOptions:fitViewOptions,initialMinZoom:minZoom,initialMaxZoom:maxZoom,nodeOrigin,nodeExtent,children})}const wrapperStyle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var index=fixedForwardRef(function ReactFlow({nodes,edges,defaultNodes,defaultEdges,className,nodeTypes,edgeTypes,onNodeClick,onEdgeClick,onInit,onMove,onMoveStart,onMoveEnd,onConnect,onConnectStart,onConnectEnd,onClickConnectStart,onClickConnectEnd,onNodeMouseEnter,onNodeMouseMove,onNodeMouseLeave,onNodeContextMenu,onNodeDoubleClick,onNodeDragStart,onNodeDrag,onNodeDragStop,onNodesDelete,onEdgesDelete,onDelete,onSelectionChange,onSelectionDragStart,onSelectionDrag,onSelectionDragStop,onSelectionContextMenu,onSelectionStart,onSelectionEnd,onBeforeDelete,connectionMode,connectionLineType=esm.Do.Bezier,connectionLineStyle,connectionLineComponent,connectionLineContainerStyle,deleteKeyCode="Backspace",selectionKeyCode="Shift",selectionOnDrag=!1,selectionMode=esm.Qc.Full,panActivationKeyCode="Space",multiSelectionKeyCode=(0,esm.Ue)()?"Meta":"Control",zoomActivationKeyCode=(0,esm.Ue)()?"Meta":"Control",snapToGrid,snapGrid,onlyRenderVisibleElements=!1,selectNodesOnDrag,nodesDraggable,autoPanOnNodeFocus,nodesConnectable,nodesFocusable,nodeOrigin=defaultNodeOrigin,edgesFocusable,edgesReconnectable,elementsSelectable=!0,defaultViewport:defaultViewport$1=defaultViewport,minZoom=.5,maxZoom=2,translateExtent=esm.ZO,preventScrolling=!0,nodeExtent,defaultMarkerColor="#b1b1b7",zoomOnScroll=!0,zoomOnPinch=!0,panOnScroll=!1,panOnScrollSpeed=.5,panOnScrollMode=esm.ny.Free,zoomOnDoubleClick=!0,panOnDrag=!0,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneScroll,onPaneContextMenu,paneClickDistance=0,nodeClickDistance=0,children,onReconnect,onReconnectStart,onReconnectEnd,onEdgeContextMenu,onEdgeDoubleClick,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,reconnectRadius=10,onNodesChange,onEdgesChange,noDragClassName="nodrag",noWheelClassName="nowheel",noPanClassName="nopan",fitView,fitViewOptions,connectOnClick,attributionPosition,proOptions,defaultEdgeOptions,elevateNodesOnSelect,elevateEdgesOnSelect,disableKeyboardA11y=!1,autoPanOnConnect,autoPanOnNodeDrag,autoPanSpeed,connectionRadius,isValidConnection,onError,style,id,nodeDragThreshold,connectionDragThreshold,viewport,onViewportChange,width,height,colorMode="light",debug,onScroll,ariaLabelConfig,...rest},ref){const rfId=id||"1",colorModeClassName=function useColorModeClass(colorMode){const[colorModeClass,setColorModeClass]=(0,react.useState)("system"===colorMode?null:colorMode);return(0,react.useEffect)(()=>{if("system"!==colorMode)return void setColorModeClass(colorMode);const mediaQuery=getMediaQuery(),updateColorModeClass=()=>setColorModeClass(mediaQuery?.matches?"dark":"light");return updateColorModeClass(),mediaQuery?.addEventListener("change",updateColorModeClass),()=>{mediaQuery?.removeEventListener("change",updateColorModeClass)}},[colorMode]),null!==colorModeClass?colorModeClass:getMediaQuery()?.matches?"dark":"light"}(colorMode),wrapperOnScroll=(0,react.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),onScroll?.(e)},[onScroll]);return(0,jsx_runtime.jsx)("div",{"data-testid":"rf__wrapper",...rest,onScroll:wrapperOnScroll,style:{...style,...wrapperStyle},ref,className:classcat_cc(["react-flow",className,colorModeClassName]),id,role:"application",children:(0,jsx_runtime.jsxs)(Wrapper,{nodes,edges,width,height,fitView,fitViewOptions,minZoom,maxZoom,nodeOrigin,nodeExtent,children:[(0,jsx_runtime.jsx)(GraphView,{onInit,onNodeClick,onEdgeClick,onNodeMouseEnter,onNodeMouseMove,onNodeMouseLeave,onNodeContextMenu,onNodeDoubleClick,nodeTypes,edgeTypes,connectionLineType,connectionLineStyle,connectionLineComponent,connectionLineContainerStyle,selectionKeyCode,selectionOnDrag,selectionMode,deleteKeyCode,multiSelectionKeyCode,panActivationKeyCode,zoomActivationKeyCode,onlyRenderVisibleElements,defaultViewport:defaultViewport$1,translateExtent,minZoom,maxZoom,preventScrolling,zoomOnScroll,zoomOnPinch,zoomOnDoubleClick,panOnScroll,panOnScrollSpeed,panOnScrollMode,panOnDrag,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneScroll,onPaneContextMenu,paneClickDistance,nodeClickDistance,onSelectionContextMenu,onSelectionStart,onSelectionEnd,onReconnect,onReconnectStart,onReconnectEnd,onEdgeContextMenu,onEdgeDoubleClick,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,reconnectRadius,defaultMarkerColor,noDragClassName,noWheelClassName,noPanClassName,rfId,disableKeyboardA11y,nodeExtent,viewport,onViewportChange}),(0,jsx_runtime.jsx)(StoreUpdater,{nodes,edges,defaultNodes,defaultEdges,onConnect,onConnectStart,onConnectEnd,onClickConnectStart,onClickConnectEnd,nodesDraggable,autoPanOnNodeFocus,nodesConnectable,nodesFocusable,edgesFocusable,edgesReconnectable,elementsSelectable,elevateNodesOnSelect,elevateEdgesOnSelect,minZoom,maxZoom,nodeExtent,onNodesChange,onEdgesChange,snapToGrid,snapGrid,connectionMode,translateExtent,connectOnClick,defaultEdgeOptions,fitView,fitViewOptions,onNodesDelete,onEdgesDelete,onDelete,onNodeDragStart,onNodeDrag,onNodeDragStop,onSelectionDrag,onSelectionDragStart,onSelectionDragStop,onMove,onMoveStart,onMoveEnd,noPanClassName,nodeOrigin,rfId,autoPanOnConnect,autoPanOnNodeDrag,autoPanSpeed,onError,connectionRadius,isValidConnection,selectNodesOnDrag,nodeDragThreshold,connectionDragThreshold,onBeforeDelete,paneClickDistance,debug,ariaLabelConfig}),(0,jsx_runtime.jsx)(SelectionListener,{onSelectionChange}),children,(0,jsx_runtime.jsx)(Attribution,{proOptions,position:attributionPosition}),(0,jsx_runtime.jsx)(A11yDescriptions,{rfId,disableKeyboardA11y})]})})});function useNodesState(initialNodes){const[nodes,setNodes]=(0,react.useState)(initialNodes),onNodesChange=(0,react.useCallback)(changes=>setNodes(nds=>applyNodeChanges(changes,nds)),[]);return[nodes,setNodes,onNodesChange]}function useEdgesState(initialEdges){const[edges,setEdges]=(0,react.useState)(initialEdges),onEdgesChange=(0,react.useCallback)(changes=>setEdges(eds=>applyEdgeChanges(changes,eds)),[]);return[edges,setEdges,onEdgesChange]}esm.xc.error014();function LinePattern({dimensions,lineWidth,variant,className}){return(0,jsx_runtime.jsx)("path",{strokeWidth:lineWidth,d:`M${dimensions[0]/2} 0 V${dimensions[1]} M0 ${dimensions[1]/2} H${dimensions[0]}`,className:classcat_cc(["react-flow__background-pattern",variant,className])})}function DotPattern({radius,className}){return(0,jsx_runtime.jsx)("circle",{cx:radius,cy:radius,r:radius,className:classcat_cc(["react-flow__background-pattern","dots",className])})}var BackgroundVariant;!function(BackgroundVariant){BackgroundVariant.Lines="lines",BackgroundVariant.Dots="dots",BackgroundVariant.Cross="cross"}(BackgroundVariant||(BackgroundVariant={}));const defaultSize={[BackgroundVariant.Dots]:1,[BackgroundVariant.Lines]:1,[BackgroundVariant.Cross]:6},selector$3=s=>({transform:s.transform,patternId:`pattern-${s.rfId}`});function BackgroundComponent({id,variant=BackgroundVariant.Dots,gap=20,size,lineWidth=1,offset=0,color,bgColor,style,className,patternClassName}){const ref=(0,react.useRef)(null),{transform,patternId}=useStore(selector$3,shallow$1),patternSize=size||defaultSize[variant],isDots=variant===BackgroundVariant.Dots,isCross=variant===BackgroundVariant.Cross,gapXY=Array.isArray(gap)?gap:[gap,gap],scaledGap=[gapXY[0]*transform[2]||1,gapXY[1]*transform[2]||1],scaledSize=patternSize*transform[2],offsetXY=Array.isArray(offset)?offset:[offset,offset],patternDimensions=isCross?[scaledSize,scaledSize]:scaledGap,scaledOffset=[offsetXY[0]*transform[2]||1+patternDimensions[0]/2,offsetXY[1]*transform[2]||1+patternDimensions[1]/2],_patternId=`${patternId}${id||""}`;return(0,jsx_runtime.jsxs)("svg",{className:classcat_cc(["react-flow__background",className]),style:{...style,...containerStyle,"--xy-background-color-props":bgColor,"--xy-background-pattern-color-props":color},ref,"data-testid":"rf__background",children:[(0,jsx_runtime.jsx)("pattern",{id:_patternId,x:transform[0]%scaledGap[0],y:transform[1]%scaledGap[1],width:scaledGap[0],height:scaledGap[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${scaledOffset[0]},-${scaledOffset[1]})`,children:isDots?(0,jsx_runtime.jsx)(DotPattern,{radius:scaledSize/2,className:patternClassName}):(0,jsx_runtime.jsx)(LinePattern,{dimensions:patternDimensions,lineWidth,variant,className:patternClassName})}),(0,jsx_runtime.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${_patternId})`})]})}BackgroundComponent.displayName="Background";(0,react.memo)(BackgroundComponent);function PlusIcon(){return(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,jsx_runtime.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function MinusIcon(){return(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,jsx_runtime.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function FitViewIcon(){return(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,jsx_runtime.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function LockIcon(){return(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,jsx_runtime.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function UnlockIcon(){return(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,jsx_runtime.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ControlButton({children,className,...rest}){return(0,jsx_runtime.jsx)("button",{type:"button",className:classcat_cc(["react-flow__controls-button",className]),...rest,children})}const selector$2=s=>({isInteractive:s.nodesDraggable||s.nodesConnectable||s.elementsSelectable,minZoomReached:s.transform[2]<=s.minZoom,maxZoomReached:s.transform[2]>=s.maxZoom,ariaLabelConfig:s.ariaLabelConfig});function ControlsComponent({style,showZoom=!0,showFitView=!0,showInteractive=!0,fitViewOptions,onZoomIn,onZoomOut,onFitView,onInteractiveChange,className,children,position="bottom-left",orientation="vertical","aria-label":ariaLabel}){const store=useStoreApi(),{isInteractive,minZoomReached,maxZoomReached,ariaLabelConfig}=useStore(selector$2,shallow$1),{zoomIn,zoomOut,fitView}=useReactFlow(),orientationClass="horizontal"===orientation?"horizontal":"vertical";return(0,jsx_runtime.jsxs)(Panel,{className:classcat_cc(["react-flow__controls",orientationClass,className]),position,style,"data-testid":"rf__controls","aria-label":ariaLabel??ariaLabelConfig["controls.ariaLabel"],children:[showZoom&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ControlButton,{onClick:()=>{zoomIn(),onZoomIn?.()},className:"react-flow__controls-zoomin",title:ariaLabelConfig["controls.zoomIn.ariaLabel"],"aria-label":ariaLabelConfig["controls.zoomIn.ariaLabel"],disabled:maxZoomReached,children:(0,jsx_runtime.jsx)(PlusIcon,{})}),(0,jsx_runtime.jsx)(ControlButton,{onClick:()=>{zoomOut(),onZoomOut?.()},className:"react-flow__controls-zoomout",title:ariaLabelConfig["controls.zoomOut.ariaLabel"],"aria-label":ariaLabelConfig["controls.zoomOut.ariaLabel"],disabled:minZoomReached,children:(0,jsx_runtime.jsx)(MinusIcon,{})})]}),showFitView&&(0,jsx_runtime.jsx)(ControlButton,{className:"react-flow__controls-fitview",onClick:()=>{fitView(fitViewOptions),onFitView?.()},title:ariaLabelConfig["controls.fitView.ariaLabel"],"aria-label":ariaLabelConfig["controls.fitView.ariaLabel"],children:(0,jsx_runtime.jsx)(FitViewIcon,{})}),showInteractive&&(0,jsx_runtime.jsx)(ControlButton,{className:"react-flow__controls-interactive",onClick:()=>{store.setState({nodesDraggable:!isInteractive,nodesConnectable:!isInteractive,elementsSelectable:!isInteractive}),onInteractiveChange?.(!isInteractive)},title:ariaLabelConfig["controls.interactive.ariaLabel"],"aria-label":ariaLabelConfig["controls.interactive.ariaLabel"],children:isInteractive?(0,jsx_runtime.jsx)(UnlockIcon,{}):(0,jsx_runtime.jsx)(LockIcon,{})}),children]})}ControlsComponent.displayName="Controls";const Controls=(0,react.memo)(ControlsComponent);const MiniMapNode=(0,react.memo)(function MiniMapNodeComponent({id,x,y,width,height,style,color,strokeColor,strokeWidth,className,borderRadius,shapeRendering,selected,onClick}){const{background,backgroundColor}=style||{},fill=color||background||backgroundColor;return(0,jsx_runtime.jsx)("rect",{className:classcat_cc(["react-flow__minimap-node",{selected},className]),x,y,rx:borderRadius,ry:borderRadius,width,height,style:{fill,stroke:strokeColor,strokeWidth},shapeRendering,onClick:onClick?event=>onClick(event,id):void 0})}),selectorNodeIds=s=>s.nodes.map(node=>node.id),getAttrFunction=func=>func instanceof Function?func:()=>func;const NodeComponentWrapper=(0,react.memo)(function NodeComponentWrapperInner({id,nodeColorFunc,nodeStrokeColorFunc,nodeClassNameFunc,nodeBorderRadius,nodeStrokeWidth,shapeRendering,NodeComponent,onClick}){const{node,x,y,width,height}=useStore(s=>{const{internals}=s.nodeLookup.get(id),node=internals.userNode,{x,y}=internals.positionAbsolute,{width,height}=(0,esm.uD)(node);return{node,x,y,width,height}},shallow$1);return node&&!node.hidden&&(0,esm.QE)(node)?(0,jsx_runtime.jsx)(NodeComponent,{x,y,width,height,style:node.style,selected:!!node.selected,className:nodeClassNameFunc(node),color:nodeColorFunc(node),borderRadius:nodeBorderRadius,strokeColor:nodeStrokeColorFunc(node),strokeWidth:nodeStrokeWidth,shapeRendering,onClick,id:node.id}):null});var MiniMapNodes$1=(0,react.memo)(function MiniMapNodes({nodeStrokeColor,nodeColor,nodeClassName="",nodeBorderRadius=5,nodeStrokeWidth,nodeComponent:NodeComponent=MiniMapNode,onClick}){const nodeIds=useStore(selectorNodeIds,shallow$1),nodeColorFunc=getAttrFunction(nodeColor),nodeStrokeColorFunc=getAttrFunction(nodeStrokeColor),nodeClassNameFunc=getAttrFunction(nodeClassName),shapeRendering="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:nodeIds.map(nodeId=>(0,jsx_runtime.jsx)(NodeComponentWrapper,{id:nodeId,nodeColorFunc,nodeStrokeColorFunc,nodeClassNameFunc,nodeBorderRadius,nodeStrokeWidth,NodeComponent,onClick,shapeRendering},nodeId))})});const filterHidden=node=>!node.hidden,selector$1=s=>{const viewBB={x:-s.transform[0]/s.transform[2],y:-s.transform[1]/s.transform[2],width:s.width/s.transform[2],height:s.height/s.transform[2]};return{viewBB,boundingRect:s.nodeLookup.size>0?(0,esm.Mi)((0,esm.aZ)(s.nodeLookup,{filter:filterHidden}),viewBB):viewBB,rfId:s.rfId,panZoom:s.panZoom,translateExtent:s.translateExtent,flowWidth:s.width,flowHeight:s.height,ariaLabelConfig:s.ariaLabelConfig}};function MiniMapComponent({style,className,nodeStrokeColor,nodeColor,nodeClassName="",nodeBorderRadius=5,nodeStrokeWidth,nodeComponent,bgColor,maskColor,maskStrokeColor,maskStrokeWidth,position="bottom-right",onClick,onNodeClick,pannable=!1,zoomable=!1,ariaLabel,inversePan,zoomStep=10,offsetScale=5}){const store=useStoreApi(),svg=(0,react.useRef)(null),{boundingRect,viewBB,rfId,panZoom,translateExtent,flowWidth,flowHeight,ariaLabelConfig}=useStore(selector$1,shallow$1),elementWidth=style?.width??200,elementHeight=style?.height??150,scaledWidth=boundingRect.width/elementWidth,scaledHeight=boundingRect.height/elementHeight,viewScale=Math.max(scaledWidth,scaledHeight),viewWidth=viewScale*elementWidth,viewHeight=viewScale*elementHeight,offset=offsetScale*viewScale,x=boundingRect.x-(viewWidth-boundingRect.width)/2-offset,y=boundingRect.y-(viewHeight-boundingRect.height)/2-offset,width=viewWidth+2*offset,height=viewHeight+2*offset,labelledBy=`react-flow__minimap-desc-${rfId}`,viewScaleRef=(0,react.useRef)(0),minimapInstance=(0,react.useRef)();viewScaleRef.current=viewScale,(0,react.useEffect)(()=>{if(svg.current&&panZoom)return minimapInstance.current=(0,esm.di)({domNode:svg.current,panZoom,getTransform:()=>store.getState().transform,getViewScale:()=>viewScaleRef.current}),()=>{minimapInstance.current?.destroy()}},[panZoom]),(0,react.useEffect)(()=>{minimapInstance.current?.update({translateExtent,width:flowWidth,height:flowHeight,inversePan,pannable,zoomStep,zoomable})},[pannable,zoomable,inversePan,zoomStep,translateExtent,flowWidth,flowHeight]);const onSvgClick=onClick?event=>{const[x,y]=minimapInstance.current?.pointer(event)||[0,0];onClick(event,{x,y})}:void 0,onSvgNodeClick=onNodeClick?(0,react.useCallback)((event,nodeId)=>{const node=store.getState().nodeLookup.get(nodeId).internals.userNode;onNodeClick(event,node)},[]):void 0,_ariaLabel=ariaLabel??ariaLabelConfig["minimap.ariaLabel"];return(0,jsx_runtime.jsx)(Panel,{position,style:{...style,"--xy-minimap-background-color-props":"string"==typeof bgColor?bgColor:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof maskColor?maskColor:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof maskStrokeColor?maskStrokeColor:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof maskStrokeWidth?maskStrokeWidth*viewScale:void 0,"--xy-minimap-node-background-color-props":"string"==typeof nodeColor?nodeColor:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof nodeStrokeColor?nodeStrokeColor:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof nodeStrokeWidth?nodeStrokeWidth:void 0},className:classcat_cc(["react-flow__minimap",className]),"data-testid":"rf__minimap",children:(0,jsx_runtime.jsxs)("svg",{width:elementWidth,height:elementHeight,viewBox:`${x} ${y} ${width} ${height}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":labelledBy,ref:svg,onClick:onSvgClick,children:[_ariaLabel&&(0,jsx_runtime.jsx)("title",{id:labelledBy,children:_ariaLabel}),(0,jsx_runtime.jsx)(MiniMapNodes$1,{onClick:onSvgNodeClick,nodeColor,nodeStrokeColor,nodeBorderRadius,nodeClassName,nodeStrokeWidth,nodeComponent}),(0,jsx_runtime.jsx)("path",{className:"react-flow__minimap-mask",d:`M${x-offset},${y-offset}h${width+2*offset}v${height+2*offset}h${-width-2*offset}z\n        M${viewBB.x},${viewBB.y}h${viewBB.width}v${viewBB.height}h${-viewBB.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}MiniMapComponent.displayName="MiniMap";(0,react.memo)(MiniMapComponent);const defaultPositions={[esm.xN.Line]:"right",[esm.xN.Handle]:"bottom-right"};(0,react.memo)(function ResizeControl({nodeId,position,variant=esm.xN.Handle,className,style,children,color,minWidth=10,minHeight=10,maxWidth=Number.MAX_VALUE,maxHeight=Number.MAX_VALUE,keepAspectRatio=!1,resizeDirection,autoScale=!0,shouldResize,onResizeStart,onResize,onResizeEnd}){const contextNodeId=useNodeId(),id="string"==typeof nodeId?nodeId:contextNodeId,store=useStoreApi(),resizeControlRef=(0,react.useRef)(null),isHandleControl=variant===esm.xN.Handle,scale=useStore((0,react.useCallback)((calculateScale=isHandleControl&&autoScale,store=>calculateScale?`${Math.max(1/store.transform[2],1)}`:void 0),[isHandleControl,autoScale]),shallow$1);var calculateScale;const resizer=(0,react.useRef)(null),controlPosition=position??defaultPositions[variant];(0,react.useEffect)(()=>{if(resizeControlRef.current&&id)return resizer.current||(resizer.current=(0,esm.ET)({domNode:resizeControlRef.current,nodeId:id,getStoreItems:()=>{const{nodeLookup,transform,snapGrid,snapToGrid,nodeOrigin,domNode}=store.getState();return{nodeLookup,transform,snapGrid,snapToGrid,nodeOrigin,paneDomNode:domNode}},onChange:(change,childChanges)=>{const{triggerNodeChanges,nodeLookup,parentLookup,nodeOrigin}=store.getState(),changes=[],nextPosition={x:change.x,y:change.y},node=nodeLookup.get(id);if(node&&node.expandParent&&node.parentId){const origin=node.origin??nodeOrigin,width=change.width??node.measured.width??0,height=change.height??node.measured.height??0,child={id:node.id,parentId:node.parentId,rect:{width,height,...(0,esm.us)({x:change.x??node.position.x,y:change.y??node.position.y},{width,height},node.parentId,nodeLookup,origin)}},parentExpandChanges=(0,esm.r8)([child],nodeLookup,parentLookup,nodeOrigin);changes.push(...parentExpandChanges),nextPosition.x=change.x?Math.max(origin[0]*width,change.x):void 0,nextPosition.y=change.y?Math.max(origin[1]*height,change.y):void 0}if(void 0!==nextPosition.x&&void 0!==nextPosition.y){const positionChange={id,type:"position",position:{...nextPosition}};changes.push(positionChange)}if(void 0!==change.width&&void 0!==change.height){const dimensionChange={id,type:"dimensions",resizing:!0,setAttributes:!resizeDirection||("horizontal"===resizeDirection?"width":"height"),dimensions:{width:change.width,height:change.height}};changes.push(dimensionChange)}for(const childChange of childChanges){const positionChange={...childChange,type:"position"};changes.push(positionChange)}triggerNodeChanges(changes)},onEnd:({width,height})=>{const dimensionChange={id,type:"dimensions",resizing:!1,dimensions:{width,height}};store.getState().triggerNodeChanges([dimensionChange])}})),resizer.current.update({controlPosition,boundaries:{minWidth,minHeight,maxWidth,maxHeight},keepAspectRatio,resizeDirection,onResizeStart,onResize,onResizeEnd,shouldResize}),()=>{resizer.current?.destroy()}},[controlPosition,minWidth,minHeight,maxWidth,maxHeight,keepAspectRatio,onResizeStart,onResize,onResizeEnd,shouldResize]);const positionClassNames=controlPosition.split("-");return(0,jsx_runtime.jsx)("div",{className:classcat_cc(["react-flow__resize-control","nodrag",...positionClassNames,variant,className]),ref:resizeControlRef,style:{...style,scale,...color&&{[isHandleControl?"backgroundColor":"borderColor"]:color}},children})})},"./node_modules/@xyflow/react/dist/style.css":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _storybook_builder_webpack5_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleDomAPI.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertBySelector.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertStyleElement.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleTagTransform.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__),_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_style_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/@xyflow/react/dist/style.css"),options={};options.styleTagTransform=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default(),options.setAttributes=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default(),options.insert=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null,"head"),options.domAPI=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default(),options.insertStyleElement=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default();_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_style_css__WEBPACK_IMPORTED_MODULE_6__.A,options),_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_style_css__WEBPACK_IMPORTED_MODULE_6__.A&&_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_style_css__WEBPACK_IMPORTED_MODULE_6__.A.locals&&_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_style_css__WEBPACK_IMPORTED_MODULE_6__.A.locals},"./node_modules/@xyflow/system/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Do:()=>ConnectionLineType,WZ:()=>ConnectionMode,TG:()=>MarkerType,ny:()=>PanOnScrollMode,yX:()=>Position,xN:()=>ResizeControlVariant,Qc:()=>SelectionMode,I$:()=>XYDrag,aQ:()=>XYHandle,di:()=>XYMinimap,kO:()=>XYPanZoom,ET:()=>XYResizer,rN:()=>addEdge,bi:()=>adoptUserNodes,_s:()=>areSetsEqual,aE:()=>calculateNodePosition,Hm:()=>createMarkerIds,tM:()=>defaultAriaLabelConfig,KE:()=>devWarn,tn:()=>elementSelectionKeys,xc:()=>errorMessages,us:()=>evaluateAbsolutePosition,IO:()=>fitViewport,e_:()=>getBezierEdgeCenter,Fp:()=>getBezierPath,Mi:()=>getBoundsOfRects,HF:()=>getConnectionStatus,Eo:()=>getDimensions,b5:()=>getEdgePosition,Tq:()=>getElementsToRemove,qX:()=>getElevatedEdgeZIndex,q1:()=>getEventPosition,oj:()=>getHostForElement,aZ:()=>getInternalNodesBounds,aW:()=>getMarkerId,uD:()=>getNodeDimensions,Jo:()=>getNodesBounds,U$:()=>getNodesInside,X6:()=>getOverlappingArea,oN:()=>getSmoothStepPath,ah:()=>getStraightPath,R4:()=>getViewportForBounds,r8:()=>handleExpandParent,ZO:()=>infiniteExtent,bK:()=>initialConnection,b$:()=>isEdgeBase,uj:()=>isEdgeVisible,v5:()=>isInputDOMNode,Ue:()=>isMacOs,Er:()=>isMouseEvent,oB:()=>isNodeBase,kf:()=>isNumeric,mW:()=>isRectObject,Q6:()=>mergeAriaLabelConfig,QE:()=>nodeHasDimensions,kM:()=>nodeToRect,No:()=>panBy,Ff:()=>pointToRendererPoint,zj:()=>rendererPointToPoint,s_:()=>snapPosition,vS:()=>updateAbsolutePositions,qn:()=>updateConnectionLookup,uL:()=>updateNodeInternals,YN:()=>withResolvers});var noop={value:()=>{}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name}})}(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};const src_dispatch=dispatch;function none(){}function selector(selector){return null==selector?none:function(){return this.querySelector(selector)}}function empty(){return[]}function selectorAll(selector){return null==selector?empty:function(){return this.querySelectorAll(selector)}}function arrayAll(select){return function(){return function array(x){return null==x?[]:Array.isArray(x)?x:Array.from(x)}(select.apply(this,arguments))}}function matcher(selector){return function(){return this.matches(selector)}}function childMatcher(selector){return function(node){return node.matches(selector)}}var find=Array.prototype.find;function childFirst(){return this.firstElementChild}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function sparse(update){return new Array(update.length)}function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}function bindIndex(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue=new Map,groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=key.call(node,node.__data__,i,group)+"",nodeByKeyValue.has(keyValue)?exit[i]=node:nodeByKeyValue.set(keyValue,node));for(i=0;i<dataLength;++i)keyValue=key.call(parent,data[i],i,data)+"",(node=nodeByKeyValue.get(keyValue))?(update[i]=node,node.__data__=data[i],nodeByKeyValue.delete(keyValue)):enter[i]=new EnterNode(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue.get(keyValues[i])===node&&(exit[i]=node)}function datum(node){return node.__data__}function arraylike(data){return"object"==typeof data&&"length"in data?data:Array.from(data)}function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function src_window(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue(node,name){return node.style.getPropertyValue(name)||src_window(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node,this._names=classArray(node.getAttribute("class")||"")}function classedAdd(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function textRemove(){this.textContent=""}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}function constantNull(){return null}function remove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function onRemove(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.options);++i?on.length=i:delete this.__on}}}function onAdd(typename,value,options){return function(){var o,on=this.__on,listener=function contextListener(listener){return function(event){listener.call(this,event,this.__data__)}}(value);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=listener,o.options=options),void(o.value=value);this.addEventListener(typename.type,listener,options),o={type:typename.type,name:typename.name,value,listener,options},on?on.push(o):this.__on=[o]}}function dispatchEvent(node,type,params){var window=src_window(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}ClassList.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var root=[null];function Selection(groups,parents){this._groups=groups,this._parents=parents}function selection(){return new Selection([[document.documentElement]],root)}Selection.prototype=selection.prototype={constructor:Selection,select:function selection_select(select){"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection(subgroups,this._parents)},selectAll:function selectAll(select){select="function"==typeof select?arrayAll(select):selectorAll(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection(subgroups,parents)},selectChild:function selectChild(match){return this.select(null==match?childFirst:function childFind(match){return function(){return find.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},selectChildren:function selectChildren(match){return this.selectAll(null==match?children:function childrenFilter(match){return function(){return filter.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},filter:function selection_filter(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection(subgroups,this._parents)},data:function data(value,key){if(!arguments.length)return Array.from(this,datum);var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=function src_constant(x){return function(){return x}}(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=arraylike(value.call(parent,parent&&parent.__data__,j,parents)),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection(update,parents))._enter=enter,update._exit=exit,update},enter:function enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)},exit:function exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)},join:function join(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return"function"==typeof onenter?(enter=onenter(enter))&&(enter=enter.selection()):enter=enter.append(onenter+""),null!=onupdate&&(update=onupdate(update))&&(update=update.selection()),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function merge(context){for(var selection=context.selection?context.selection():context,groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection(merges,this._parents)},selection:function selection_selection(){return this},order:function order(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function sort(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order()},call:function call(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function nodes(){return Array.from(this)},node:function node(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function size(){let size=0;for(const node of this)++size;return size},empty:function selection_empty(){return!this.node()},each:function each(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function attr(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS:attrRemove:"function"==typeof value?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value))},style:function style(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove:"function"==typeof value?styleFunction:styleConstant)(name,value,null==priority?"":priority)):styleValue(this.node(),name)},property:function property(name,value){return arguments.length>1?this.each((null==value?propertyRemove:"function"==typeof value?propertyFunction:propertyConstant)(name,value)):this.node()[name]},classed:function classed(name,value){var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction:value?classedTrue:classedFalse)(names,value))},text:function selection_text(value){return arguments.length?this.each(null==value?textRemove:("function"==typeof value?textFunction:textConstant)(value)):this.node().textContent},html:function html(value){return arguments.length?this.each(null==value?htmlRemove:("function"==typeof value?htmlFunction:htmlConstant)(value)):this.node().innerHTML},raise:function selection_raise(){return this.each(raise)},lower:function selection_lower(){return this.each(lower)},append:function append(name){var create="function"==typeof name?name:creator(name);return this.select(function(){return this.appendChild(create.apply(this,arguments))})},insert:function insert(name,before){var create="function"==typeof name?name:creator(name),select=null==before?constantNull:"function"==typeof before?before:selector(before);return this.select(function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)})},remove:function selection_remove(){return this.each(remove)},clone:function clone(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)},datum:function selection_datum(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function on(typename,value,options){var i,t,typenames=function on_parseTypenames(typenames){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name}})}(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd:onRemove,i=0;i<n;++i)this.each(on(typenames[i],value,options));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch(type,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type,params))},[Symbol.iterator]:function*iterator(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&(yield node)}};const src_selection=selection;function src_select(selector){return"string"==typeof selector?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],root)}function pointer(event,node){if(event=function sourceEvent(event){let sourceEvent;for(;sourceEvent=event.sourceEvent;)event=sourceEvent;return event}(event),void 0===node&&(node=event.currentTarget),node){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}if(node.getBoundingClientRect){var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}}return[event.pageX,event.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation(event){event.stopImmediatePropagation()}function noevent(event){event.preventDefault(),event.stopImmediatePropagation()}function nodrag(view){var root=view.document.documentElement,selection=src_select(view).on("dragstart.drag",noevent,nonpassivecapture);"onselectstart"in root?selection.on("selectstart.drag",noevent,nonpassivecapture):(root.__noselect=root.style.MozUserSelect,root.style.MozUserSelect="none")}function yesdrag(view,noclick){var root=view.document.documentElement,selection=src_select(view).on("dragstart.drag",null);noclick&&(selection.on("click.drag",noevent,nonpassivecapture),setTimeout(function(){selection.on("click.drag",null)},0)),"onselectstart"in root?selection.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,delete root.__noselect)}const d3_drag_src_constant=x=>()=>x;function DragEvent(type,{sourceEvent,subject,target,identifier,active,x,y,dx,dy,dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},subject:{value:subject,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},identifier:{value:identifier,enumerable:!0,configurable:!0},active:{value:active,enumerable:!0,configurable:!0},x:{value:x,enumerable:!0,configurable:!0},y:{value:y,enumerable:!0,configurable:!0},dx:{value:dx,enumerable:!0,configurable:!0},dy:{value:dy,enumerable:!0,configurable:!0},_:{value:dispatch}})}function defaultFilter(event){return!event.ctrlKey&&!event.button}function defaultContainer(){return this.parentNode}function defaultSubject(event,d){return null==d?{x:event.x,y:event.y}:d}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var mousedownx,mousedowny,mousemoving,touchending,filter=defaultFilter,container=defaultContainer,subject=defaultSubject,touchable=defaultTouchable,gestures={},listeners=src_dispatch("start","drag","end"),active=0,clickDistance2=0;function drag(selection){selection.on("mousedown.drag",mousedowned).filter(touchable).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved,nonpassive).on("touchend.drag touchcancel.drag",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(event,d){if(!touchending&&filter.call(this,event,d)){var gesture=beforestart(this,container.call(this,event,d),event,d,"mouse");gesture&&(src_select(event.view).on("mousemove.drag",mousemoved,nonpassivecapture).on("mouseup.drag",mouseupped,nonpassivecapture),nodrag(event.view),nopropagation(event),mousemoving=!1,mousedownx=event.clientX,mousedowny=event.clientY,gesture("start",event))}}function mousemoved(event){if(noevent(event),!mousemoving){var dx=event.clientX-mousedownx,dy=event.clientY-mousedowny;mousemoving=dx*dx+dy*dy>clickDistance2}gestures.mouse("drag",event)}function mouseupped(event){src_select(event.view).on("mousemove.drag mouseup.drag",null),yesdrag(event.view,mousemoving),noevent(event),gestures.mouse("end",event)}function touchstarted(event,d){if(filter.call(this,event,d)){var i,gesture,touches=event.changedTouches,c=container.call(this,event,d),n=touches.length;for(i=0;i<n;++i)(gesture=beforestart(this,c,event,d,touches[i].identifier,touches[i]))&&(nopropagation(event),gesture("start",event,touches[i]))}}function touchmoved(event){var i,gesture,touches=event.changedTouches,n=touches.length;for(i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(noevent(event),gesture("drag",event,touches[i]))}function touchended(event){var i,gesture,touches=event.changedTouches,n=touches.length;for(touchending&&clearTimeout(touchending),touchending=setTimeout(function(){touchending=null},500),i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(nopropagation(event),gesture("end",event,touches[i]))}function beforestart(that,container,event,d,identifier,touch){var dx,dy,s,dispatch=listeners.copy(),p=pointer(touch||event,container);if(null!=(s=subject.call(that,new DragEvent("beforestart",{sourceEvent:event,target:drag,identifier,active,x:p[0],y:p[1],dx:0,dy:0,dispatch}),d)))return dx=s.x-p[0]||0,dy=s.y-p[1]||0,function gesture(type,event,touch){var n,p0=p;switch(type){case"start":gestures[identifier]=gesture,n=active++;break;case"end":delete gestures[identifier],--active;case"drag":p=pointer(touch||event,container),n=active}dispatch.call(type,that,new DragEvent(type,{sourceEvent:event,subject:s,target:drag,identifier,active:n,x:p[0]+dx,y:p[1]+dy,dx:p[0]-p0[0],dy:p[1]-p0[1],dispatch}),d)}}return drag.filter=function(_){return arguments.length?(filter="function"==typeof _?_:d3_drag_src_constant(!!_),drag):filter},drag.container=function(_){return arguments.length?(container="function"==typeof _?_:d3_drag_src_constant(_),drag):container},drag.subject=function(_){return arguments.length?(subject="function"==typeof _?_:d3_drag_src_constant(_),drag):subject},drag.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:d3_drag_src_constant(!!_),drag):touchable},drag.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?drag:value},drag.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,drag):Math.sqrt(clickDistance2)},drag}DragEvent.prototype.on=function(){var value=this._.on.apply(this._,arguments);return value===this._?this:value};function cosh(x){return((x=Math.exp(x))+1/x)/2}const src_zoom=function zoomRho(rho,rho2,rho4){function zoom(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<1e-12)S=Math.log(w1/w0)/rho,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho,i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}(rho*s+r0)-function sinh(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}return i.duration=1e3*S*rho/Math.SQRT2,i}return zoom.rho=function(_){var _1=Math.max(.001,+_),_2=_1*_1;return zoomRho(_1,_2,_2*_2)},zoom}(Math.SQRT2,2,4);var taskHead,taskTail,timer_frame=0,timeout=0,interval=0,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function wake(){clockNow=(clockLast=clock.now())+clockSkew,timer_frame=timeout=0;try{!function timerFlush(){now(),++timer_frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--timer_frame}()}finally{timer_frame=0,function nap(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>1e3&&(clockSkew-=delay,clockLast=now)}function sleep(time){timer_frame||(timeout&&(timeout=clearTimeout(timeout)),time-clockNow>24?(time<1/0&&(timeout=setTimeout(wake,time-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,1e3)),timer_frame=1,setFrame(wake)))}function src_timeout(callback,delay,time){var t=new Timer;return delay=null==delay?0:+delay,t.restart(elapsed=>{t.stop(),callback(elapsed+delay)},delay,time),t}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=src_dispatch("start","end","cancel","interrupt"),emptyTween=[],STARTING=2,ENDING=5,ENDED=6;function schedule(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=1,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(1!==self.state)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(3===o.state)return src_timeout(start);4===o.state?(o.state=ENDED,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=ENDED,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(src_timeout(function(){3===self.state&&(self.state=4,self.timer.restart(tick,self.delay,self.time),tick(elapsed))}),self.state=STARTING,self.on.call("start",node,node.__data__,self.index,self.group),self.state===STARTING){for(self.state=3,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=ENDING,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);self.state===ENDING&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=ENDED,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer(schedule,0,self.time)}(node,id,{name,index,group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:0})}function init(node,id){var schedule=schedule_get(node,id);if(schedule.state>0)throw new Error("too late; already scheduled");return schedule}function schedule_set(node,id){var schedule=schedule_get(node,id);if(schedule.state>3)throw new Error("too late; already running");return schedule}function schedule_get(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function interrupt(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>STARTING&&schedule.state<ENDING,schedule.state=ENDED,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}function number(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}var svgNode,degrees=180/Math.PI,identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX,scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform(function parseCss(value){const m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?identity:decompose(m.a,m.b,m.c,m.d,m.e,m.f)},"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(function parseSvg(value){return null==value?identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?decompose((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):identity)},", ",")",")");function tweenRemove(id,name){var tween0,tween1;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name,value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue(transition,name,value){var id=transition._id;return transition.each(function(){var schedule=schedule_set(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)}),function(node){return schedule_get(node,id).value[name]}}function src_define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function color_rgb(r,g,b,opacity){return 1===arguments.length?function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatRgb(){const a=clampa(this.opacity);return`${1===a?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===a?")":`, ${a})`}`}function clampa(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity))}function clampi(value){return Math.max(0,Math.min(255,Math.round(value)||0))}function hex(value){return((value=clampi(value))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function clamph(value){return(value=(value||0)%360)<0?value+360:value}function clampt(value){return Math.max(0,Math.min(1,value||0))}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}src_define(Color,color,{copy(channels){return Object.assign(new this.constructor,this,channels)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:function color_formatHex8(){return this.rgb().formatHex8()},formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),src_define(Rgb,color_rgb,extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),src_define(Hsl,function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)},extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=clampa(this.opacity);return`${1===a?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===a?")":`, ${a})`}`}}));const d3_interpolate_src_constant=x=>()=>x;function linear(a,d){return function(t){return a+t*d}}function gamma(y){return 1===(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):d3_interpolate_src_constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):d3_interpolate_src_constant(isNaN(a)?b:a)}const rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=color_rgb(start)).r,(end=color_rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=color_rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}rgbSpline(function src_basis(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}),rgbSpline(function basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}});var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function string(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i,x:number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function interpolate(a,b){var c;return("number"==typeof b?number:b instanceof color?rgb:(c=color(b))?(b=c,rgb):string)(a,b)}function attr_attrRemove(name){return function(){this.removeAttribute(name)}}function attr_attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attr_attrConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrConstantNS(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attr_attrFunctionNS(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function attrInterpolateNS(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}(fullname,i)),t0}return tween._value=value,tween}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function attrInterpolate(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}(name,i)),t0}return tween._value=value,tween}function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){init(this,id).delay=value}}function durationFunction(id,value){return function(){schedule_set(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){schedule_set(this,id).duration=value}}var selection_Selection=src_selection.prototype.constructor;function style_styleRemove(name){return function(){this.style.removeProperty(name)}}var id=0;function Transition(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function newId(){return++id}var selection_prototype=src_selection.prototype;Transition.prototype=function transition_transition(name){return src_selection().transition(name)}.prototype={constructor:Transition,select:function transition_select(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule(subgroup[i],name,id,i,subgroup,schedule_get(node,id)));return new Transition(subgroups,this._parents,name,id)},selectAll:function transition_selectAll(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=schedule_get(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition(subgroups,parents,name,id)},selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:function transition_filter(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition(subgroups,this._parents,this._name,this._id)},merge:function transition_merge(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition(merges,this._parents,this._name,this._id)},selection:function transition_selection(){return new selection_Selection(this._groups,this._parents)},transition:function transition(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=schedule_get(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition(groups,this._parents,name,id1)},call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:function transition_on(name,listener){var id=this._id;return arguments.length<2?schedule_get(this.node(),id).on.on(name):this.each(function onFunction(id,name,listener){var on0,on1,sit=function start(name){return(name+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t})}(name)?init:schedule_set;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}(id,name,listener))},attr:function transition_attr(name,value){var fullname=namespace(name),i="transform"===fullname?interpolateTransformSvg:interpolate;return this.attrTween(name,"function"==typeof value?(fullname.local?attr_attrFunctionNS:attr_attrFunction)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attr_attrRemoveNS:attr_attrRemove)(fullname):(fullname.local?attr_attrConstantNS:attr_attrConstant)(fullname,i,value))},attrTween:function transition_attrTween(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))},style:function transition_style(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss:interpolate;return null==value?this.styleTween(name,function styleNull(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,style_styleRemove(name)):"function"==typeof value?this.styleTween(name,function style_styleFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue(this,"style."+name,value))).each(function styleMaybeRemove(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=schedule_set(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=style_styleRemove(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function style_styleConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function transition_styleTween(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&function styleInterpolate(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}(name,i,priority)),t}return tween._value=value,tween}(name,value,null==priority?"":priority))},text:function transition_text(value){return this.tween("text","function"==typeof value?function text_textFunction(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue(this,"text",value)):function text_textConstant(value){return function(){this.textContent=value}}(null==value?"":value+""))},textTween:function transition_textTween(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function textTween(value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function textInterpolate(i){return function(t){this.textContent=i.call(this,t)}}(i)),t0}return tween._value=value,tween}(value))},remove:function transition_remove(){return this.on("end.remove",function removeFunction(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function tween(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=schedule_get(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value))},delay:function delay(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):schedule_get(this.node(),id).delay},duration:function duration(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):schedule_get(this.node(),id).duration},ease:function ease(value){var id=this._id;return arguments.length?this.each(function easeConstant(id,value){if("function"!=typeof value)throw new Error;return function(){schedule_set(this,id).ease=value}}(id,value)):schedule_get(this.node(),id).ease},easeVarying:function transition_easeVarying(value){if("function"!=typeof value)throw new Error;return this.each(function easeVarying(id,value){return function(){var v=value.apply(this,arguments);if("function"!=typeof v)throw new Error;schedule_set(this,id).ease=v}}(this._id,value))},end:function end(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise(function(resolve,reject){var cancel={value:reject},end={value:function(){0===--size&&resolve()}};that.each(function(){var schedule=schedule_set(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1}),0===size&&resolve()})},[Symbol.iterator]:selection_prototype[Symbol.iterator]};var defaultTiming={time:null,delay:0,duration:250,ease:function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))throw new Error(`transition ${id} not found`);return timing}src_selection.prototype.interrupt=function selection_interrupt(name){return this.each(function(){interrupt(this,name)})},src_selection.prototype.transition=function selection_transition(name){var id,timing;name instanceof Transition?(id=name._id,name=name._name):(id=newId(),(timing=defaultTiming).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule(node,name,id,i,group,timing||inherit(node,id));return new Transition(groups,this._parents,name,id)};const d3_zoom_src_constant=x=>()=>x;function ZoomEvent(type,{sourceEvent,target,transform,dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},transform:{value:transform,enumerable:!0,configurable:!0},_:{value:dispatch}})}function Transform(k,x,y){this.k=k,this.x=x,this.y=y}Transform.prototype={constructor:Transform,scale:function(k){return 1===k?this:new Transform(this.k*k,this.x,this.y)},translate:function(x,y){return 0===x&0===y?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function(x){return x*this.k+this.x},applyY:function(y){return y*this.k+this.y},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function(x){return(x-this.x)/this.k},invertY:function(y){return(y-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var transform_identity=new Transform(1,0,0);function transform_transform(node){for(;!node.__zoom;)if(!(node=node.parentNode))return transform_identity;return node.__zoom}function noevent_nopropagation(event){event.stopImmediatePropagation()}function src_noevent(event){event.preventDefault(),event.stopImmediatePropagation()}function zoom_defaultFilter(event){return!(event.ctrlKey&&"wheel"!==event.type||event.button)}function defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||transform_identity}function defaultWheelDelta(event){return-event.deltaY*(1===event.deltaMode?.05:event.deltaMode?1:.002)*(event.ctrlKey?10:1)}function zoom_defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(transform,extent,translateExtent){var dx0=transform.invertX(extent[0][0])-translateExtent[0][0],dx1=transform.invertX(extent[1][0])-translateExtent[1][0],dy0=transform.invertY(extent[0][1])-translateExtent[0][1],dy1=transform.invertY(extent[1][1])-translateExtent[1][1];return transform.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1))}function zoom(){var touchstarting,touchfirst,touchending,filter=zoom_defaultFilter,extent=defaultExtent,constrain=defaultConstrain,wheelDelta=defaultWheelDelta,touchable=zoom_defaultTouchable,scaleExtent=[0,1/0],translateExtent=[[-1/0,-1/0],[1/0,1/0]],duration=250,interpolate=src_zoom,listeners=src_dispatch("start","zoom","end"),clickDistance2=0,tapDistance=10;function zoom(selection){selection.property("__zoom",defaultTransform).on("wheel.zoom",wheeled,{passive:!1}).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).filter(touchable).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function scale(transform,k){return(k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],k)))===transform.k?transform:new Transform(k,transform.x,transform.y)}function translate(transform,p0,p1){var x=p0[0]-p1[0]*transform.k,y=p0[1]-p1[1]*transform.k;return x===transform.x&&y===transform.y?transform:new Transform(transform.k,x,y)}function centroid(extent){return[(+extent[0][0]+ +extent[1][0])/2,(+extent[0][1]+ +extent[1][1])/2]}function schedule(transition,transform,point,event){transition.on("start.zoom",function(){gesture(this,arguments).event(event).start()}).on("interrupt.zoom end.zoom",function(){gesture(this,arguments).event(event).end()}).tween("zoom",function(){var args=arguments,g=gesture(this,args).event(event),e=extent.apply(this,args),p=null==point?centroid(e):"function"==typeof point?point.apply(this,args):point,w=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),a=this.__zoom,b="function"==typeof transform?transform.apply(this,args):transform,i=interpolate(a.invert(p).concat(w/a.k),b.invert(p).concat(w/b.k));return function(t){if(1===t)t=b;else{var l=i(t),k=w/l[2];t=new Transform(k,p[0]-l[0]*k,p[1]-l[1]*k)}g.zoom(null,t)}})}function gesture(that,args,clean){return!clean&&that.__zooming||new Gesture(that,args)}function Gesture(that,args){this.that=that,this.args=args,this.active=0,this.sourceEvent=null,this.extent=extent.apply(that,args),this.taps=0}function wheeled(event,...args){if(filter.apply(this,arguments)){var g=gesture(this,args).event(event),t=this.__zoom,k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],t.k*Math.pow(2,wheelDelta.apply(this,arguments)))),p=pointer(event);if(g.wheel)g.mouse[0][0]===p[0]&&g.mouse[0][1]===p[1]||(g.mouse[1]=t.invert(g.mouse[0]=p)),clearTimeout(g.wheel);else{if(t.k===k)return;g.mouse=[p,t.invert(p)],interrupt(this),g.start()}src_noevent(event),g.wheel=setTimeout(function wheelidled(){g.wheel=null,g.end()},150),g.zoom("mouse",constrain(translate(scale(t,k),g.mouse[0],g.mouse[1]),g.extent,translateExtent))}}function mousedowned(event,...args){if(!touchending&&filter.apply(this,arguments)){var currentTarget=event.currentTarget,g=gesture(this,args,!0).event(event),v=src_select(event.view).on("mousemove.zoom",function mousemoved(event){if(src_noevent(event),!g.moved){var dx=event.clientX-x0,dy=event.clientY-y0;g.moved=dx*dx+dy*dy>clickDistance2}g.event(event).zoom("mouse",constrain(translate(g.that.__zoom,g.mouse[0]=pointer(event,currentTarget),g.mouse[1]),g.extent,translateExtent))},!0).on("mouseup.zoom",function mouseupped(event){v.on("mousemove.zoom mouseup.zoom",null),yesdrag(event.view,g.moved),src_noevent(event),g.event(event).end()},!0),p=pointer(event,currentTarget),x0=event.clientX,y0=event.clientY;nodrag(event.view),noevent_nopropagation(event),g.mouse=[p,this.__zoom.invert(p)],interrupt(this),g.start()}}function dblclicked(event,...args){if(filter.apply(this,arguments)){var t0=this.__zoom,p0=pointer(event.changedTouches?event.changedTouches[0]:event,this),p1=t0.invert(p0),k1=t0.k*(event.shiftKey?.5:2),t1=constrain(translate(scale(t0,k1),p0,p1),extent.apply(this,args),translateExtent);src_noevent(event),duration>0?src_select(this).transition().duration(duration).call(schedule,t1,p0,event):src_select(this).call(zoom.transform,t1,p0,event)}}function touchstarted(event,...args){if(filter.apply(this,arguments)){var started,i,t,p,touches=event.touches,n=touches.length,g=gesture(this,args,event.changedTouches.length===n).event(event);for(noevent_nopropagation(event),i=0;i<n;++i)p=[p=pointer(t=touches[i],this),this.__zoom.invert(p),t.identifier],g.touch0?g.touch1||g.touch0[2]===p[2]||(g.touch1=p,g.taps=0):(g.touch0=p,started=!0,g.taps=1+!!touchstarting);touchstarting&&(touchstarting=clearTimeout(touchstarting)),started&&(g.taps<2&&(touchfirst=p[0],touchstarting=setTimeout(function(){touchstarting=null},500)),interrupt(this),g.start())}}function touchmoved(event,...args){if(this.__zooming){var i,t,p,l,g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length;for(src_noevent(event),i=0;i<n;++i)p=pointer(t=touches[i],this),g.touch0&&g.touch0[2]===t.identifier?g.touch0[0]=p:g.touch1&&g.touch1[2]===t.identifier&&(g.touch1[0]=p);if(t=g.that.__zoom,g.touch1){var p0=g.touch0[0],l0=g.touch0[1],p1=g.touch1[0],l1=g.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;t=scale(t,Math.sqrt(dp/dl)),p=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2]}else{if(!g.touch0)return;p=g.touch0[0],l=g.touch0[1]}g.zoom("touch",constrain(translate(t,p,l),g.extent,translateExtent))}}function touchended(event,...args){if(this.__zooming){var i,t,g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length;for(noevent_nopropagation(event),touchending&&clearTimeout(touchending),touchending=setTimeout(function(){touchending=null},500),i=0;i<n;++i)t=touches[i],g.touch0&&g.touch0[2]===t.identifier?delete g.touch0:g.touch1&&g.touch1[2]===t.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),2===g.taps&&(t=pointer(t,this),Math.hypot(touchfirst[0]-t[0],touchfirst[1]-t[1])<tapDistance)){var p=src_select(this).on("dblclick.zoom");p&&p.apply(this,arguments)}}}return zoom.transform=function(collection,transform,point,event){var selection=collection.selection?collection.selection():collection;selection.property("__zoom",defaultTransform),collection!==selection?schedule(collection,transform,point,event):selection.interrupt().each(function(){gesture(this,arguments).event(event).start().zoom(null,"function"==typeof transform?transform.apply(this,arguments):transform).end()})},zoom.scaleBy=function(selection,k,p,event){zoom.scaleTo(selection,function(){return this.__zoom.k*("function"==typeof k?k.apply(this,arguments):k)},p,event)},zoom.scaleTo=function(selection,k,p,event){zoom.transform(selection,function(){var e=extent.apply(this,arguments),t0=this.__zoom,p0=null==p?centroid(e):"function"==typeof p?p.apply(this,arguments):p,p1=t0.invert(p0),k1="function"==typeof k?k.apply(this,arguments):k;return constrain(translate(scale(t0,k1),p0,p1),e,translateExtent)},p,event)},zoom.translateBy=function(selection,x,y,event){zoom.transform(selection,function(){return constrain(this.__zoom.translate("function"==typeof x?x.apply(this,arguments):x,"function"==typeof y?y.apply(this,arguments):y),extent.apply(this,arguments),translateExtent)},null,event)},zoom.translateTo=function(selection,x,y,p,event){zoom.transform(selection,function(){var e=extent.apply(this,arguments),t=this.__zoom,p0=null==p?centroid(e):"function"==typeof p?p.apply(this,arguments):p;return constrain(transform_identity.translate(p0[0],p0[1]).scale(t.k).translate("function"==typeof x?-x.apply(this,arguments):-x,"function"==typeof y?-y.apply(this,arguments):-y),e,translateExtent)},p,event)},Gesture.prototype={event:function(event){return event&&(this.sourceEvent=event),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(key,transform){return this.mouse&&"mouse"!==key&&(this.mouse[1]=transform.invert(this.mouse[0])),this.touch0&&"touch"!==key&&(this.touch0[1]=transform.invert(this.touch0[0])),this.touch1&&"touch"!==key&&(this.touch1[1]=transform.invert(this.touch1[0])),this.that.__zoom=transform,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(type){var d=src_select(this.that).datum();listeners.call(type,this.that,new ZoomEvent(type,{sourceEvent:this.sourceEvent,target:zoom,type,transform:this.that.__zoom,dispatch:listeners}),d)}},zoom.wheelDelta=function(_){return arguments.length?(wheelDelta="function"==typeof _?_:d3_zoom_src_constant(+_),zoom):wheelDelta},zoom.filter=function(_){return arguments.length?(filter="function"==typeof _?_:d3_zoom_src_constant(!!_),zoom):filter},zoom.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:d3_zoom_src_constant(!!_),zoom):touchable},zoom.extent=function(_){return arguments.length?(extent="function"==typeof _?_:d3_zoom_src_constant([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),zoom):extent},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent[0]=+_[0],scaleExtent[1]=+_[1],zoom):[scaleExtent[0],scaleExtent[1]]},zoom.translateExtent=function(_){return arguments.length?(translateExtent[0][0]=+_[0][0],translateExtent[1][0]=+_[1][0],translateExtent[0][1]=+_[0][1],translateExtent[1][1]=+_[1][1],zoom):[[translateExtent[0][0],translateExtent[0][1]],[translateExtent[1][0],translateExtent[1][1]]]},zoom.constrain=function(_){return arguments.length?(constrain=_,zoom):constrain},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.interpolate=function(_){return arguments.length?(interpolate=_,zoom):interpolate},zoom.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?zoom:value},zoom.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,zoom):Math.sqrt(clickDistance2)},zoom.tapDistance=function(_){return arguments.length?(tapDistance=+_,zoom):tapDistance},zoom}function genericArray(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function object(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}function src_numberArray(a,b){b||(b=[]);var i,n=a?Math.min(b.length,a.length):0,c=b.slice();return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function value(a,b){var c,t=typeof b;return null==b||"boolean"===t?d3_interpolate_src_constant(b):("number"===t?number:"string"===t?(c=color(b))?(b=c,rgb):string:b instanceof color?rgb:b instanceof Date?date:function numberArray_isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}(b)?src_numberArray:Array.isArray(b)?genericArray:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:number)(a,b)}transform_transform.prototype=Transform.prototype;const errorMessages={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:nodeType=>`Node type "${nodeType}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:id=>`The old edge with id=${id} does not exist.`,error009:type=>`Marker type "${type}" doesn't exist.`,error008:(handleType,{id,sourceHandle,targetHandle})=>`Couldn't create edge for ${handleType} handle id: "${"source"===handleType?sourceHandle:targetHandle}", edge id: ${id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:edgeType=>`Edge type "${edgeType}" not found. Using fallback type "default".`,error012:id=>`Node with id "${id}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(lib="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${lib}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},infiniteExtent=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],elementSelectionKeys=["Enter"," ","Escape"],defaultAriaLabelConfig={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction,x,y})=>`Moved selected node ${direction}. New position, x: ${x}, y: ${y}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ConnectionMode,PanOnScrollMode,SelectionMode;!function(ConnectionMode){ConnectionMode.Strict="strict",ConnectionMode.Loose="loose"}(ConnectionMode||(ConnectionMode={})),function(PanOnScrollMode){PanOnScrollMode.Free="free",PanOnScrollMode.Vertical="vertical",PanOnScrollMode.Horizontal="horizontal"}(PanOnScrollMode||(PanOnScrollMode={})),function(SelectionMode){SelectionMode.Partial="partial",SelectionMode.Full="full"}(SelectionMode||(SelectionMode={}));const initialConnection={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ConnectionLineType,MarkerType,Position;!function(ConnectionLineType){ConnectionLineType.Bezier="default",ConnectionLineType.Straight="straight",ConnectionLineType.Step="step",ConnectionLineType.SmoothStep="smoothstep",ConnectionLineType.SimpleBezier="simplebezier"}(ConnectionLineType||(ConnectionLineType={})),function(MarkerType){MarkerType.Arrow="arrow",MarkerType.ArrowClosed="arrowclosed"}(MarkerType||(MarkerType={})),function(Position){Position.Left="left",Position.Top="top",Position.Right="right",Position.Bottom="bottom"}(Position||(Position={}));const oppositePosition={[Position.Left]:Position.Right,[Position.Right]:Position.Left,[Position.Top]:Position.Bottom,[Position.Bottom]:Position.Top};function getConnectionStatus(isValid){return null===isValid?null:isValid?"valid":"invalid"}const isEdgeBase=element=>"id"in element&&"source"in element&&"target"in element,isNodeBase=element=>"id"in element&&"position"in element&&!("source"in element)&&!("target"in element),isInternalNodeBase=element=>"id"in element&&"internals"in element&&!("source"in element)&&!("target"in element),getNodePositionWithOrigin=(node,nodeOrigin=[0,0])=>{const{width,height}=getNodeDimensions(node),origin=node.origin??nodeOrigin,offsetX=width*origin[0],offsetY=height*origin[1];return{x:node.position.x-offsetX,y:node.position.y-offsetY}},getNodesBounds=(nodes,params={nodeOrigin:[0,0]})=>{if(0===nodes.length)return{x:0,y:0,width:0,height:0};const box=nodes.reduce((currBox,nodeOrId)=>{const isId="string"==typeof nodeOrId;let currentNode=params.nodeLookup||isId?void 0:nodeOrId;params.nodeLookup&&(currentNode=isId?params.nodeLookup.get(nodeOrId):isInternalNodeBase(nodeOrId)?nodeOrId:params.nodeLookup.get(nodeOrId.id));const nodeBox=currentNode?nodeToBox(currentNode,params.nodeOrigin):{x:0,y:0,x2:0,y2:0};return getBoundsOfBoxes(currBox,nodeBox)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return boxToRect(box)},getInternalNodesBounds=(nodeLookup,params={})=>{if(0===nodeLookup.size)return{x:0,y:0,width:0,height:0};let box={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return nodeLookup.forEach(node=>{if(void 0===params.filter||params.filter(node)){const nodeBox=nodeToBox(node);box=getBoundsOfBoxes(box,nodeBox)}}),boxToRect(box)},getNodesInside=(nodes,rect,[tx,ty,tScale]=[0,0,1],partially=!1,excludeNonSelectableNodes=!1)=>{const paneRect={...pointToRendererPoint(rect,[tx,ty,tScale]),width:rect.width/tScale,height:rect.height/tScale},visibleNodes=[];for(const node of nodes.values()){const{measured,selectable=!0,hidden=!1}=node;if(excludeNonSelectableNodes&&!selectable||hidden)continue;const width=measured.width??node.width??node.initialWidth??null,height=measured.height??node.height??node.initialHeight??null,overlappingArea=getOverlappingArea(paneRect,nodeToRect(node)),area=(width??0)*(height??0),partiallyVisible=partially&&overlappingArea>0;(!node.internals.handleBounds||partiallyVisible||overlappingArea>=area||node.dragging)&&visibleNodes.push(node)}return visibleNodes},getConnectedEdges=(nodes,edges)=>{const nodeIds=new Set;return nodes.forEach(node=>{nodeIds.add(node.id)}),edges.filter(edge=>nodeIds.has(edge.source)||nodeIds.has(edge.target))};async function fitViewport({nodes,width,height,panZoom,minZoom,maxZoom},options){if(0===nodes.size)return Promise.resolve(!0);const nodesToFit=function getFitViewNodes(nodeLookup,options){const fitViewNodes=new Map,optionNodeIds=options?.nodes?new Set(options.nodes.map(node=>node.id)):null;return nodeLookup.forEach(n=>{!n.measured.width||!n.measured.height||!options?.includeHiddenNodes&&n.hidden||optionNodeIds&&!optionNodeIds.has(n.id)||fitViewNodes.set(n.id,n)}),fitViewNodes}(nodes,options),bounds=getInternalNodesBounds(nodesToFit),viewport=getViewportForBounds(bounds,width,height,options?.minZoom??minZoom,options?.maxZoom??maxZoom,options?.padding??.1);return await panZoom.setViewport(viewport,{duration:options?.duration,ease:options?.ease,interpolate:options?.interpolate}),Promise.resolve(!0)}function calculateNodePosition({nodeId,nextPosition,nodeLookup,nodeOrigin=[0,0],nodeExtent,onError}){const node=nodeLookup.get(nodeId),parentNode=node.parentId?nodeLookup.get(node.parentId):void 0,{x:parentX,y:parentY}=parentNode?parentNode.internals.positionAbsolute:{x:0,y:0},origin=node.origin??nodeOrigin;let extent=node.extent||nodeExtent;if("parent"!==node.extent||node.expandParent)parentNode&&isCoordinateExtent(node.extent)&&(extent=[[node.extent[0][0]+parentX,node.extent[0][1]+parentY],[node.extent[1][0]+parentX,node.extent[1][1]+parentY]]);else if(parentNode){const parentWidth=parentNode.measured.width,parentHeight=parentNode.measured.height;parentWidth&&parentHeight&&(extent=[[parentX,parentY],[parentX+parentWidth,parentY+parentHeight]])}else onError?.("005",errorMessages.error005());const positionAbsolute=isCoordinateExtent(extent)?clampPosition(nextPosition,extent,node.measured):nextPosition;return void 0!==node.measured.width&&void 0!==node.measured.height||onError?.("015",errorMessages.error015()),{position:{x:positionAbsolute.x-parentX+(node.measured.width??0)*origin[0],y:positionAbsolute.y-parentY+(node.measured.height??0)*origin[1]},positionAbsolute}}async function getElementsToRemove({nodesToRemove=[],edgesToRemove=[],nodes,edges,onBeforeDelete}){const nodeIds=new Set(nodesToRemove.map(node=>node.id)),matchingNodes=[];for(const node of nodes){if(!1===node.deletable)continue;const isIncluded=nodeIds.has(node.id),parentHit=!isIncluded&&node.parentId&&matchingNodes.find(n=>n.id===node.parentId);(isIncluded||parentHit)&&matchingNodes.push(node)}const edgeIds=new Set(edgesToRemove.map(edge=>edge.id)),deletableEdges=edges.filter(edge=>!1!==edge.deletable),matchingEdges=getConnectedEdges(matchingNodes,deletableEdges);for(const edge of deletableEdges){edgeIds.has(edge.id)&&!matchingEdges.find(e=>e.id===edge.id)&&matchingEdges.push(edge)}if(!onBeforeDelete)return{edges:matchingEdges,nodes:matchingNodes};const onBeforeDeleteResult=await onBeforeDelete({nodes:matchingNodes,edges:matchingEdges});return"boolean"==typeof onBeforeDeleteResult?onBeforeDeleteResult?{edges:matchingEdges,nodes:matchingNodes}:{edges:[],nodes:[]}:onBeforeDeleteResult}const clamp=(val,min=0,max=1)=>Math.min(Math.max(val,min),max),clampPosition=(position={x:0,y:0},extent,dimensions)=>({x:clamp(position.x,extent[0][0],extent[1][0]-(dimensions?.width??0)),y:clamp(position.y,extent[0][1],extent[1][1]-(dimensions?.height??0))});function clampPositionToParent(childPosition,childDimensions,parent){const{width:parentWidth,height:parentHeight}=getNodeDimensions(parent),{x:parentX,y:parentY}=parent.internals.positionAbsolute;return clampPosition(childPosition,[[parentX,parentY],[parentX+parentWidth,parentY+parentHeight]],childDimensions)}const calcAutoPanVelocity=(value,min,max)=>value<min?clamp(Math.abs(value-min),1,min)/min:value>max?-clamp(Math.abs(value-max),1,min)/min:0,calcAutoPan=(pos,bounds,speed=15,distance=40)=>[calcAutoPanVelocity(pos.x,distance,bounds.width-distance)*speed,calcAutoPanVelocity(pos.y,distance,bounds.height-distance)*speed],getBoundsOfBoxes=(box1,box2)=>({x:Math.min(box1.x,box2.x),y:Math.min(box1.y,box2.y),x2:Math.max(box1.x2,box2.x2),y2:Math.max(box1.y2,box2.y2)}),rectToBox=({x,y,width,height})=>({x,y,x2:x+width,y2:y+height}),boxToRect=({x,y,x2,y2})=>({x,y,width:x2-x,height:y2-y}),nodeToRect=(node,nodeOrigin=[0,0])=>{const{x,y}=isInternalNodeBase(node)?node.internals.positionAbsolute:getNodePositionWithOrigin(node,nodeOrigin);return{x,y,width:node.measured?.width??node.width??node.initialWidth??0,height:node.measured?.height??node.height??node.initialHeight??0}},nodeToBox=(node,nodeOrigin=[0,0])=>{const{x,y}=isInternalNodeBase(node)?node.internals.positionAbsolute:getNodePositionWithOrigin(node,nodeOrigin);return{x,y,x2:x+(node.measured?.width??node.width??node.initialWidth??0),y2:y+(node.measured?.height??node.height??node.initialHeight??0)}},getBoundsOfRects=(rect1,rect2)=>boxToRect(getBoundsOfBoxes(rectToBox(rect1),rectToBox(rect2))),getOverlappingArea=(rectA,rectB)=>{const xOverlap=Math.max(0,Math.min(rectA.x+rectA.width,rectB.x+rectB.width)-Math.max(rectA.x,rectB.x)),yOverlap=Math.max(0,Math.min(rectA.y+rectA.height,rectB.y+rectB.height)-Math.max(rectA.y,rectB.y));return Math.ceil(xOverlap*yOverlap)},isRectObject=obj=>isNumeric(obj.width)&&isNumeric(obj.height)&&isNumeric(obj.x)&&isNumeric(obj.y),isNumeric=n=>!isNaN(n)&&isFinite(n),devWarn=(id,message)=>{0},snapPosition=(position,snapGrid=[1,1])=>({x:snapGrid[0]*Math.round(position.x/snapGrid[0]),y:snapGrid[1]*Math.round(position.y/snapGrid[1])}),pointToRendererPoint=({x,y},[tx,ty,tScale],snapToGrid=!1,snapGrid=[1,1])=>{const position={x:(x-tx)/tScale,y:(y-ty)/tScale};return snapToGrid?snapPosition(position,snapGrid):position},rendererPointToPoint=({x,y},[tx,ty,tScale])=>({x:x*tScale+tx,y:y*tScale+ty});function parsePadding(padding,viewport){if("number"==typeof padding)return Math.floor(.5*(viewport-viewport/(1+padding)));if("string"==typeof padding&&padding.endsWith("px")){const paddingValue=parseFloat(padding);if(!Number.isNaN(paddingValue))return Math.floor(paddingValue)}if("string"==typeof padding&&padding.endsWith("%")){const paddingValue=parseFloat(padding);if(!Number.isNaN(paddingValue))return Math.floor(viewport*paddingValue*.01)}return console.error(`[React Flow] The padding value "${padding}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}const getViewportForBounds=(bounds,width,height,minZoom,maxZoom,padding)=>{const p=function parsePaddings(padding,width,height){if("string"==typeof padding||"number"==typeof padding){const paddingY=parsePadding(padding,height),paddingX=parsePadding(padding,width);return{top:paddingY,right:paddingX,bottom:paddingY,left:paddingX,x:2*paddingX,y:2*paddingY}}if("object"==typeof padding){const top=parsePadding(padding.top??padding.y??0,height),bottom=parsePadding(padding.bottom??padding.y??0,height),left=parsePadding(padding.left??padding.x??0,width),right=parsePadding(padding.right??padding.x??0,width);return{top,right,bottom,left,x:left+right,y:top+bottom}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(padding,width,height),xZoom=(width-p.x)/bounds.width,yZoom=(height-p.y)/bounds.height,zoom=Math.min(xZoom,yZoom),clampedZoom=clamp(zoom,minZoom,maxZoom),x=width/2-(bounds.x+bounds.width/2)*clampedZoom,y=height/2-(bounds.y+bounds.height/2)*clampedZoom,newPadding=function calculateAppliedPaddings(bounds,x,y,zoom,width,height){const{x:left,y:top}=rendererPointToPoint(bounds,[x,y,zoom]),{x:boundRight,y:boundBottom}=rendererPointToPoint({x:bounds.x+bounds.width,y:bounds.y+bounds.height},[x,y,zoom]),right=width-boundRight,bottom=height-boundBottom;return{left:Math.floor(left),top:Math.floor(top),right:Math.floor(right),bottom:Math.floor(bottom)}}(bounds,x,y,clampedZoom,width,height),offset_left=Math.min(newPadding.left-p.left,0),offset_top=Math.min(newPadding.top-p.top,0);return{x:x-offset_left+Math.min(newPadding.right-p.right,0),y:y-offset_top+Math.min(newPadding.bottom-p.bottom,0),zoom:clampedZoom}},isMacOs=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function isCoordinateExtent(extent){return void 0!==extent&&"parent"!==extent}function getNodeDimensions(node){return{width:node.measured?.width??node.width??node.initialWidth??0,height:node.measured?.height??node.height??node.initialHeight??0}}function nodeHasDimensions(node){return void 0!==(node.measured?.width??node.width??node.initialWidth)&&void 0!==(node.measured?.height??node.height??node.initialHeight)}function evaluateAbsolutePosition(position,dimensions={width:0,height:0},parentId,nodeLookup,nodeOrigin){const positionAbsolute={...position},parent=nodeLookup.get(parentId);if(parent){const origin=parent.origin||nodeOrigin;positionAbsolute.x+=parent.internals.positionAbsolute.x-(dimensions.width??0)*origin[0],positionAbsolute.y+=parent.internals.positionAbsolute.y-(dimensions.height??0)*origin[1]}return positionAbsolute}function areSetsEqual(a,b){if(a.size!==b.size)return!1;for(const item of a)if(!b.has(item))return!1;return!0}function withResolvers(){let resolve,reject;return{promise:new Promise((res,rej)=>{resolve=res,reject=rej}),resolve,reject}}function mergeAriaLabelConfig(partial){return{...defaultAriaLabelConfig,...partial||{}}}function getPointerPosition(event,{snapGrid=[0,0],snapToGrid=!1,transform,containerBounds}){const{x,y}=getEventPosition(event),pointerPos=pointToRendererPoint({x:x-(containerBounds?.left??0),y:y-(containerBounds?.top??0)},transform),{x:xSnapped,y:ySnapped}=snapToGrid?snapPosition(pointerPos,snapGrid):pointerPos;return{xSnapped,ySnapped,...pointerPos}}const getDimensions=node=>({width:node.offsetWidth,height:node.offsetHeight}),getHostForElement=element=>element?.getRootNode?.()||window?.document,inputTags=["INPUT","SELECT","TEXTAREA"];function isInputDOMNode(event){const target=event.composedPath?.()?.[0]||event.target;if(1!==target?.nodeType)return!1;return inputTags.includes(target.nodeName)||target.hasAttribute("contenteditable")||!!target.closest(".nokey")}const isMouseEvent=event=>"clientX"in event,getEventPosition=(event,bounds)=>{const isMouse=isMouseEvent(event),evtX=isMouse?event.clientX:event.touches?.[0].clientX,evtY=isMouse?event.clientY:event.touches?.[0].clientY;return{x:evtX-(bounds?.left??0),y:evtY-(bounds?.top??0)}},getHandleBounds=(type,nodeElement,nodeBounds,zoom,nodeId)=>{const handles=nodeElement.querySelectorAll(`.${type}`);return handles&&handles.length?Array.from(handles).map(handle=>{const handleBounds=handle.getBoundingClientRect();return{id:handle.getAttribute("data-handleid"),type,nodeId,position:handle.getAttribute("data-handlepos"),x:(handleBounds.left-nodeBounds.left)/zoom,y:(handleBounds.top-nodeBounds.top)/zoom,...getDimensions(handle)}}):null};function getBezierEdgeCenter({sourceX,sourceY,targetX,targetY,sourceControlX,sourceControlY,targetControlX,targetControlY}){const centerX=.125*sourceX+.375*sourceControlX+.375*targetControlX+.125*targetX,centerY=.125*sourceY+.375*sourceControlY+.375*targetControlY+.125*targetY;return[centerX,centerY,Math.abs(centerX-sourceX),Math.abs(centerY-sourceY)]}function calculateControlOffset(distance,curvature){return distance>=0?.5*distance:25*curvature*Math.sqrt(-distance)}function getControlWithCurvature({pos,x1,y1,x2,y2,c}){switch(pos){case Position.Left:return[x1-calculateControlOffset(x1-x2,c),y1];case Position.Right:return[x1+calculateControlOffset(x2-x1,c),y1];case Position.Top:return[x1,y1-calculateControlOffset(y1-y2,c)];case Position.Bottom:return[x1,y1+calculateControlOffset(y2-y1,c)]}}function getBezierPath({sourceX,sourceY,sourcePosition=Position.Bottom,targetX,targetY,targetPosition=Position.Top,curvature=.25}){const[sourceControlX,sourceControlY]=getControlWithCurvature({pos:sourcePosition,x1:sourceX,y1:sourceY,x2:targetX,y2:targetY,c:curvature}),[targetControlX,targetControlY]=getControlWithCurvature({pos:targetPosition,x1:targetX,y1:targetY,x2:sourceX,y2:sourceY,c:curvature}),[labelX,labelY,offsetX,offsetY]=getBezierEdgeCenter({sourceX,sourceY,targetX,targetY,sourceControlX,sourceControlY,targetControlX,targetControlY});return[`M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,labelX,labelY,offsetX,offsetY]}function getEdgeCenter({sourceX,sourceY,targetX,targetY}){const xOffset=Math.abs(targetX-sourceX)/2,centerX=targetX<sourceX?targetX+xOffset:targetX-xOffset,yOffset=Math.abs(targetY-sourceY)/2;return[centerX,targetY<sourceY?targetY+yOffset:targetY-yOffset,xOffset,yOffset]}function getElevatedEdgeZIndex({sourceNode,targetNode,selected=!1,zIndex,elevateOnSelect=!1}){if(void 0!==zIndex)return zIndex;return(elevateOnSelect&&selected?1e3:0)+Math.max(sourceNode.parentId?sourceNode.internals.z:0,targetNode.parentId?targetNode.internals.z:0)}function isEdgeVisible({sourceNode,targetNode,width,height,transform}){const edgeBox=getBoundsOfBoxes(nodeToBox(sourceNode),nodeToBox(targetNode));edgeBox.x===edgeBox.x2&&(edgeBox.x2+=1),edgeBox.y===edgeBox.y2&&(edgeBox.y2+=1);const viewRect={x:-transform[0]/transform[2],y:-transform[1]/transform[2],width:width/transform[2],height:height/transform[2]};return getOverlappingArea(viewRect,boxToRect(edgeBox))>0}const getEdgeId=({source,sourceHandle,target,targetHandle})=>`xy-edge__${source}${sourceHandle||""}-${target}${targetHandle||""}`,addEdge=(edgeParams,edges)=>{if(!edgeParams.source||!edgeParams.target)return devWarn("006",errorMessages.error006()),edges;let edge;return edge=isEdgeBase(edgeParams)?{...edgeParams}:{...edgeParams,id:getEdgeId(edgeParams)},((edge,edges)=>edges.some(el=>!(el.source!==edge.source||el.target!==edge.target||el.sourceHandle!==edge.sourceHandle&&(el.sourceHandle||edge.sourceHandle)||el.targetHandle!==edge.targetHandle&&(el.targetHandle||edge.targetHandle))))(edge,edges)?edges:(null===edge.sourceHandle&&delete edge.sourceHandle,null===edge.targetHandle&&delete edge.targetHandle,edges.concat(edge))};function getStraightPath({sourceX,sourceY,targetX,targetY}){const[labelX,labelY,offsetX,offsetY]=getEdgeCenter({sourceX,sourceY,targetX,targetY});return[`M ${sourceX},${sourceY}L ${targetX},${targetY}`,labelX,labelY,offsetX,offsetY]}const handleDirections={[Position.Left]:{x:-1,y:0},[Position.Right]:{x:1,y:0},[Position.Top]:{x:0,y:-1},[Position.Bottom]:{x:0,y:1}},getDirection=({source,sourcePosition=Position.Bottom,target})=>sourcePosition===Position.Left||sourcePosition===Position.Right?source.x<target.x?{x:1,y:0}:{x:-1,y:0}:source.y<target.y?{x:0,y:1}:{x:0,y:-1},distance=(a,b)=>Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));function getSmoothStepPath({sourceX,sourceY,sourcePosition=Position.Bottom,targetX,targetY,targetPosition=Position.Top,borderRadius=5,centerX,centerY,offset=20,stepPosition=.5}){const[points,labelX,labelY,offsetX,offsetY]=function getPoints({source,sourcePosition=Position.Bottom,target,targetPosition=Position.Top,center,offset,stepPosition}){const sourceDir=handleDirections[sourcePosition],targetDir=handleDirections[targetPosition],sourceGapped={x:source.x+sourceDir.x*offset,y:source.y+sourceDir.y*offset},targetGapped={x:target.x+targetDir.x*offset,y:target.y+targetDir.y*offset},dir=getDirection({source:sourceGapped,sourcePosition,target:targetGapped}),dirAccessor=0!==dir.x?"x":"y",currDir=dir[dirAccessor];let centerX,centerY,points=[];const sourceGapOffset={x:0,y:0},targetGapOffset={x:0,y:0},[,,defaultOffsetX,defaultOffsetY]=getEdgeCenter({sourceX:source.x,sourceY:source.y,targetX:target.x,targetY:target.y});if(sourceDir[dirAccessor]*targetDir[dirAccessor]===-1){"x"===dirAccessor?(centerX=center.x??sourceGapped.x+(targetGapped.x-sourceGapped.x)*stepPosition,centerY=center.y??(sourceGapped.y+targetGapped.y)/2):(centerX=center.x??(sourceGapped.x+targetGapped.x)/2,centerY=center.y??sourceGapped.y+(targetGapped.y-sourceGapped.y)*stepPosition);const verticalSplit=[{x:centerX,y:sourceGapped.y},{x:centerX,y:targetGapped.y}],horizontalSplit=[{x:sourceGapped.x,y:centerY},{x:targetGapped.x,y:centerY}];points=sourceDir[dirAccessor]===currDir?"x"===dirAccessor?verticalSplit:horizontalSplit:"x"===dirAccessor?horizontalSplit:verticalSplit}else{const sourceTarget=[{x:sourceGapped.x,y:targetGapped.y}],targetSource=[{x:targetGapped.x,y:sourceGapped.y}];if(points="x"===dirAccessor?sourceDir.x===currDir?targetSource:sourceTarget:sourceDir.y===currDir?sourceTarget:targetSource,sourcePosition===targetPosition){const diff=Math.abs(source[dirAccessor]-target[dirAccessor]);if(diff<=offset){const gapOffset=Math.min(offset-1,offset-diff);sourceDir[dirAccessor]===currDir?sourceGapOffset[dirAccessor]=(sourceGapped[dirAccessor]>source[dirAccessor]?-1:1)*gapOffset:targetGapOffset[dirAccessor]=(targetGapped[dirAccessor]>target[dirAccessor]?-1:1)*gapOffset}}if(sourcePosition!==targetPosition){const dirAccessorOpposite="x"===dirAccessor?"y":"x",isSameDir=sourceDir[dirAccessor]===targetDir[dirAccessorOpposite],sourceGtTargetOppo=sourceGapped[dirAccessorOpposite]>targetGapped[dirAccessorOpposite],sourceLtTargetOppo=sourceGapped[dirAccessorOpposite]<targetGapped[dirAccessorOpposite];(1===sourceDir[dirAccessor]&&(!isSameDir&&sourceGtTargetOppo||isSameDir&&sourceLtTargetOppo)||1!==sourceDir[dirAccessor]&&(!isSameDir&&sourceLtTargetOppo||isSameDir&&sourceGtTargetOppo))&&(points="x"===dirAccessor?sourceTarget:targetSource)}const sourceGapPoint={x:sourceGapped.x+sourceGapOffset.x,y:sourceGapped.y+sourceGapOffset.y},targetGapPoint={x:targetGapped.x+targetGapOffset.x,y:targetGapped.y+targetGapOffset.y};Math.max(Math.abs(sourceGapPoint.x-points[0].x),Math.abs(targetGapPoint.x-points[0].x))>=Math.max(Math.abs(sourceGapPoint.y-points[0].y),Math.abs(targetGapPoint.y-points[0].y))?(centerX=(sourceGapPoint.x+targetGapPoint.x)/2,centerY=points[0].y):(centerX=points[0].x,centerY=(sourceGapPoint.y+targetGapPoint.y)/2)}return[[source,{x:sourceGapped.x+sourceGapOffset.x,y:sourceGapped.y+sourceGapOffset.y},...points,{x:targetGapped.x+targetGapOffset.x,y:targetGapped.y+targetGapOffset.y},target],centerX,centerY,defaultOffsetX,defaultOffsetY]}({source:{x:sourceX,y:sourceY},sourcePosition,target:{x:targetX,y:targetY},targetPosition,center:{x:centerX,y:centerY},offset,stepPosition}),path=points.reduce((res,p,i)=>{let segment="";return segment=i>0&&i<points.length-1?function getBend(a,b,c,size){const bendSize=Math.min(distance(a,b)/2,distance(b,c)/2,size),{x,y}=b;if(a.x===x&&x===c.x||a.y===y&&y===c.y)return`L${x} ${y}`;if(a.y===y)return`L ${x+bendSize*(a.x<c.x?-1:1)},${y}Q ${x},${y} ${x},${y+bendSize*(a.y<c.y?1:-1)}`;const xDir=a.x<c.x?1:-1;return`L ${x},${y+bendSize*(a.y<c.y?-1:1)}Q ${x},${y} ${x+bendSize*xDir},${y}`}(points[i-1],p,points[i+1],borderRadius):`${0===i?"M":"L"}${p.x} ${p.y}`,res+=segment},"");return[path,labelX,labelY,offsetX,offsetY]}function isNodeInitialized(node){return node&&!(!node.internals.handleBounds&&!node.handles?.length)&&!!(node.measured.width||node.width||node.initialWidth)}function getEdgePosition(params){const{sourceNode,targetNode}=params;if(!isNodeInitialized(sourceNode)||!isNodeInitialized(targetNode))return null;const sourceHandleBounds=sourceNode.internals.handleBounds||toHandleBounds(sourceNode.handles),targetHandleBounds=targetNode.internals.handleBounds||toHandleBounds(targetNode.handles),sourceHandle=getHandle$1(sourceHandleBounds?.source??[],params.sourceHandle),targetHandle=getHandle$1(params.connectionMode===ConnectionMode.Strict?targetHandleBounds?.target??[]:(targetHandleBounds?.target??[]).concat(targetHandleBounds?.source??[]),params.targetHandle);if(!sourceHandle||!targetHandle)return params.onError?.("008",errorMessages.error008(sourceHandle?"target":"source",{id:params.id,sourceHandle:params.sourceHandle,targetHandle:params.targetHandle})),null;const sourcePosition=sourceHandle?.position||Position.Bottom,targetPosition=targetHandle?.position||Position.Top,source=getHandlePosition(sourceNode,sourceHandle,sourcePosition),target=getHandlePosition(targetNode,targetHandle,targetPosition);return{sourceX:source.x,sourceY:source.y,targetX:target.x,targetY:target.y,sourcePosition,targetPosition}}function toHandleBounds(handles){if(!handles)return null;const source=[],target=[];for(const handle of handles)handle.width=handle.width??1,handle.height=handle.height??1,"source"===handle.type?source.push(handle):"target"===handle.type&&target.push(handle);return{source,target}}function getHandlePosition(node,handle,fallbackPosition=Position.Left,center=!1){const x=(handle?.x??0)+node.internals.positionAbsolute.x,y=(handle?.y??0)+node.internals.positionAbsolute.y,{width,height}=handle??getNodeDimensions(node);if(center)return{x:x+width/2,y:y+height/2};switch(handle?.position??fallbackPosition){case Position.Top:return{x:x+width/2,y};case Position.Right:return{x:x+width,y:y+height/2};case Position.Bottom:return{x:x+width/2,y:y+height};case Position.Left:return{x,y:y+height/2}}}function getHandle$1(bounds,handleId){return bounds&&(handleId?bounds.find(d=>d.id===handleId):bounds[0])||null}function getMarkerId(marker,id){if(!marker)return"";if("string"==typeof marker)return marker;return`${id?`${id}__`:""}${Object.keys(marker).sort().map(key=>`${key}=${marker[key]}`).join("&")}`}function createMarkerIds(edges,{id,defaultColor,defaultMarkerStart,defaultMarkerEnd}){const ids=new Set;return edges.reduce((markers,edge)=>([edge.markerStart||defaultMarkerStart,edge.markerEnd||defaultMarkerEnd].forEach(marker=>{if(marker&&"object"==typeof marker){const markerId=getMarkerId(marker,id);ids.has(markerId)||(markers.push({id:markerId,color:marker.color||defaultColor,...marker}),ids.add(markerId))}}),markers),[]).sort((a,b)=>a.id.localeCompare(b.id))}const defaultOptions={nodeOrigin:[0,0],nodeExtent:infiniteExtent,elevateNodesOnSelect:!0,defaults:{}},adoptUserNodesDefaultOptions={...defaultOptions,checkEquality:!0};function mergeObjects(base,incoming){const result={...base};for(const key in incoming)void 0!==incoming[key]&&(result[key]=incoming[key]);return result}function updateAbsolutePositions(nodeLookup,parentLookup,options){const _options=mergeObjects(defaultOptions,options);for(const node of nodeLookup.values())if(node.parentId)updateChildNode(node,nodeLookup,parentLookup,_options);else{const positionWithOrigin=getNodePositionWithOrigin(node,_options.nodeOrigin),extent=isCoordinateExtent(node.extent)?node.extent:_options.nodeExtent,clampedPosition=clampPosition(positionWithOrigin,extent,getNodeDimensions(node));node.internals.positionAbsolute=clampedPosition}}function adoptUserNodes(nodes,nodeLookup,parentLookup,options){const _options=mergeObjects(adoptUserNodesDefaultOptions,options);let nodesInitialized=nodes.length>0;const tmpLookup=new Map(nodeLookup),selectedNodeZ=_options?.elevateNodesOnSelect?1e3:0;nodeLookup.clear(),parentLookup.clear();for(const userNode of nodes){let internalNode=tmpLookup.get(userNode.id);if(_options.checkEquality&&userNode===internalNode?.internals.userNode)nodeLookup.set(userNode.id,internalNode);else{const positionWithOrigin=getNodePositionWithOrigin(userNode,_options.nodeOrigin),extent=isCoordinateExtent(userNode.extent)?userNode.extent:_options.nodeExtent,clampedPosition=clampPosition(positionWithOrigin,extent,getNodeDimensions(userNode));internalNode={..._options.defaults,...userNode,measured:{width:userNode.measured?.width,height:userNode.measured?.height},internals:{positionAbsolute:clampedPosition,handleBounds:userNode.measured?internalNode?.internals.handleBounds:void 0,z:calculateZ(userNode,selectedNodeZ),userNode}},nodeLookup.set(userNode.id,internalNode)}void 0!==internalNode.measured&&void 0!==internalNode.measured.width&&void 0!==internalNode.measured.height||internalNode.hidden||(nodesInitialized=!1),userNode.parentId&&updateChildNode(internalNode,nodeLookup,parentLookup,options)}return nodesInitialized}function updateChildNode(node,nodeLookup,parentLookup,options){const{elevateNodesOnSelect,nodeOrigin,nodeExtent}=mergeObjects(defaultOptions,options),parentId=node.parentId,parentNode=nodeLookup.get(parentId);if(!parentNode)return void console.warn(`Parent node ${parentId} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function updateParentLookup(node,parentLookup){if(!node.parentId)return;const childNodes=parentLookup.get(node.parentId);childNodes?childNodes.set(node.id,node):parentLookup.set(node.parentId,new Map([[node.id,node]]))}(node,parentLookup);const selectedNodeZ=elevateNodesOnSelect?1e3:0,{x,y,z}=function calculateChildXYZ(childNode,parentNode,nodeOrigin,nodeExtent,selectedNodeZ){const{x:parentX,y:parentY}=parentNode.internals.positionAbsolute,childDimensions=getNodeDimensions(childNode),positionWithOrigin=getNodePositionWithOrigin(childNode,nodeOrigin),clampedPosition=isCoordinateExtent(childNode.extent)?clampPosition(positionWithOrigin,childNode.extent,childDimensions):positionWithOrigin;let absolutePosition=clampPosition({x:parentX+clampedPosition.x,y:parentY+clampedPosition.y},nodeExtent,childDimensions);"parent"===childNode.extent&&(absolutePosition=clampPositionToParent(absolutePosition,childDimensions,parentNode));const childZ=calculateZ(childNode,selectedNodeZ),parentZ=parentNode.internals.z??0;return{x:absolutePosition.x,y:absolutePosition.y,z:parentZ>=childZ?parentZ+1:childZ}}(node,parentNode,nodeOrigin,nodeExtent,selectedNodeZ),{positionAbsolute}=node.internals,positionChanged=x!==positionAbsolute.x||y!==positionAbsolute.y;(positionChanged||z!==node.internals.z)&&nodeLookup.set(node.id,{...node,internals:{...node.internals,positionAbsolute:positionChanged?{x,y}:positionAbsolute,z}})}function calculateZ(node,selectedNodeZ){return(isNumeric(node.zIndex)?node.zIndex:0)+(node.selected?selectedNodeZ:0)}function handleExpandParent(children,nodeLookup,parentLookup,nodeOrigin=[0,0]){const changes=[],parentExpansions=new Map;for(const child of children){const parent=nodeLookup.get(child.parentId);if(!parent)continue;const parentRect=parentExpansions.get(child.parentId)?.expandedRect??nodeToRect(parent),expandedRect=getBoundsOfRects(parentRect,child.rect);parentExpansions.set(child.parentId,{expandedRect,parent})}return parentExpansions.size>0&&parentExpansions.forEach(({expandedRect,parent},parentId)=>{const positionAbsolute=parent.internals.positionAbsolute,dimensions=getNodeDimensions(parent),origin=parent.origin??nodeOrigin,xChange=expandedRect.x<positionAbsolute.x?Math.round(Math.abs(positionAbsolute.x-expandedRect.x)):0,yChange=expandedRect.y<positionAbsolute.y?Math.round(Math.abs(positionAbsolute.y-expandedRect.y)):0,newWidth=Math.max(dimensions.width,Math.round(expandedRect.width)),newHeight=Math.max(dimensions.height,Math.round(expandedRect.height)),widthChange=(newWidth-dimensions.width)*origin[0],heightChange=(newHeight-dimensions.height)*origin[1];(xChange>0||yChange>0||widthChange||heightChange)&&(changes.push({id:parentId,type:"position",position:{x:parent.position.x-xChange+widthChange,y:parent.position.y-yChange+heightChange}}),parentLookup.get(parentId)?.forEach(childNode=>{children.some(child=>child.id===childNode.id)||changes.push({id:childNode.id,type:"position",position:{x:childNode.position.x+xChange,y:childNode.position.y+yChange}})})),(dimensions.width<expandedRect.width||dimensions.height<expandedRect.height||xChange||yChange)&&changes.push({id:parentId,type:"dimensions",setAttributes:!0,dimensions:{width:newWidth+(xChange?origin[0]*xChange-widthChange:0),height:newHeight+(yChange?origin[1]*yChange-heightChange:0)}})}),changes}function updateNodeInternals(updates,nodeLookup,parentLookup,domNode,nodeOrigin,nodeExtent){const viewportNode=domNode?.querySelector(".xyflow__viewport");let updatedInternals=!1;if(!viewportNode)return{changes:[],updatedInternals};const changes=[],style=window.getComputedStyle(viewportNode),{m22:zoom}=new window.DOMMatrixReadOnly(style.transform),parentExpandChildren=[];for(const update of updates.values()){const node=nodeLookup.get(update.id);if(!node)continue;if(node.hidden){nodeLookup.set(node.id,{...node,internals:{...node.internals,handleBounds:void 0}}),updatedInternals=!0;continue}const dimensions=getDimensions(update.nodeElement),dimensionChanged=node.measured.width!==dimensions.width||node.measured.height!==dimensions.height;if(!(!dimensions.width||!dimensions.height||!dimensionChanged&&node.internals.handleBounds&&!update.force)){const nodeBounds=update.nodeElement.getBoundingClientRect(),extent=isCoordinateExtent(node.extent)?node.extent:nodeExtent;let{positionAbsolute}=node.internals;node.parentId&&"parent"===node.extent?positionAbsolute=clampPositionToParent(positionAbsolute,dimensions,nodeLookup.get(node.parentId)):extent&&(positionAbsolute=clampPosition(positionAbsolute,extent,dimensions));const newNode={...node,measured:dimensions,internals:{...node.internals,positionAbsolute,handleBounds:{source:getHandleBounds("source",update.nodeElement,nodeBounds,zoom,node.id),target:getHandleBounds("target",update.nodeElement,nodeBounds,zoom,node.id)}}};nodeLookup.set(node.id,newNode),node.parentId&&updateChildNode(newNode,nodeLookup,parentLookup,{nodeOrigin}),updatedInternals=!0,dimensionChanged&&(changes.push({id:node.id,type:"dimensions",dimensions}),node.expandParent&&node.parentId&&parentExpandChildren.push({id:node.id,parentId:node.parentId,rect:nodeToRect(newNode,nodeOrigin)}))}}if(parentExpandChildren.length>0){const parentExpandChanges=handleExpandParent(parentExpandChildren,nodeLookup,parentLookup,nodeOrigin);changes.push(...parentExpandChanges)}return{changes,updatedInternals}}async function panBy({delta,panZoom,transform,translateExtent,width,height}){if(!panZoom||!delta.x&&!delta.y)return Promise.resolve(!1);const nextViewport=await panZoom.setViewportConstrained({x:transform[0]+delta.x,y:transform[1]+delta.y,zoom:transform[2]},[[0,0],[width,height]],translateExtent),transformChanged=!!nextViewport&&(nextViewport.x!==transform[0]||nextViewport.y!==transform[1]||nextViewport.k!==transform[2]);return Promise.resolve(transformChanged)}function addConnectionToLookup(type,connection,connectionKey,connectionLookup,nodeId,handleId){let key=nodeId;const nodeMap=connectionLookup.get(key)||new Map;connectionLookup.set(key,nodeMap.set(connectionKey,connection)),key=`${nodeId}-${type}`;const typeMap=connectionLookup.get(key)||new Map;if(connectionLookup.set(key,typeMap.set(connectionKey,connection)),handleId){key=`${nodeId}-${type}-${handleId}`;const handleMap=connectionLookup.get(key)||new Map;connectionLookup.set(key,handleMap.set(connectionKey,connection))}}function updateConnectionLookup(connectionLookup,edgeLookup,edges){connectionLookup.clear(),edgeLookup.clear();for(const edge of edges){const{source:sourceNode,target:targetNode,sourceHandle=null,targetHandle=null}=edge,connection={edgeId:edge.id,source:sourceNode,target:targetNode,sourceHandle,targetHandle},sourceKey=`${sourceNode}-${sourceHandle}--${targetNode}-${targetHandle}`;addConnectionToLookup("source",connection,`${targetNode}-${targetHandle}--${sourceNode}-${sourceHandle}`,connectionLookup,sourceNode,sourceHandle),addConnectionToLookup("target",connection,sourceKey,connectionLookup,targetNode,targetHandle),edgeLookup.set(edge.id,edge)}}function isParentSelected(node,nodeLookup){if(!node.parentId)return!1;const parentNode=nodeLookup.get(node.parentId);return!!parentNode&&(!!parentNode.selected||isParentSelected(parentNode,nodeLookup))}function hasSelector(target,selector,domNode){let current=target;do{if(current?.matches?.(selector))return!0;if(current===domNode)return!1;current=current?.parentElement}while(current);return!1}function getEventHandlerParams({nodeId,dragItems,nodeLookup,dragging=!0}){const nodesFromDragItems=[];for(const[id,dragItem]of dragItems){const node=nodeLookup.get(id)?.internals.userNode;node&&nodesFromDragItems.push({...node,position:dragItem.position,dragging})}if(!nodeId)return[nodesFromDragItems[0],nodesFromDragItems];const node=nodeLookup.get(nodeId)?.internals.userNode;return[node?{...node,position:dragItems.get(nodeId)?.position||node.position,dragging}:nodesFromDragItems[0],nodesFromDragItems]}function XYDrag({onNodeMouseDown,getStoreItems,onDragStart,onDrag,onDragStop}){let lastPos={x:null,y:null},autoPanId=0,dragItems=new Map,autoPanStarted=!1,mousePosition={x:0,y:0},containerBounds=null,dragStarted=!1,d3Selection=null,abortDrag=!1,nodePositionsChanged=!1;return{update:function update({noDragClassName,handleSelector,domNode,isSelectable,nodeId,nodeClickDistance=0}){function updateNodes({x,y},dragEvent){const{nodeLookup,nodeExtent,snapGrid,snapToGrid,nodeOrigin,onNodeDrag,onSelectionDrag,onError,updateNodePositions}=getStoreItems();lastPos={x,y};let hasChange=!1,nodesBox={x:0,y:0,x2:0,y2:0};if(dragItems.size>1&&nodeExtent){const rect=getInternalNodesBounds(dragItems);nodesBox=rectToBox(rect)}for(const[id,dragItem]of dragItems){if(!nodeLookup.has(id))continue;let nextPosition={x:x-dragItem.distance.x,y:y-dragItem.distance.y};snapToGrid&&(nextPosition=snapPosition(nextPosition,snapGrid));let adjustedNodeExtent=[[nodeExtent[0][0],nodeExtent[0][1]],[nodeExtent[1][0],nodeExtent[1][1]]];if(dragItems.size>1&&nodeExtent&&!dragItem.extent){const{positionAbsolute}=dragItem.internals,x1=positionAbsolute.x-nodesBox.x+nodeExtent[0][0],x2=positionAbsolute.x+dragItem.measured.width-nodesBox.x2+nodeExtent[1][0];adjustedNodeExtent=[[x1,positionAbsolute.y-nodesBox.y+nodeExtent[0][1]],[x2,positionAbsolute.y+dragItem.measured.height-nodesBox.y2+nodeExtent[1][1]]]}const{position,positionAbsolute}=calculateNodePosition({nodeId:id,nextPosition,nodeLookup,nodeExtent:adjustedNodeExtent,nodeOrigin,onError});hasChange=hasChange||dragItem.position.x!==position.x||dragItem.position.y!==position.y,dragItem.position=position,dragItem.internals.positionAbsolute=positionAbsolute}if(nodePositionsChanged=nodePositionsChanged||hasChange,hasChange&&(updateNodePositions(dragItems,!0),dragEvent&&(onDrag||onNodeDrag||!nodeId&&onSelectionDrag))){const[currentNode,currentNodes]=getEventHandlerParams({nodeId,dragItems,nodeLookup});onDrag?.(dragEvent,dragItems,currentNode,currentNodes),onNodeDrag?.(dragEvent,currentNode,currentNodes),nodeId||onSelectionDrag?.(dragEvent,currentNodes)}}async function autoPan(){if(!containerBounds)return;const{transform,panBy,autoPanSpeed,autoPanOnNodeDrag}=getStoreItems();if(!autoPanOnNodeDrag)return autoPanStarted=!1,void cancelAnimationFrame(autoPanId);const[xMovement,yMovement]=calcAutoPan(mousePosition,containerBounds,autoPanSpeed);0===xMovement&&0===yMovement||(lastPos.x=(lastPos.x??0)-xMovement/transform[2],lastPos.y=(lastPos.y??0)-yMovement/transform[2],await panBy({x:xMovement,y:yMovement})&&updateNodes(lastPos,null)),autoPanId=requestAnimationFrame(autoPan)}function startDrag(event){const{nodeLookup,multiSelectionActive,nodesDraggable,transform,snapGrid,snapToGrid,selectNodesOnDrag,onNodeDragStart,onSelectionDragStart,unselectNodesAndEdges}=getStoreItems();dragStarted=!0,selectNodesOnDrag&&isSelectable||multiSelectionActive||!nodeId||nodeLookup.get(nodeId)?.selected||unselectNodesAndEdges(),isSelectable&&selectNodesOnDrag&&nodeId&&onNodeMouseDown?.(nodeId);const pointerPos=getPointerPosition(event.sourceEvent,{transform,snapGrid,snapToGrid,containerBounds});if(lastPos=pointerPos,dragItems=function getDragItems(nodeLookup,nodesDraggable,mousePos,nodeId){const dragItems=new Map;for(const[id,node]of nodeLookup)if((node.selected||node.id===nodeId)&&(!node.parentId||!isParentSelected(node,nodeLookup))&&(node.draggable||nodesDraggable&&void 0===node.draggable)){const internalNode=nodeLookup.get(id);internalNode&&dragItems.set(id,{id,position:internalNode.position||{x:0,y:0},distance:{x:mousePos.x-internalNode.internals.positionAbsolute.x,y:mousePos.y-internalNode.internals.positionAbsolute.y},extent:internalNode.extent,parentId:internalNode.parentId,origin:internalNode.origin,expandParent:internalNode.expandParent,internals:{positionAbsolute:internalNode.internals.positionAbsolute||{x:0,y:0}},measured:{width:internalNode.measured.width??0,height:internalNode.measured.height??0}})}return dragItems}(nodeLookup,nodesDraggable,pointerPos,nodeId),dragItems.size>0&&(onDragStart||onNodeDragStart||!nodeId&&onSelectionDragStart)){const[currentNode,currentNodes]=getEventHandlerParams({nodeId,dragItems,nodeLookup});onDragStart?.(event.sourceEvent,dragItems,currentNode,currentNodes),onNodeDragStart?.(event.sourceEvent,currentNode,currentNodes),nodeId||onSelectionDragStart?.(event.sourceEvent,currentNodes)}}d3Selection=src_select(domNode);const d3DragInstance=drag().clickDistance(nodeClickDistance).on("start",event=>{const{domNode,nodeDragThreshold,transform,snapGrid,snapToGrid}=getStoreItems();containerBounds=domNode?.getBoundingClientRect()||null,abortDrag=!1,nodePositionsChanged=!1,0===nodeDragThreshold&&startDrag(event);const pointerPos=getPointerPosition(event.sourceEvent,{transform,snapGrid,snapToGrid,containerBounds});lastPos=pointerPos,mousePosition=getEventPosition(event.sourceEvent,containerBounds)}).on("drag",event=>{const{autoPanOnNodeDrag,transform,snapGrid,snapToGrid,nodeDragThreshold,nodeLookup}=getStoreItems(),pointerPos=getPointerPosition(event.sourceEvent,{transform,snapGrid,snapToGrid,containerBounds});if(("touchmove"===event.sourceEvent.type&&event.sourceEvent.touches.length>1||nodeId&&!nodeLookup.has(nodeId))&&(abortDrag=!0),!abortDrag){if(!autoPanStarted&&autoPanOnNodeDrag&&dragStarted&&(autoPanStarted=!0,autoPan()),!dragStarted){const x=pointerPos.xSnapped-(lastPos.x??0),y=pointerPos.ySnapped-(lastPos.y??0);Math.sqrt(x*x+y*y)>nodeDragThreshold&&startDrag(event)}(lastPos.x!==pointerPos.xSnapped||lastPos.y!==pointerPos.ySnapped)&&dragItems&&dragStarted&&(mousePosition=getEventPosition(event.sourceEvent,containerBounds),updateNodes(pointerPos,event.sourceEvent))}}).on("end",event=>{if(dragStarted&&!abortDrag&&(autoPanStarted=!1,dragStarted=!1,cancelAnimationFrame(autoPanId),dragItems.size>0)){const{nodeLookup,updateNodePositions,onNodeDragStop,onSelectionDragStop}=getStoreItems();if(nodePositionsChanged&&(updateNodePositions(dragItems,!1),nodePositionsChanged=!1),onDragStop||onNodeDragStop||!nodeId&&onSelectionDragStop){const[currentNode,currentNodes]=getEventHandlerParams({nodeId,dragItems,nodeLookup,dragging:!1});onDragStop?.(event.sourceEvent,dragItems,currentNode,currentNodes),onNodeDragStop?.(event.sourceEvent,currentNode,currentNodes),nodeId||onSelectionDragStop?.(event.sourceEvent,currentNodes)}}}).filter(event=>{const target=event.target;return!event.button&&(!noDragClassName||!hasSelector(target,`.${noDragClassName}`,domNode))&&(!handleSelector||hasSelector(target,handleSelector,domNode))});d3Selection.call(d3DragInstance)},destroy:function destroy(){d3Selection?.on(".drag",null)}}}function getClosestHandle(position,connectionRadius,nodeLookup,fromHandle){let closestHandles=[],minDistance=1/0;const closeNodes=function getNodesWithinDistance(position,nodeLookup,distance){const nodes=[],rect={x:position.x-distance,y:position.y-distance,width:2*distance,height:2*distance};for(const node of nodeLookup.values())getOverlappingArea(rect,nodeToRect(node))>0&&nodes.push(node);return nodes}(position,nodeLookup,connectionRadius+250);for(const node of closeNodes){const allHandles=[...node.internals.handleBounds?.source??[],...node.internals.handleBounds?.target??[]];for(const handle of allHandles){if(fromHandle.nodeId===handle.nodeId&&fromHandle.type===handle.type&&fromHandle.id===handle.id)continue;const{x,y}=getHandlePosition(node,handle,handle.position,!0),distance=Math.sqrt(Math.pow(x-position.x,2)+Math.pow(y-position.y,2));distance>connectionRadius||(distance<minDistance?(closestHandles=[{...handle,x,y}],minDistance=distance):distance===minDistance&&closestHandles.push({...handle,x,y}))}}if(!closestHandles.length)return null;if(closestHandles.length>1){const oppositeHandleType="source"===fromHandle.type?"target":"source";return closestHandles.find(handle=>handle.type===oppositeHandleType)??closestHandles[0]}return closestHandles[0]}function getHandle(nodeId,handleType,handleId,nodeLookup,connectionMode,withAbsolutePosition=!1){const node=nodeLookup.get(nodeId);if(!node)return null;const handles="strict"===connectionMode?node.internals.handleBounds?.[handleType]:[...node.internals.handleBounds?.source??[],...node.internals.handleBounds?.target??[]],handle=(handleId?handles?.find(h=>h.id===handleId):handles?.[0])??null;return handle&&withAbsolutePosition?{...handle,...getHandlePosition(node,handle,handle.position,!0)}:handle}function getHandleType(edgeUpdaterType,handleDomNode){return edgeUpdaterType||(handleDomNode?.classList.contains("target")?"target":handleDomNode?.classList.contains("source")?"source":null)}const alwaysValid=()=>!0;function isValidHandle(event,{handle,connectionMode,fromNodeId,fromHandleId,fromType,doc,lib,flowId,isValidConnection=alwaysValid,nodeLookup}){const isTarget="target"===fromType,handleDomNode=handle?doc.querySelector(`.${lib}-flow__handle[data-id="${flowId}-${handle?.nodeId}-${handle?.id}-${handle?.type}"]`):null,{x,y}=getEventPosition(event),handleBelow=doc.elementFromPoint(x,y),handleToCheck=handleBelow?.classList.contains(`${lib}-flow__handle`)?handleBelow:handleDomNode,result={handleDomNode:handleToCheck,isValid:!1,connection:null,toHandle:null};if(handleToCheck){const handleType=getHandleType(void 0,handleToCheck),handleNodeId=handleToCheck.getAttribute("data-nodeid"),handleId=handleToCheck.getAttribute("data-handleid"),connectable=handleToCheck.classList.contains("connectable"),connectableEnd=handleToCheck.classList.contains("connectableend");if(!handleNodeId||!handleType)return result;const connection={source:isTarget?handleNodeId:fromNodeId,sourceHandle:isTarget?handleId:fromHandleId,target:isTarget?fromNodeId:handleNodeId,targetHandle:isTarget?fromHandleId:handleId};result.connection=connection;const isValid=connectable&&connectableEnd&&(connectionMode===ConnectionMode.Strict?isTarget&&"source"===handleType||!isTarget&&"target"===handleType:handleNodeId!==fromNodeId||handleId!==fromHandleId);result.isValid=isValid&&isValidConnection(connection),result.toHandle=getHandle(handleNodeId,handleType,handleId,nodeLookup,connectionMode,!0)}return result}const XYHandle={onPointerDown:function onPointerDown(event,{connectionMode,connectionRadius,handleId,nodeId,edgeUpdaterType,isTarget,domNode,nodeLookup,lib,autoPanOnConnect,flowId,panBy,cancelConnection,onConnectStart,onConnect,onConnectEnd,isValidConnection=alwaysValid,onReconnectEnd,updateConnection,getTransform,getFromHandle,autoPanSpeed,dragThreshold=1}){const doc=getHostForElement(event.target);let closestHandle,autoPanId=0;const{x,y}=getEventPosition(event),clickedHandle=doc?.elementFromPoint(x,y),handleType=getHandleType(edgeUpdaterType,clickedHandle),containerBounds=domNode?.getBoundingClientRect();let connectionStarted=!1;if(!containerBounds||!handleType)return;const fromHandleInternal=getHandle(nodeId,handleType,handleId,nodeLookup,connectionMode);if(!fromHandleInternal)return;let position=getEventPosition(event,containerBounds),autoPanStarted=!1,connection=null,isValid=!1,handleDomNode=null;function autoPan(){if(!autoPanOnConnect||!containerBounds)return;const[x,y]=calcAutoPan(position,containerBounds,autoPanSpeed);panBy({x,y}),autoPanId=requestAnimationFrame(autoPan)}const fromHandle={...fromHandleInternal,nodeId,type:handleType,position:fromHandleInternal.position},fromNodeInternal=nodeLookup.get(nodeId);let previousConnection={inProgress:!0,isValid:null,from:getHandlePosition(fromNodeInternal,fromHandle,Position.Left,!0),fromHandle,fromPosition:fromHandle.position,fromNode:fromNodeInternal,to:position,toHandle:null,toPosition:oppositePosition[fromHandle.position],toNode:null};function startConnection(){connectionStarted=!0,updateConnection(previousConnection),onConnectStart?.(event,{nodeId,handleId,handleType})}function onPointerMove(event){if(!connectionStarted){const{x:evtX,y:evtY}=getEventPosition(event),dx=evtX-x,dy=evtY-y;if(!(dx*dx+dy*dy>dragThreshold*dragThreshold))return;startConnection()}if(!getFromHandle()||!fromHandle)return void onPointerUp(event);const transform=getTransform();position=getEventPosition(event,containerBounds),closestHandle=getClosestHandle(pointToRendererPoint(position,transform,!1,[1,1]),connectionRadius,nodeLookup,fromHandle),autoPanStarted||(autoPan(),autoPanStarted=!0);const result=isValidHandle(event,{handle:closestHandle,connectionMode,fromNodeId:nodeId,fromHandleId:handleId,fromType:isTarget?"target":"source",isValidConnection,doc,lib,flowId,nodeLookup});handleDomNode=result.handleDomNode,connection=result.connection,isValid=function isConnectionValid(isInsideConnectionRadius,isHandleValid){let isValid=null;return isHandleValid?isValid=!0:isInsideConnectionRadius&&!isHandleValid&&(isValid=!1),isValid}(!!closestHandle,result.isValid);const newConnection={...previousConnection,isValid,to:result.toHandle&&isValid?rendererPointToPoint({x:result.toHandle.x,y:result.toHandle.y},transform):position,toHandle:result.toHandle,toPosition:isValid&&result.toHandle?result.toHandle.position:oppositePosition[fromHandle.position],toNode:result.toHandle?nodeLookup.get(result.toHandle.nodeId):null};isValid&&closestHandle&&previousConnection.toHandle&&newConnection.toHandle&&previousConnection.toHandle.type===newConnection.toHandle.type&&previousConnection.toHandle.nodeId===newConnection.toHandle.nodeId&&previousConnection.toHandle.id===newConnection.toHandle.id&&previousConnection.to.x===newConnection.to.x&&previousConnection.to.y===newConnection.to.y||(updateConnection(newConnection),previousConnection=newConnection)}function onPointerUp(event){if(connectionStarted){(closestHandle||handleDomNode)&&connection&&isValid&&onConnect?.(connection);const{inProgress,...connectionState}=previousConnection,finalConnectionState={...connectionState,toPosition:previousConnection.toHandle?previousConnection.toPosition:null};onConnectEnd?.(event,finalConnectionState),edgeUpdaterType&&onReconnectEnd?.(event,finalConnectionState)}cancelConnection(),cancelAnimationFrame(autoPanId),autoPanStarted=!1,isValid=!1,connection=null,handleDomNode=null,doc.removeEventListener("mousemove",onPointerMove),doc.removeEventListener("mouseup",onPointerUp),doc.removeEventListener("touchmove",onPointerMove),doc.removeEventListener("touchend",onPointerUp)}0===dragThreshold&&startConnection(),doc.addEventListener("mousemove",onPointerMove),doc.addEventListener("mouseup",onPointerUp),doc.addEventListener("touchmove",onPointerMove),doc.addEventListener("touchend",onPointerUp)},isValid:isValidHandle};function XYMinimap({domNode,panZoom,getTransform,getViewScale}){const selection=src_select(domNode);return{update:function update({translateExtent,width,height,zoomStep=10,pannable=!0,zoomable=!0,inversePan=!1}){let panStart=[0,0];const zoomAndPanHandler=zoom().on("start",event=>{"mousedown"!==event.sourceEvent.type&&"touchstart"!==event.sourceEvent.type||(panStart=[event.sourceEvent.clientX??event.sourceEvent.touches[0].clientX,event.sourceEvent.clientY??event.sourceEvent.touches[0].clientY])}).on("zoom",pannable?event=>{const transform=getTransform();if("mousemove"!==event.sourceEvent.type&&"touchmove"!==event.sourceEvent.type||!panZoom)return;const panCurrent=[event.sourceEvent.clientX??event.sourceEvent.touches[0].clientX,event.sourceEvent.clientY??event.sourceEvent.touches[0].clientY],panDelta=[panCurrent[0]-panStart[0],panCurrent[1]-panStart[1]];panStart=panCurrent;const moveScale=getViewScale()*Math.max(transform[2],Math.log(transform[2]))*(inversePan?-1:1),position={x:transform[0]-panDelta[0]*moveScale,y:transform[1]-panDelta[1]*moveScale},extent=[[0,0],[width,height]];panZoom.setViewportConstrained({x:position.x,y:position.y,zoom:transform[2]},extent,translateExtent)}:null).on("zoom.wheel",zoomable?event=>{const transform=getTransform();if("wheel"!==event.sourceEvent.type||!panZoom)return;const pinchDelta=-event.sourceEvent.deltaY*(1===event.sourceEvent.deltaMode?.05:event.sourceEvent.deltaMode?1:.002)*zoomStep,nextZoom=transform[2]*Math.pow(2,pinchDelta);panZoom.scaleTo(nextZoom)}:null);selection.call(zoomAndPanHandler,{})},destroy:function destroy(){selection.on("zoom",null)},pointer}}const viewChanged=(prevViewport,eventViewport)=>prevViewport.x!==eventViewport.x||prevViewport.y!==eventViewport.y||prevViewport.zoom!==eventViewport.k,transformToViewport=transform=>({x:transform.x,y:transform.y,zoom:transform.k}),viewportToTransform=({x,y,zoom})=>transform_identity.translate(x,y).scale(zoom),isWrappedWithClass=(event,className)=>event.target.closest(`.${className}`),isRightClickPan=(panOnDrag,usedButton)=>2===usedButton&&Array.isArray(panOnDrag)&&panOnDrag.includes(2),defaultEase=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,getD3Transition=(selection,duration=0,ease=defaultEase,onEnd=()=>{})=>{const hasDuration="number"==typeof duration&&duration>0;return hasDuration||onEnd(),hasDuration?selection.transition().duration(duration).ease(ease).on("end",onEnd):selection},wheelDelta=event=>{const factor=event.ctrlKey&&isMacOs()?10:1;return-event.deltaY*(1===event.deltaMode?.05:event.deltaMode?1:.002)*factor};function XYPanZoom({domNode,minZoom,maxZoom,paneClickDistance,translateExtent,viewport,onPanZoom,onPanZoomStart,onPanZoomEnd,onDraggingChange}){const zoomPanValues={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},bbox=domNode.getBoundingClientRect(),d3ZoomInstance=zoom().clickDistance(!isNumeric(paneClickDistance)||paneClickDistance<0?0:paneClickDistance).scaleExtent([minZoom,maxZoom]).translateExtent(translateExtent),d3Selection=src_select(domNode).call(d3ZoomInstance);setViewportConstrained({x:viewport.x,y:viewport.y,zoom:clamp(viewport.zoom,minZoom,maxZoom)},[[0,0],[bbox.width,bbox.height]],translateExtent);const d3ZoomHandler=d3Selection.on("wheel.zoom"),d3DblClickZoomHandler=d3Selection.on("dblclick.zoom");function setTransform(transform,options){return d3Selection?new Promise(resolve=>{d3ZoomInstance?.interpolate("linear"===options?.interpolate?value:src_zoom).transform(getD3Transition(d3Selection,options?.duration,options?.ease,()=>resolve(!0)),transform)}):Promise.resolve(!1)}function destroy(){d3ZoomInstance.on("zoom",null)}async function setViewportConstrained(viewport,extent,translateExtent){const nextTransform=viewportToTransform(viewport),contrainedTransform=d3ZoomInstance?.constrain()(nextTransform,extent,translateExtent);return contrainedTransform&&await setTransform(contrainedTransform),new Promise(resolve=>resolve(contrainedTransform))}return d3ZoomInstance.wheelDelta(wheelDelta),{update:function update({noWheelClassName,noPanClassName,onPaneContextMenu,userSelectionActive,panOnScroll,panOnDrag,panOnScrollMode,panOnScrollSpeed,preventScrolling,zoomOnPinch,zoomOnScroll,zoomOnDoubleClick,zoomActivationKeyPressed,lib,onTransformChange}){userSelectionActive&&!zoomPanValues.isZoomingOrPanning&&destroy();const wheelHandler=panOnScroll&&!zoomActivationKeyPressed&&!userSelectionActive?function createPanOnScrollHandler({zoomPanValues,noWheelClassName,d3Selection,d3Zoom,panOnScrollMode,panOnScrollSpeed,zoomOnPinch,onPanZoomStart,onPanZoom,onPanZoomEnd}){return event=>{if(isWrappedWithClass(event,noWheelClassName))return!1;event.preventDefault(),event.stopImmediatePropagation();const currentZoom=d3Selection.property("__zoom").k||1;if(event.ctrlKey&&zoomOnPinch){const point=pointer(event),pinchDelta=wheelDelta(event),zoom=currentZoom*Math.pow(2,pinchDelta);return void d3Zoom.scaleTo(d3Selection,zoom,point,event)}const deltaNormalize=1===event.deltaMode?20:1;let deltaX=panOnScrollMode===PanOnScrollMode.Vertical?0:event.deltaX*deltaNormalize,deltaY=panOnScrollMode===PanOnScrollMode.Horizontal?0:event.deltaY*deltaNormalize;!isMacOs()&&event.shiftKey&&panOnScrollMode!==PanOnScrollMode.Vertical&&(deltaX=event.deltaY*deltaNormalize,deltaY=0),d3Zoom.translateBy(d3Selection,-deltaX/currentZoom*panOnScrollSpeed,-deltaY/currentZoom*panOnScrollSpeed,{internal:!0});const nextViewport=transformToViewport(d3Selection.property("__zoom"));clearTimeout(zoomPanValues.panScrollTimeout),zoomPanValues.isPanScrolling||(zoomPanValues.isPanScrolling=!0,onPanZoomStart?.(event,nextViewport)),zoomPanValues.isPanScrolling&&(onPanZoom?.(event,nextViewport),zoomPanValues.panScrollTimeout=setTimeout(()=>{onPanZoomEnd?.(event,nextViewport),zoomPanValues.isPanScrolling=!1},150))}}({zoomPanValues,noWheelClassName,d3Selection,d3Zoom:d3ZoomInstance,panOnScrollMode,panOnScrollSpeed,zoomOnPinch,onPanZoomStart,onPanZoom,onPanZoomEnd}):function createZoomOnScrollHandler({noWheelClassName,preventScrolling,d3ZoomHandler}){return function(event,d){const isWheel="wheel"===event.type,preventZoom=!preventScrolling&&isWheel&&!event.ctrlKey,hasNoWheelClass=isWrappedWithClass(event,noWheelClassName);if(event.ctrlKey&&isWheel&&hasNoWheelClass&&event.preventDefault(),preventZoom||hasNoWheelClass)return null;event.preventDefault(),d3ZoomHandler.call(this,event,d)}}({noWheelClassName,preventScrolling,d3ZoomHandler});if(d3Selection.on("wheel.zoom",wheelHandler,{passive:!1}),!userSelectionActive){const startHandler=function createPanZoomStartHandler({zoomPanValues,onDraggingChange,onPanZoomStart}){return event=>{if(event.sourceEvent?.internal)return;const viewport=transformToViewport(event.transform);zoomPanValues.mouseButton=event.sourceEvent?.button||0,zoomPanValues.isZoomingOrPanning=!0,zoomPanValues.prevViewport=viewport,"mousedown"===event.sourceEvent?.type&&onDraggingChange(!0),onPanZoomStart&&onPanZoomStart?.(event.sourceEvent,viewport)}}({zoomPanValues,onDraggingChange,onPanZoomStart});d3ZoomInstance.on("start",startHandler);const panZoomHandler=function createPanZoomHandler({zoomPanValues,panOnDrag,onPaneContextMenu,onTransformChange,onPanZoom}){return event=>{zoomPanValues.usedRightMouseButton=!(!onPaneContextMenu||!isRightClickPan(panOnDrag,zoomPanValues.mouseButton??0)),event.sourceEvent?.sync||onTransformChange([event.transform.x,event.transform.y,event.transform.k]),onPanZoom&&!event.sourceEvent?.internal&&onPanZoom?.(event.sourceEvent,transformToViewport(event.transform))}}({zoomPanValues,panOnDrag,onPaneContextMenu:!!onPaneContextMenu,onPanZoom,onTransformChange});d3ZoomInstance.on("zoom",panZoomHandler);const panZoomEndHandler=function createPanZoomEndHandler({zoomPanValues,panOnDrag,panOnScroll,onDraggingChange,onPanZoomEnd,onPaneContextMenu}){return event=>{if(!event.sourceEvent?.internal&&(zoomPanValues.isZoomingOrPanning=!1,onPaneContextMenu&&isRightClickPan(panOnDrag,zoomPanValues.mouseButton??0)&&!zoomPanValues.usedRightMouseButton&&event.sourceEvent&&onPaneContextMenu(event.sourceEvent),zoomPanValues.usedRightMouseButton=!1,onDraggingChange(!1),onPanZoomEnd&&viewChanged(zoomPanValues.prevViewport,event.transform))){const viewport=transformToViewport(event.transform);zoomPanValues.prevViewport=viewport,clearTimeout(zoomPanValues.timerId),zoomPanValues.timerId=setTimeout(()=>{onPanZoomEnd?.(event.sourceEvent,viewport)},panOnScroll?150:0)}}}({zoomPanValues,panOnDrag,panOnScroll,onPaneContextMenu,onPanZoomEnd,onDraggingChange});d3ZoomInstance.on("end",panZoomEndHandler)}const filter=function createFilter({zoomActivationKeyPressed,zoomOnScroll,zoomOnPinch,panOnDrag,panOnScroll,zoomOnDoubleClick,userSelectionActive,noWheelClassName,noPanClassName,lib}){return event=>{const zoomScroll=zoomActivationKeyPressed||zoomOnScroll,pinchZoom=zoomOnPinch&&event.ctrlKey;if(1===event.button&&"mousedown"===event.type&&(isWrappedWithClass(event,`${lib}-flow__node`)||isWrappedWithClass(event,`${lib}-flow__edge`)))return!0;if(!(panOnDrag||zoomScroll||panOnScroll||zoomOnDoubleClick||zoomOnPinch))return!1;if(userSelectionActive)return!1;if(isWrappedWithClass(event,noWheelClassName)&&"wheel"===event.type)return!1;if(isWrappedWithClass(event,noPanClassName)&&("wheel"!==event.type||panOnScroll&&"wheel"===event.type&&!zoomActivationKeyPressed))return!1;if(!zoomOnPinch&&event.ctrlKey&&"wheel"===event.type)return!1;if(!zoomOnPinch&&"touchstart"===event.type&&event.touches?.length>1)return event.preventDefault(),!1;if(!zoomScroll&&!panOnScroll&&!pinchZoom&&"wheel"===event.type)return!1;if(!panOnDrag&&("mousedown"===event.type||"touchstart"===event.type))return!1;if(Array.isArray(panOnDrag)&&!panOnDrag.includes(event.button)&&"mousedown"===event.type)return!1;const buttonAllowed=Array.isArray(panOnDrag)&&panOnDrag.includes(event.button)||!event.button||event.button<=1;return(!event.ctrlKey||"wheel"===event.type)&&buttonAllowed}}({zoomActivationKeyPressed,panOnDrag,zoomOnScroll,panOnScroll,zoomOnDoubleClick,zoomOnPinch,userSelectionActive,noPanClassName,noWheelClassName,lib});d3ZoomInstance.filter(filter),zoomOnDoubleClick?d3Selection.on("dblclick.zoom",d3DblClickZoomHandler):d3Selection.on("dblclick.zoom",null)},destroy,setViewport:async function setViewport(viewport,options){const nextTransform=viewportToTransform(viewport);return await setTransform(nextTransform,options),new Promise(resolve=>resolve(nextTransform))},setViewportConstrained,getViewport:function getViewport(){const transform=d3Selection?transform_transform(d3Selection.node()):{x:0,y:0,k:1};return{x:transform.x,y:transform.y,zoom:transform.k}},scaleTo:function scaleTo(zoom,options){return d3Selection?new Promise(resolve=>{d3ZoomInstance?.interpolate("linear"===options?.interpolate?value:src_zoom).scaleTo(getD3Transition(d3Selection,options?.duration,options?.ease,()=>resolve(!0)),zoom)}):Promise.resolve(!1)},scaleBy:function scaleBy(factor,options){return d3Selection?new Promise(resolve=>{d3ZoomInstance?.interpolate("linear"===options?.interpolate?value:src_zoom).scaleBy(getD3Transition(d3Selection,options?.duration,options?.ease,()=>resolve(!0)),factor)}):Promise.resolve(!1)},setScaleExtent:function setScaleExtent(scaleExtent){d3ZoomInstance?.scaleExtent(scaleExtent)},setTranslateExtent:function setTranslateExtent(translateExtent){d3ZoomInstance?.translateExtent(translateExtent)},syncViewport:function syncViewport(viewport){if(d3Selection){const nextTransform=viewportToTransform(viewport),currentTransform=d3Selection.property("__zoom");currentTransform.k===viewport.zoom&&currentTransform.x===viewport.x&&currentTransform.y===viewport.y||d3ZoomInstance?.transform(d3Selection,nextTransform,null,{sync:!0})}},setClickDistance:function setClickDistance(distance){const validDistance=!isNumeric(distance)||distance<0?0:distance;d3ZoomInstance?.clickDistance(validDistance)}}}var ResizeControlVariant;!function(ResizeControlVariant){ResizeControlVariant.Line="line",ResizeControlVariant.Handle="handle"}(ResizeControlVariant||(ResizeControlVariant={}));function getLowerExtentClamp(lowerExtent,lowerBound){return Math.max(0,lowerBound-lowerExtent)}function getUpperExtentClamp(upperExtent,upperBound){return Math.max(0,upperExtent-upperBound)}function getSizeClamp(size,minSize,maxSize){return Math.max(0,minSize-size,size-maxSize)}function xor(a,b){return a?!b:b}const initPrevValues={width:0,height:0,x:0,y:0},initStartValues={...initPrevValues,pointerX:0,pointerY:0,aspectRatio:1};function nodeToChildExtent(child,parent,nodeOrigin){const x=parent.position.x+child.position.x,y=parent.position.y+child.position.y,width=child.measured.width??0,height=child.measured.height??0,originOffsetX=nodeOrigin[0]*width,originOffsetY=nodeOrigin[1]*height;return[[x-originOffsetX,y-originOffsetY],[x+width-originOffsetX,y+height-originOffsetY]]}function XYResizer({domNode,nodeId,getStoreItems,onChange,onEnd}){const selection=src_select(domNode);return{update:function update({controlPosition,boundaries,keepAspectRatio,resizeDirection,onResizeStart,onResize,onResizeEnd,shouldResize}){let prevValues={...initPrevValues},startValues={...initStartValues};const controlDirection=function getControlDirection(controlPosition){return{isHorizontal:controlPosition.includes("right")||controlPosition.includes("left"),isVertical:controlPosition.includes("bottom")||controlPosition.includes("top"),affectsX:controlPosition.includes("left"),affectsY:controlPosition.includes("top")}}(controlPosition);let node,parentNode,parentExtent,childExtent,containerBounds=null,childNodes=[];const dragHandler=drag().on("start",event=>{const{nodeLookup,transform,snapGrid,snapToGrid,nodeOrigin,paneDomNode}=getStoreItems();if(node=nodeLookup.get(nodeId),!node)return;containerBounds=paneDomNode?.getBoundingClientRect()??null;const{xSnapped,ySnapped}=getPointerPosition(event.sourceEvent,{transform,snapGrid,snapToGrid,containerBounds});prevValues={width:node.measured.width??0,height:node.measured.height??0,x:node.position.x??0,y:node.position.y??0},startValues={...prevValues,pointerX:xSnapped,pointerY:ySnapped,aspectRatio:prevValues.width/prevValues.height},parentNode=void 0,node.parentId&&("parent"===node.extent||node.expandParent)&&(parentNode=nodeLookup.get(node.parentId),parentExtent=parentNode&&"parent"===node.extent?function nodeToParentExtent(node){return[[0,0],[node.measured.width,node.measured.height]]}(parentNode):void 0),childNodes=[],childExtent=void 0;for(const[childId,child]of nodeLookup)if(child.parentId===nodeId&&(childNodes.push({id:childId,position:{...child.position},extent:child.extent}),"parent"===child.extent||child.expandParent)){const extent=nodeToChildExtent(child,node,child.origin??nodeOrigin);childExtent=childExtent?[[Math.min(extent[0][0],childExtent[0][0]),Math.min(extent[0][1],childExtent[0][1])],[Math.max(extent[1][0],childExtent[1][0]),Math.max(extent[1][1],childExtent[1][1])]]:extent}onResizeStart?.(event,{...prevValues})}).on("drag",event=>{const{transform,snapGrid,snapToGrid,nodeOrigin:storeNodeOrigin}=getStoreItems(),pointerPosition=getPointerPosition(event.sourceEvent,{transform,snapGrid,snapToGrid,containerBounds}),childChanges=[];if(!node)return;const{x:prevX,y:prevY,width:prevWidth,height:prevHeight}=prevValues,change={},nodeOrigin=node.origin??storeNodeOrigin,{width,height,x,y}=function getDimensionsAfterResize(startValues,controlDirection,pointerPosition,boundaries,keepAspectRatio,nodeOrigin,extent,childExtent){let{affectsX,affectsY}=controlDirection;const{isHorizontal,isVertical}=controlDirection,isDiagonal=isHorizontal&&isVertical,{xSnapped,ySnapped}=pointerPosition,{minWidth,maxWidth,minHeight,maxHeight}=boundaries,{x:startX,y:startY,width:startWidth,height:startHeight,aspectRatio}=startValues;let distX=Math.floor(isHorizontal?xSnapped-startValues.pointerX:0),distY=Math.floor(isVertical?ySnapped-startValues.pointerY:0);const newWidth=startWidth+(affectsX?-distX:distX),newHeight=startHeight+(affectsY?-distY:distY),originOffsetX=-nodeOrigin[0]*startWidth,originOffsetY=-nodeOrigin[1]*startHeight;let clampX=getSizeClamp(newWidth,minWidth,maxWidth),clampY=getSizeClamp(newHeight,minHeight,maxHeight);if(extent){let xExtentClamp=0,yExtentClamp=0;affectsX&&distX<0?xExtentClamp=getLowerExtentClamp(startX+distX+originOffsetX,extent[0][0]):!affectsX&&distX>0&&(xExtentClamp=getUpperExtentClamp(startX+newWidth+originOffsetX,extent[1][0])),affectsY&&distY<0?yExtentClamp=getLowerExtentClamp(startY+distY+originOffsetY,extent[0][1]):!affectsY&&distY>0&&(yExtentClamp=getUpperExtentClamp(startY+newHeight+originOffsetY,extent[1][1])),clampX=Math.max(clampX,xExtentClamp),clampY=Math.max(clampY,yExtentClamp)}if(childExtent){let xExtentClamp=0,yExtentClamp=0;affectsX&&distX>0?xExtentClamp=getUpperExtentClamp(startX+distX,childExtent[0][0]):!affectsX&&distX<0&&(xExtentClamp=getLowerExtentClamp(startX+newWidth,childExtent[1][0])),affectsY&&distY>0?yExtentClamp=getUpperExtentClamp(startY+distY,childExtent[0][1]):!affectsY&&distY<0&&(yExtentClamp=getLowerExtentClamp(startY+newHeight,childExtent[1][1])),clampX=Math.max(clampX,xExtentClamp),clampY=Math.max(clampY,yExtentClamp)}if(keepAspectRatio){if(isHorizontal){const aspectHeightClamp=getSizeClamp(newWidth/aspectRatio,minHeight,maxHeight)*aspectRatio;if(clampX=Math.max(clampX,aspectHeightClamp),extent){let aspectExtentClamp=0;aspectExtentClamp=!affectsX&&!affectsY||affectsX&&!affectsY&&isDiagonal?getUpperExtentClamp(startY+originOffsetY+newWidth/aspectRatio,extent[1][1])*aspectRatio:getLowerExtentClamp(startY+originOffsetY+(affectsX?distX:-distX)/aspectRatio,extent[0][1])*aspectRatio,clampX=Math.max(clampX,aspectExtentClamp)}if(childExtent){let aspectExtentClamp=0;aspectExtentClamp=!affectsX&&!affectsY||affectsX&&!affectsY&&isDiagonal?getLowerExtentClamp(startY+newWidth/aspectRatio,childExtent[1][1])*aspectRatio:getUpperExtentClamp(startY+(affectsX?distX:-distX)/aspectRatio,childExtent[0][1])*aspectRatio,clampX=Math.max(clampX,aspectExtentClamp)}}if(isVertical){const aspectWidthClamp=getSizeClamp(newHeight*aspectRatio,minWidth,maxWidth)/aspectRatio;if(clampY=Math.max(clampY,aspectWidthClamp),extent){let aspectExtentClamp=0;aspectExtentClamp=!affectsX&&!affectsY||affectsY&&!affectsX&&isDiagonal?getUpperExtentClamp(startX+newHeight*aspectRatio+originOffsetX,extent[1][0])/aspectRatio:getLowerExtentClamp(startX+(affectsY?distY:-distY)*aspectRatio+originOffsetX,extent[0][0])/aspectRatio,clampY=Math.max(clampY,aspectExtentClamp)}if(childExtent){let aspectExtentClamp=0;aspectExtentClamp=!affectsX&&!affectsY||affectsY&&!affectsX&&isDiagonal?getLowerExtentClamp(startX+newHeight*aspectRatio,childExtent[1][0])/aspectRatio:getUpperExtentClamp(startX+(affectsY?distY:-distY)*aspectRatio,childExtent[0][0])/aspectRatio,clampY=Math.max(clampY,aspectExtentClamp)}}}distY+=distY<0?clampY:-clampY,distX+=distX<0?clampX:-clampX,keepAspectRatio&&(isDiagonal?newWidth>newHeight*aspectRatio?distY=(xor(affectsX,affectsY)?-distX:distX)/aspectRatio:distX=(xor(affectsX,affectsY)?-distY:distY)*aspectRatio:isHorizontal?(distY=distX/aspectRatio,affectsY=affectsX):(distX=distY*aspectRatio,affectsX=affectsY));const x=affectsX?startX+distX:startX,y=affectsY?startY+distY:startY;return{width:startWidth+(affectsX?-distX:distX),height:startHeight+(affectsY?-distY:distY),x:nodeOrigin[0]*distX*(affectsX?-1:1)+x,y:nodeOrigin[1]*distY*(affectsY?-1:1)+y}}(startValues,controlDirection,pointerPosition,boundaries,keepAspectRatio,nodeOrigin,parentExtent,childExtent),isWidthChange=width!==prevWidth,isHeightChange=height!==prevHeight,isXPosChange=x!==prevX&&isWidthChange,isYPosChange=y!==prevY&&isHeightChange;if(!(isXPosChange||isYPosChange||isWidthChange||isHeightChange))return;if((isXPosChange||isYPosChange||1===nodeOrigin[0]||1===nodeOrigin[1])&&(change.x=isXPosChange?x:prevValues.x,change.y=isYPosChange?y:prevValues.y,prevValues.x=change.x,prevValues.y=change.y,childNodes.length>0)){const xChange=x-prevX,yChange=y-prevY;for(const childNode of childNodes)childNode.position={x:childNode.position.x-xChange+nodeOrigin[0]*(width-prevWidth),y:childNode.position.y-yChange+nodeOrigin[1]*(height-prevHeight)},childChanges.push(childNode)}if((isWidthChange||isHeightChange)&&(change.width=!isWidthChange||resizeDirection&&"horizontal"!==resizeDirection?prevValues.width:width,change.height=!isHeightChange||resizeDirection&&"vertical"!==resizeDirection?prevValues.height:height,prevValues.width=change.width,prevValues.height=change.height),parentNode&&node.expandParent){const xLimit=nodeOrigin[0]*(change.width??0);change.x&&change.x<xLimit&&(prevValues.x=xLimit,startValues.x=startValues.x-(change.x-xLimit));const yLimit=nodeOrigin[1]*(change.height??0);change.y&&change.y<yLimit&&(prevValues.y=yLimit,startValues.y=startValues.y-(change.y-yLimit))}const direction=function getResizeDirection({width,prevWidth,height,prevHeight,affectsX,affectsY}){const deltaWidth=width-prevWidth,deltaHeight=height-prevHeight,direction=[deltaWidth>0?1:deltaWidth<0?-1:0,deltaHeight>0?1:deltaHeight<0?-1:0];return deltaWidth&&affectsX&&(direction[0]=-1*direction[0]),deltaHeight&&affectsY&&(direction[1]=-1*direction[1]),direction}({width:prevValues.width,prevWidth,height:prevValues.height,prevHeight,affectsX:controlDirection.affectsX,affectsY:controlDirection.affectsY}),nextValues={...prevValues,direction},callResize=shouldResize?.(event,nextValues);!1!==callResize&&(onResize?.(event,nextValues),onChange(change,childChanges))}).on("end",event=>{onResizeEnd?.(event,{...prevValues}),onEnd?.({...prevValues})});selection.call(dragHandler)},destroy:function destroy(){selection.on(".drag",null)}}}},"./node_modules/css-loader/dist/runtime/api.js":module=>{"use strict";module.exports=function(cssWithMappingToString){var list=[];return list.toString=function toString(){return this.map(function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content}).join("")},list.i=function i(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":module=>{"use strict";module.exports=function(item){var content=item[1],cssMapping=item[3];if(!cssMapping)return content;if("function"==typeof btoa){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),sourceMapping="/*# ".concat(data," */");return[content].concat([sourceMapping]).join("\n")}return[content].join("\n")}},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":module=>{"use strict";var stylesInDOM=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDOM.length;i++)if(stylesInDOM[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var indexByIdentifier=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3],supports:item[4],layer:item[5]};if(-1!==indexByIdentifier)stylesInDOM[indexByIdentifier].references++,stylesInDOM[indexByIdentifier].updater(obj);else{var updater=addElementStyle(obj,options);options.byIndex=i,stylesInDOM.splice(i,0,{identifier,updater,references:1})}identifiers.push(identifier)}return identifiers}function addElementStyle(obj,options){var api=options.domAPI(options);api.update(obj);return function updater(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap&&newObj.supports===obj.supports&&newObj.layer===obj.layer)return;api.update(obj=newObj)}else api.remove()}}module.exports=function(list,options){var lastIdentifiers=modulesToDom(list=list||[],options=options||{});return function update(newList){newList=newList||[];for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDOM[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDOM[_index].references&&(stylesInDOM[_index].updater(),stylesInDOM.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":module=>{"use strict";var memo={};module.exports=function insertBySelector(insert,style){var target=function getTarget(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}(insert);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":module=>{"use strict";module.exports=function insertStyleElement(options){var element=document.createElement("style");return options.setAttributes(element,options.attributes),options.insert(element,options.options),element}},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=function setAttributesWithoutAttributes(styleElement){var nonce=__webpack_require__.nc;nonce&&styleElement.setAttribute("nonce",nonce)}},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":module=>{"use strict";module.exports=function domAPI(options){if("undefined"==typeof document)return{update:function update(){},remove:function remove(){}};var styleElement=options.insertStyleElement(options);return{update:function update(obj){!function apply(styleElement,options,obj){var css="";obj.supports&&(css+="@supports (".concat(obj.supports,") {")),obj.media&&(css+="@media ".concat(obj.media," {"));var needLayer=void 0!==obj.layer;needLayer&&(css+="@layer".concat(obj.layer.length>0?" ".concat(obj.layer):""," {")),css+=obj.css,needLayer&&(css+="}"),obj.media&&(css+="}"),obj.supports&&(css+="}");var sourceMap=obj.sourceMap;sourceMap&&"undefined"!=typeof btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),options.styleTagTransform(css,styleElement,options.options)}(styleElement,options,obj)},remove:function remove(){!function removeStyleElement(styleElement){if(null===styleElement.parentNode)return!1;styleElement.parentNode.removeChild(styleElement)}(styleElement)}}}},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":module=>{"use strict";module.exports=function styleTagTransform(css,styleElement){if(styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}},"./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var React=__webpack_require__("./node_modules/react/index.js");var objectIs="function"==typeof Object.is?Object.is:function is(x,y){return x===y&&(0!==x||1/x==1/y)||x!=x&&y!=y},useState=React.useState,useEffect=React.useEffect,useLayoutEffect=React.useLayoutEffect,useDebugValue=React.useDebugValue;function checkIfSnapshotChanged(inst){var latestGetSnapshot=inst.getSnapshot;inst=inst.value;try{var nextValue=latestGetSnapshot();return!objectIs(inst,nextValue)}catch(error){return!0}}var shim="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function useSyncExternalStore$1(subscribe,getSnapshot){return getSnapshot()}:function useSyncExternalStore$2(subscribe,getSnapshot){var value=getSnapshot(),_useState=useState({inst:{value,getSnapshot}}),inst=_useState[0].inst,forceUpdate=_useState[1];return useLayoutEffect(function(){inst.value=value,inst.getSnapshot=getSnapshot,checkIfSnapshotChanged(inst)&&forceUpdate({inst})},[subscribe,value,getSnapshot]),useEffect(function(){return checkIfSnapshotChanged(inst)&&forceUpdate({inst}),subscribe(function(){checkIfSnapshotChanged(inst)&&forceUpdate({inst})})},[subscribe]),useDebugValue(value),value};exports.useSyncExternalStore=void 0!==React.useSyncExternalStore?React.useSyncExternalStore:shim},"./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var React=__webpack_require__("./node_modules/react/index.js"),shim=__webpack_require__("./node_modules/use-sync-external-store/shim/index.js");var objectIs="function"==typeof Object.is?Object.is:function is(x,y){return x===y&&(0!==x||1/x==1/y)||x!=x&&y!=y},useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;exports.useSyncExternalStoreWithSelector=function(subscribe,getSnapshot,getServerSnapshot,selector,isEqual){var instRef=useRef(null);if(null===instRef.current){var inst={hasValue:!1,value:null};instRef.current=inst}else inst=instRef.current;instRef=useMemo(function(){function memoizedSelector(nextSnapshot){if(!hasMemo){if(hasMemo=!0,memoizedSnapshot=nextSnapshot,nextSnapshot=selector(nextSnapshot),void 0!==isEqual&&inst.hasValue){var currentSelection=inst.value;if(isEqual(currentSelection,nextSnapshot))return memoizedSelection=currentSelection}return memoizedSelection=nextSnapshot}if(currentSelection=memoizedSelection,objectIs(memoizedSnapshot,nextSnapshot))return currentSelection;var nextSelection=selector(nextSnapshot);return void 0!==isEqual&&isEqual(currentSelection,nextSelection)?(memoizedSnapshot=nextSnapshot,currentSelection):(memoizedSnapshot=nextSnapshot,memoizedSelection=nextSelection)}var memoizedSnapshot,memoizedSelection,hasMemo=!1,maybeGetServerSnapshot=void 0===getServerSnapshot?null:getServerSnapshot;return[function(){return memoizedSelector(getSnapshot())},null===maybeGetServerSnapshot?void 0:function(){return memoizedSelector(maybeGetServerSnapshot())}]},[getSnapshot,getServerSnapshot,selector,isEqual]);var value=useSyncExternalStore(subscribe,instRef[0],instRef[1]);return useEffect(function(){inst.hasValue=!0,inst.value=value},[value]),useDebugValue(value),value}},"./node_modules/use-sync-external-store/shim/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js")},"./node_modules/use-sync-external-store/shim/with-selector.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js")}}]);